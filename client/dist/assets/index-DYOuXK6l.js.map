{"version":3,"file":"index-DYOuXK6l.js","sources":["../../src/context/UserContext.tsx","../../src/lib/utils.ts","../../src/components/ui/input.tsx","../../src/components/ui/button.tsx","../../src/components/ui/label.tsx","../../src/hooks/use-toast.ts","../../src/store/slices/UserSlice.ts","../../src/Auth/AuthForm.tsx","../../src/components/ui/toast.tsx","../../src/components/ui/toaster.tsx","../../src/store/slices/BrandSlice.ts","../../src/components/ui/tooltip.tsx","../../src/assets/messold-icon.png","../../src/components/ui/scroll-area.tsx","../../src/pages/Dashboard/CollapsibleSidebar.tsx","../../src/components/ui/card.tsx","../../src/components/ui/skeleton.tsx","../../src/pages/AnalyticsDashboard/AdAccountsMetricsCard.tsx","../../src/pages/ConversionReportPage/components/CustomTabs.tsx","../../src/components/ui/calendar.tsx","../../src/components/ui/popover.tsx","../../src/components/ui/checkbox.tsx","../../src/store/slices/DateSlice.ts","../../src/components/dashboard_component/DatePickerWithRange.tsx","../../src/components/Tutorial/TutorialConfig.ts","../../src/store/slices/TutorialSlice.ts","../../src/components/Tutorial/TutorialButton.tsx","../../src/components/Tutorial/HeaderTutorialButton.tsx","../../src/components/dashboard_component/Header.tsx","../../src/pages/AnalyticsDashboard/dashboard.tsx","../../src/components/dashboard_component/TicketForm.tsx","../../src/components/dashboard_component/HelpDeskModal.tsx","../../src/pages/AnalyticsDashboard/AnalyticsDashboard.tsx","../../src/components/ui/dialog.tsx","../../src/pages/GeneralisedDashboard/components/ShopifyModalContent.tsx","../../src/pages/GeneralisedDashboard/components/OtherPlatformModalContent.tsx","../../src/pages/GeneralisedDashboard/components/BrandForm.tsx","../../src/pages/GeneralisedDashboard/BrandSetUpDashboard.tsx","../../src/context/TokenErrorContext.tsx","../../src/pages/ConversionReportPage/components/axiosInstance.ts","../../src/pages/GeneralisedDashboard/components/DashboardSkeleton.tsx","../../src/pages/GeneralisedDashboard/dashboard.tsx","../../src/pages/GeneralisedDashboard/GeneralDashboard.tsx","../../src/context/BrandContext.tsx","../../src/pages/MonthlyAdMetrics/ExcelMetrics.tsx","../../src/components/ui/table.tsx","../../src/components/ui/select.tsx","../../src/pages/BrandPerformanceDashboard/Dashboard.tsx","../../src/pages/BrandPerformanceDashboard/PerformanceDashboard.tsx","../../src/pages/SegmentDashboard/component/ProductTab.tsx","../../src/components/dashboard_component/TableSkeleton.tsx","../../src/pages/SegmentDashboard/component/SearchTermTable.tsx","../../src/pages/SegmentDashboard/component/AgeGenderMetrics.tsx","../../src/components/ui/dropdown-menu.tsx","../../src/pages/ReportPage/component/ReportTable.tsx","../../src/components/dashboard_component/FilterReport.tsx","../../src/pages/ReportPage/component/CitySessionPage.tsx","../../src/pages/ReportPage/component/LandingPageSession.tsx","../../src/pages/ReportPage/component/AgeReportPage.tsx","../../src/pages/ReportPage/component/GenderReportPage.tsx","../../src/pages/ReportPage/component/RefferingChannelPage.tsx","../../src/pages/SegmentDashboard/Dashboard.tsx","../../src/pages/SegmentDashboard/SegmentDashboard.tsx","../../src/Auth/OauthSucces.tsx","../../src/pages/ReportPage/component/NewReportTable.tsx","../../src/components/ui/sheet.tsx","../../src/pages/META/Campaign/ColumnManagementSheet.tsx","../../src/pages/ReportPage/component/EcommerceMetricsPage.tsx","../../src/pages/ReportPage/NoGA4AccessPage..tsx","../../src/components/dashboard_component/PlatformModal.tsx","../../src/pages/ReportPage/ConnectPlatformPage.tsx","../../src/pages/ReportPage/component/DaywiseMetricsPage.tsx","../../src/pages/ReportPage/ReportsPage.tsx","../../src/pages/ConversionReportPage/components/Table.tsx","../../src/pages/ConversionReportPage/components/PerformanceSummary.tsx","../../src/pages/ConversionReportPage/components/ExcelDownload.tsx","../../src/store/slices/ConversionFilterSlice.ts","../../src/pages/ConversionReportPage/components/Filter.tsx","../../src/pages/ConversionReportPage/components/DeviceConversion.tsx","../../src/pages/ConversionReportPage/components/GenderConversion.tsx","../../src/pages/ConversionReportPage/components/AgeConversion.tsx","../../src/pages/ConversionReportPage/components/InterestConversion.tsx","../../src/pages/ConversionReportPage/components/OperatingSystemConversion.tsx","../../src/pages/ConversionReportPage/components/BrowserConversion.tsx","../../src/pages/ConversionReportPage/components/SourceConversion.tsx","../../src/pages/ConversionReportPage/AudienceConversionReportPage.tsx","../../src/pages/ConversionReportPage/components/CityConversion.tsx","../../src/pages/ConversionReportPage/components/ChannelConversion.tsx","../../src/pages/ConversionReportPage/components/RegionConversion.tsx","../../src/pages/ConversionReportPage/components/LandingPageConversion.tsx","../../src/pages/ConversionReportPage/components/CampaignConversion.tsx","../../src/pages/ConversionReportPage/components/PagePathConversion.tsx","../../src/pages/ConversionReportPage/components/PageTitleConversion.tsx","../../src/pages/ConversionReportPage/components/CountryConversion.tsx","../../src/pages/ConversionReportPage/WebsiteConversionReportPage.tsx","../../src/pages/GoogleAdsHub/components/SearchTerm.tsx","../../src/pages/GoogleAdsHub/components/Age.tsx","../../src/pages/GoogleAdsHub/components/Gender.tsx","../../src/pages/GoogleAdsHub/components/Keyword.tsx","../../src/pages/GoogleAdsHub/components/Product.tsx","../../src/pages/GoogleAdsHub/Dashboard.tsx","../../src/pages/FbReports/component/AudienceFbReport.tsx","../../src/pages/FbReports/component/PlacementFbReport.tsx","../../src/pages/FbReports/component/PlatformFbReport.tsx","../../src/pages/FbReports/component/CountryFbReport.tsx","../../src/pages/FbReports/component/DeviceFbReport.tsx","../../src/pages/FbReports/component/GenderFbReport.tsx","../../src/pages/FbReports/component/AgeFbReport.tsx","../../src/pages/FbReports/FbReportPage.tsx","../../src/store/slices/CampaignGroupSlice.ts","../../src/store/slices/campaignLabelsSlice.ts","../../src/store/index.ts","../../src/pages/META/AdAccount/MetaDashboard.tsx","../../src/components/ui/badge.tsx","../../src/pages/META/Campaign/MetaCampaignTable.tsx","../../src/pages/META/Campaign/CampaignDashboard.tsx","../../src/pages/Pricing/Pricing.tsx","../../src/pages/Profile Page/ProfilePage.tsx","../../src/components/Tutorial/TutorialManager.tsx","../../src/components/Tutorial/TutorialDriver.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect, ReactNode } from 'react';\r\n\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n  brands: string[];\r\n  hasSeenLandingSlides?: boolean;\r\n}\r\n\r\ninterface UserContextType {\r\n  user: User | null;\r\n  setUser: (user: User | null) => void;\r\n  showLandingPopup: boolean;\r\n  setShowLandingPopup: (show: boolean) => void;\r\n}\r\n\r\nconst UserContext = createContext<UserContextType | undefined>(undefined);\r\n\r\nexport const UserProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    return storedUser ? JSON.parse(storedUser) : null;\r\n  });\r\n\r\n  const [showLandingPopup, setShowLandingPopup] = useState(() => {\r\n    if (!user) return false;\r\n    // Only show landing popup if user has no brands\r\n    return !user.hasSeenLandingSlides && (!user.brands || user.brands.length === 0);\r\n  });\r\n\r\n  // Sync localStorage whenever user data changes\r\n  useEffect(() => {\r\n    if (user) {\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n    } else {\r\n      localStorage.removeItem('user');\r\n    }\r\n  }, [user]);\r\n\r\n  // Show landing popup when user logs in and hasn't seen it\r\n  useEffect(() => {\r\n    if (user && !user.hasSeenLandingSlides && (!user.brands || user.brands.length === 0)) {\r\n      setShowLandingPopup(true);\r\n    }\r\n  }, [user]);\r\n\r\n  const updateUser = (newUser: User | null) => {\r\n    if (newUser && !newUser.hasSeenLandingSlides && (!newUser.brands || newUser.brands.length === 0)) {\r\n      setShowLandingPopup(true);\r\n    }\r\n    setUser(newUser);\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={{ \r\n      user, \r\n      setUser: updateUser,\r\n      showLandingPopup,\r\n      setShowLandingPopup\r\n    }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useUser = () => {\r\n  const context = useContext(UserContext);\r\n  if (context === undefined) {\r\n    throw new Error('useUser must be used within a UserProvider');\r\n  }\r\n  return context;\r\n};\r\n","import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n  brands: string[];\r\n  isClient: boolean;\r\n  isAdmin: boolean;\r\n  metgod: string;\r\n  loginCount: number;\r\n}\r\n\r\ninterface UserState {\r\n  user: User | null;\r\n}\r\n\r\nconst initialState: UserState = {\r\n  user: null,\r\n};\r\n\r\nconst userSlice = createSlice({\r\n  name: \"user\",\r\n  initialState,\r\n  reducers: {\r\n    setUser: (state, action: PayloadAction<User | null>) => {\r\n      state.user = action.payload;\r\n    },\r\n\r\n    clearUser: (state) => {\r\n      state.user = null;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setUser, clearUser } = userSlice.actions;\r\nexport default userSlice.reducer;\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { Eye, EyeOff, Mail, Lock, User } from 'lucide-react'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Label } from '@/components/ui/label'\r\nimport { useToast } from \"../hooks/use-toast\"\r\nimport { FcGoogle } from \"react-icons/fc\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '@/store'\r\nimport { setUser } from '@/store/slices/UserSlice'\r\n\r\nexport default function AuthForm() {\r\n  const [isLogin, setIsLogin] = useState(true)\r\n  const [username, setUsername] = useState('')\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const { toast } = useToast()\r\n  const navigate = useNavigate()\r\n  const [errors, setErrors] = useState({ username: '', email: '', password: '' })\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      navigate('/dashboard');\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  const toggleForm = () => setIsLogin(!isLogin)\r\n\r\n  const validateForm = () => {\r\n    const newErrors = { username: '', email: '', password: '' }\r\n    let isValid = true\r\n\r\n    if (!isLogin && !username.trim()) {\r\n      newErrors.username = 'Username is required'\r\n      isValid = false\r\n    }\r\n\r\n    if (!email.trim()) {\r\n      newErrors.email = 'Email is required'\r\n      isValid = false\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(email)) {\r\n      newErrors.email = 'Email is invalid'\r\n      isValid = false\r\n    }\r\n\r\n    if (!password) {\r\n      newErrors.password = 'Password is required'\r\n      isValid = false\r\n    } else if (password.length < 8) {\r\n      newErrors.password = 'Password must be at least 8 characters'\r\n      isValid = false\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return isValid\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let response;\r\n      // Determine the base URL based on the environment\r\n      const baseURL = import.meta.env.PROD\r\n        ? import.meta.env.VITE_API_URL\r\n        : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n      if (isLogin) {\r\n        response = await axios.post(\r\n          `${baseURL}/api/auth/login/normal`,\r\n          { email, password },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.data.success) {\r\n          // Set the user in the context with hasSeenLandingSlides flag\r\n          const userData = {\r\n            ...response.data.user,\r\n            // Only set hasSeenLandingSlides to false if the user has no brands\r\n            hasSeenLandingSlides: response.data.user.brands && response.data.user.brands.length > 0 \r\n          };\r\n          dispatch(setUser(userData))\r\n          // Only show landing popup if user has no brands\r\n          // setShowLandingPopup(!(response.data.user.brands && response.data.user.brands.length > 0));\r\n\r\n          toast({\r\n            title: 'Login successful!',\r\n            description: 'Welcome! Redirecting to your dashboard.',\r\n            variant: 'default',\r\n          });\r\n          navigate('/dashboard');\r\n        }\r\n      } else {\r\n        response = await axios.post(\r\n          `${baseURL}/api/auth/signup`,\r\n          { username, email, password },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.data.success) {\r\n          toast({\r\n            title: 'Registration successful!',\r\n            description: 'Please log in with your new account.',\r\n            variant: 'default',\r\n          });\r\n          setIsLogin(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      if (axios.isAxiosError(error) && error.response) {\r\n        toast({\r\n          title: 'Error',\r\n          description: error.response.data.message || 'An error occurred',\r\n          variant: 'destructive',\r\n        });\r\n      } else {\r\n        toast({\r\n          title: 'Unexpected Error',\r\n          description: 'An unexpected error occurred',\r\n          variant: 'destructive',\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleGoogleLogin = async () => {\r\n    try {\r\n      const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n      const response = await axios.get(`${baseURL}/api/auth/google?context=userLogin`);\r\n      const { authUrl } = response.data;\r\n\r\n      window.location.href = authUrl;\r\n    } catch (error) {\r\n      console.error('Error getting Google Auth URL:', error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <div className=\"hidden md:flex md:w-1/2 bg-cover bg-center\" style={{ backgroundImage: \"url('https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2015&q=80')\" }}>\r\n        <div className=\"flex items-center justify-center w-full h-full bg-black bg-opacity-40\">\r\n          <div className=\"text-white text-center p-8\">\r\n            <h3 className=\"text-4xl font-bold mb-6\">Unified Marketing Analytics</h3>\r\n            <p className=\"text-xl\">View your Shopify, Facebook, and Google Ads data all in one place.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"w-full md:w-1/2 flex items-center justify-center bg-gradient-to-br from-blue-50 to-white p-8\">\r\n        <div className=\"w-full max-w-md\">\r\n          <h2 className=\"text-3xl font-bold mb-3\">\r\n            {isLogin ? 'Welcome Back' : 'Create an Account'}\r\n          </h2>\r\n          <p className=\"mb-8\">\r\n            {isLogin\r\n              ? 'Sign in to access your marketing dashboard'\r\n              : 'Join us to view all your marketing data in one place'}\r\n          </p>\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {!isLogin && (\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"username\" >Username</Label>\r\n                <div className=\"relative\">\r\n                  <User className=\"absolute left-3 top-3 h-5 w-5\" />\r\n                  <Input\r\n                    id=\"username\"\r\n                    type=\"text\"\r\n                    value={username}\r\n                    onChange={(e) => setUsername(e.target.value)}\r\n                    placeholder=\"Enter your username\"\r\n                    required={!isLogin}\r\n                    className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n                {errors.username && <p className=\"text-red-500 text-sm\">{errors.username}</p>}\r\n              </div>\r\n            )}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\" >Email</Label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-3 top-3 h-5 w-5\" />\r\n                <Input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"Enter your email\"\r\n                  required\r\n                  className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n              {errors.email && <p className=\"text-red-500 text-sm\">{errors.email}</p>}\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"password\">Password</Label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-3 h-5 w-5\" />\r\n                <Input\r\n                  id=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Enter your password\"\r\n                  required\r\n                  className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-3 \"\r\n                >\r\n                  {showPassword ? <Eye className=\"h-5 w-5\" /> : <EyeOff className=\"h-5 w-5\" />}\r\n                </button>\r\n              </div>\r\n              {errors.password && <p className=\"text-red-500 text-sm\">{errors.password}</p>}\r\n            </div>\r\n            <Button type=\"submit\" className=\"w-full text-white\">\r\n              {isLogin ? 'Sign In' : 'Sign Up'}\r\n            </Button>\r\n          </form>\r\n          <div className=\"mt-6\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"w-full flex items-center justify-center space-x-2\"\r\n              onClick={handleGoogleLogin}\r\n            >\r\n              <FcGoogle className=\"h-5 w-5\" />\r\n              <span>Continue with Google</span>\r\n            </Button>\r\n          </div>\r\n          <p className=\"mt-6 text-center text-sm\">\r\n            {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n            <button onClick={toggleForm} className=\"font-semibold hover:underline\">\r\n              {isLogin ? 'Sign Up' : 'Sign In'}\r\n            </button>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import * as React from \"react\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <Cross2Icon className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold [&+div]:text-xs\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface Brand {\r\n  _id: string;\r\n  name: string;\r\n  brandId: string;\r\n  fbAdAccounts?: [];\r\n  googleAdAccount?: {[key: string]: string};\r\n  ga4Account?: { [key: string]: string };\r\n  shopifyAccount: {[key: string]: string };\r\n}\r\n\r\ninterface BrandState {\r\n  selectedBrandId: string | null;\r\n  brands: Brand[];\r\n}\r\n\r\nconst initialState: BrandState = {\r\n  selectedBrandId: null,\r\n  brands: [],\r\n};\r\n\r\nconst brandSlice = createSlice({\r\n  name: 'brand',\r\n  initialState,\r\n  reducers: {\r\n    setSelectedBrandId: (state, action: PayloadAction<string | null>) => {\r\n      state.selectedBrandId = action.payload;\r\n    },\r\n    setBrands: (state, action: PayloadAction<Brand[]>) => {\r\n      state.brands = action.payload;\r\n    },\r\n    resetBrand: (state) => {\r\n      state.selectedBrandId = null;\r\n      state.brands = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setSelectedBrandId, setBrands, resetBrand } = brandSlice.actions;\r\nexport default brandSlice.reducer;\r\n","import * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","export default \"__VITE_ASSET__BTkxAs8a__\"","import * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n","import { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { ChevronUp, ChevronDown, ChevronLeft, ChevronRight, Compass, Blend, LogOut, User2Icon, Radar, Store, ShoppingCart, CalendarRange, LineChart, Target } from 'lucide-react';\r\nimport React from 'react';\r\nimport { NavLink, useLocation, useNavigate } from 'react-router-dom';\r\nimport { setSelectedBrandId, setBrands, resetBrand } from \"@/store/slices/BrandSlice.ts\";\r\nimport axios from 'axios';\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\nimport Logo from \"@/assets/messold-icon.png\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { FaMeta } from \"react-icons/fa6\";\r\nimport { SiGoogleads } from \"react-icons/si\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from \"../../store/index.ts\";\r\nimport { clearUser } from '@/store/slices/UserSlice.ts';\r\n\r\n\r\nexport interface Brand {\r\n    _id: string;\r\n    name: string;\r\n    fbAdAccounts?: string[];\r\n    googleAdAccount?: string;\r\n    ga4Account?: { string: string };\r\n}\r\nexport default function CollapsibleSidebar() {\r\n    const [isExpanded, setIsExpanded] = useState(true);\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const sidebarRef = useRef<HTMLDivElement>(null);\r\n    const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n    const dispatch = useDispatch();\r\n    const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId);\r\n    const brands = useSelector((state: RootState) => state.brand.brands);\r\n    const user = useSelector((state: RootState) => state.user.user);\r\n\r\n    // Fetch brands\r\n    const fetchBrands = useCallback(async () => {\r\n        try {\r\n            if (!user?.brands || user.brands.length === 0) {\r\n                console.warn('No brand IDs found in user context.');\r\n                return;\r\n            }\r\n\r\n            const response = await axios.post(\r\n                `${baseURL}/api/brands/filter`,\r\n                { brandIds: user.brands },\r\n                { withCredentials: true }\r\n            );\r\n\r\n            dispatch(setBrands(response.data));\r\n\r\n            if (!selectedBrandId && response.data.length > 0) {\r\n                dispatch(setSelectedBrandId(response.data[0]._id));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching brands:', error);\r\n        }\r\n    }, [user?.brands]); // Only depends on user.brands and baseURL\r\n\r\n    useEffect(() => {\r\n        fetchBrands();\r\n    }, [fetchBrands]); // Will only run when user.brands changes\r\n\r\n\r\n    const toggleSidebar = () => setIsExpanded(prev => !prev);\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            const response = await axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true });\r\n            if (response.status === 200) {\r\n                dispatch(clearUser());\r\n                dispatch(resetBrand());\r\n                navigate('/');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error logging out:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const pathParts = location.pathname.split('/');\r\n        if (pathParts[2]) {\r\n            setSelectedBrandId(pathParts[2]);\r\n        }\r\n    }, [location.pathname, setSelectedBrandId]);\r\n\r\n    // Define base dashboards that all users can see\r\n    const dashboards = [\r\n        { name: \"Business Overview\", path: `/dashboard`, icon: <Blend size={20} /> },\r\n        { name: \"Marketing Insights Tracker\", path: `/ad-metrics/${selectedBrandId}`, icon: <CalendarRange size={20} /> },\r\n        { name: \"E-Commerce Insights\", path: `/ecommerce-reports/${selectedBrandId}`, icon: <ShoppingCart size={20} /> },\r\n        {\r\n            name: \"AdMetrics Hub\", path: `/analytics-dashboard/${selectedBrandId}`, icon: <LineChart size={20} />,\r\n            subItems: [{\r\n                name: \"Meta Insights\", path: `/#`, icon: <FaMeta size={20} />,\r\n                subItems: [\r\n                    {\r\n                        name: \"Adaccount Summary\",\r\n                        path: `/adaccount-summary/${selectedBrandId}`\r\n                    },\r\n                    {\r\n                        name: \"Meta Campaigns\",\r\n                        path: `/meta-campaigns/${selectedBrandId}`\r\n                    },\r\n                    {\r\n                        name: \"Meta Reports\",\r\n                        path: `/meta-reports/${selectedBrandId}`\r\n                    }\r\n                ]\r\n            },\r\n            { name: \"Google Ads Reports\", path: `/google-ads-hub/${selectedBrandId}`, icon: <SiGoogleads size={18} /> },\r\n\r\n            ]\r\n        },\r\n        {\r\n            name: \"Conversion Radar\", path: `/#`, icon: <Radar size={20} />,\r\n            subItems: [\r\n                {\r\n                    name: \"Audience & Traffic Sources\",\r\n                    path: `/conversion-reports/${selectedBrandId}/demographics`\r\n                },\r\n                {\r\n                    name: \"Camapign and Website Performance\",\r\n                    path: `/conversion-reports/${selectedBrandId}/performance`\r\n                }\r\n            ]\r\n        },\r\n\r\n\r\n    ];\r\n\r\n    // Add Segment Scope only if user is admin\r\n    const allDashboards = user?.isAdmin\r\n        ? [...dashboards, { name: \"Segment Scope\", path: `/segment-dashboard/${selectedBrandId}`, icon: <Compass size={20} /> },\r\n            { name: \"Brands Targets\", path: `/performance-metrics`, icon: <Target size={20} /> }\r\n        ]\r\n        : dashboards;\r\n\r\n    const isItemDisabled = (item: any) => {\r\n        if (!selectedBrandId) return true;\r\n\r\n        const currentBrand = brands.find(b => b._id === selectedBrandId);\r\n        if (\r\n            (item.name === 'Analytics Dashboard' || item.name === 'Campaign Metrics') &&\r\n            (!currentBrand?.fbAdAccounts && !currentBrand?.googleAdAccount)\r\n        ) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    // Create a recursive component to handle rendering sidebar items at any level\r\n    const renderSidebarItems = (items: any[], isTopLevel = true) => {\r\n        return items.map((item, index) => {\r\n            const hasValidPath = item.path && item.path !== '/#';\r\n\r\n            if (isTopLevel) {\r\n                // Top level dashboard items\r\n                return (\r\n                    <SidebarItem\r\n                        key={index}\r\n                        icon={item.icon}\r\n                        text={item.name}\r\n                        isExpanded={isExpanded}\r\n                        isSelected={hasValidPath && location.pathname.startsWith(item.path)}\r\n                        tooltipContent={`${item.name}${isItemDisabled(item) ? ' (No Analytics data available)' : ''}`}\r\n                        onClick={() => {\r\n                            // If it has a valid path, navigate\r\n                            if (!isItemDisabled(item) && hasValidPath) {\r\n                                navigate(item.path);\r\n                            }\r\n                            // Note: The toggling of subitems is handled internally by SidebarItem\r\n                        }}\r\n                        disabled={isItemDisabled(item)}\r\n                        openIcon={item.subItems ? <ChevronUp /> : undefined}\r\n                        closeIcon={item.subItems ? <ChevronDown /> : undefined}\r\n                        // Force the item to be treated as a toggle-only item if it has subitems but no valid path\r\n                        autoOpenOnSelect={true}\r\n                    >\r\n                        {item.subItems && renderSidebarItems(item.subItems, false)}\r\n                    </SidebarItem>\r\n                );\r\n            } else {\r\n                // Nested items (can themselves have more subitems)\r\n                return (\r\n                    <SidebarChild\r\n                        key={index}\r\n                        path={item.path}\r\n                        text={item.name}\r\n                        onClick={() => {\r\n                            // Only navigate if it has a valid path\r\n                            if (hasValidPath) {\r\n                                navigate(item.path);\r\n                            }\r\n                            // The toggle functionality is handled inside SidebarChild\r\n                        }}\r\n                        isSelected={hasValidPath && location.pathname === item.path}\r\n                    >\r\n                        {item.subItems && renderSidebarItems(item.subItems, false)}\r\n                    </SidebarChild>\r\n                );\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n\r\n\r\n    return (\r\n        <TooltipProvider>\r\n            <div ref={sidebarRef} className={`bg-[rgb(4,16,33)] text-white transition-all duration-500 ease-in-out flex flex-col ${isExpanded ? 'w-64' : 'w-16'}`} style={{ height: '100vh' }}>\r\n                <div className={`flex justify-between items-center p-4 relative`}>\r\n                    <div className=\"flex items-center cursor-pointer\" onClick={() => navigate('/dashboard')}>\r\n                        <img src={Logo} alt=\"Messold Logo\" className=\"h-8 w-8\" />\r\n                        {isExpanded ? <span className=\"text-sm ml-2\">Messold</span> : null}\r\n                    </div>\r\n                    <span\r\n                        className={`transition-all duration-300 ease-in-out bg-[rgb(4,16,33)] rounded-full flex items-center justify-center`}\r\n                        style={{\r\n                            width: '25px',\r\n                            height: '25px',\r\n                            position: 'absolute',\r\n                            right: '-10px',\r\n                            top: '50%',\r\n                            transform: 'translateY(-50%)',\r\n                            zIndex: 50,\r\n                        }}\r\n                        onClick={toggleSidebar}\r\n                    >\r\n                        {isExpanded ? <ChevronLeft size={15} /> : <ChevronRight size={15} />}\r\n                    </span>\r\n                </div>\r\n\r\n                <div className={`flex-1 overflow-y-auto ${isExpanded ? 'h-[calc(100vh-64px)]' : 'h-[calc(100vh-16px)]'}`}>\r\n                    <ScrollArea className=\"h-full\">\r\n                 <nav className=\"mt-3\">\r\n                            <SidebarItem\r\n                                icon={<Store size={24} />}\r\n                                text={selectedBrandId ? brands.find(b => b._id === selectedBrandId)?.name.replace(/_/g, ' ') || \"Unknown Brand\" : \"Your Brands\"}\r\n                                isExpanded={isExpanded}\r\n                                openIcon={<ChevronUp />}\r\n                                closeIcon={<ChevronDown />}\r\n                                isSelected={!!selectedBrandId}\r\n                                tooltipContent=\"Your Brands\"\r\n                                autoOpenOnSelect={false}\r\n                            >\r\n                                {brands.map(brand => (\r\n                                    <SidebarChild\r\n                                        key={brand._id}\r\n                                        path={`/dashboard`}\r\n                                        text={brand.name.replace(/_/g, ' ')}\r\n                                        onClick={() => {\r\n                                            dispatch(setSelectedBrandId(brand._id));\r\n                                            navigate(`/dashboard`);\r\n                                        }}\r\n                                        isSelected={selectedBrandId === brand._id}\r\n                                    />\r\n                                ))}\r\n                            </SidebarItem>\r\n\r\n\r\n                            {renderSidebarItems(allDashboards)}\r\n                        </nav>\r\n                    </ScrollArea>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col\">\r\n                    <UserProfile isExpanded={isExpanded} user={user} />\r\n                    <LogoutButton handleLogout={handleLogout} isExpanded={isExpanded} />\r\n                </div>\r\n            </div>\r\n        </TooltipProvider>\r\n    );\r\n}\r\n\r\nfunction SidebarChild({\r\n    path,\r\n    text,\r\n    onClick,\r\n    disabled = false,\r\n    isSelected = false,\r\n    children,\r\n}: {\r\n    path: string;\r\n    text: string;\r\n    onClick?: () => void;\r\n    disabled?: boolean;\r\n    isSelected?: boolean;\r\n    children?: React.ReactNode;\r\n}): JSX.Element {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const hasChildren = React.Children.count(children) > 0;\r\n\r\n    const handleToggle = () => {\r\n        if (hasChildren) {\r\n            setIsOpen(prev => !prev);\r\n        }\r\n    };\r\n\r\n    const isChildSelected = React.Children.toArray(children).some(\r\n        (child: any) => child?.props?.isSelected\r\n    );\r\n    const isActive = isSelected || isChildSelected;\r\n\r\n    useEffect(() => {\r\n        if (isActive) {\r\n            setIsOpen(true);\r\n        }\r\n    }, [isActive]);\r\n\r\n    const baseClasses = `flex items-center text-xs w-full p-2.5 transition-colors duration-200 \r\n      ${isActive ? 'text-white font-semibold relative bg-gray-800' : 'text-gray-100'} \r\n      ${disabled ? 'cursor-not-allowed text-gray-400' : 'hover:bg-gray-700'}`;\r\n\r\n    const content = (\r\n        <>\r\n            <div className=\"flex items-center justify-between w-full\">\r\n                <span>{text}</span>\r\n                {hasChildren && (\r\n                    <span className=\"ml-2\">{isOpen ? <ChevronUp /> : <ChevronDown />}</span>\r\n                )}\r\n            </div>\r\n            {isActive && <div className=\"absolute left-0 top-0 w-1 h-full bg-white\" />}\r\n        </>\r\n    );\r\n\r\n    const childItem = disabled ? (\r\n        <div className={baseClasses}>\r\n            {content}\r\n        </div>\r\n    ) : (\r\n        <NavLink\r\n            to={path}\r\n            className={baseClasses}\r\n            onClick={(e) => {\r\n                // Stop default navigation for items that are just containers\r\n                if (path === '/#' || !path) {\r\n                    e.preventDefault();\r\n                }\r\n\r\n                // Always toggle if there are children\r\n                if (hasChildren) {\r\n                    handleToggle();\r\n                }\r\n\r\n                // External onClick handler\r\n                if (onClick) {\r\n                    onClick();\r\n                }\r\n            }}\r\n        >\r\n            {content}\r\n        </NavLink>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            {childItem}\r\n            {isOpen && hasChildren && (\r\n                <div className=\"relative pl-4\">\r\n                    <div className=\"absolute top-0 left-4 w-1 h-full bg-gray-500\" />\r\n                    {children}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction SidebarItem({\r\n    icon,\r\n    text,\r\n    isExpanded,\r\n    openIcon,\r\n    closeIcon,\r\n    children,\r\n    isSelected,\r\n    tooltipContent,\r\n    onClick,\r\n    disabled,\r\n    autoOpenOnSelect = true\r\n}: {\r\n    icon?: React.ReactNode;\r\n    text: string;\r\n    isExpanded: boolean;\r\n    openIcon?: React.ReactNode;\r\n    closeIcon?: React.ReactNode;\r\n    children?: React.ReactNode;\r\n    isSelected: boolean;\r\n    tooltipContent: string;\r\n    onClick?: () => void;\r\n    disabled?: boolean;\r\n    autoOpenOnSelect?: boolean;\r\n}) {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const hasChildren = React.Children.count(children) > 0;\r\n\r\n    const handleToggle = () => {\r\n        if (hasChildren) {\r\n            setIsOpen(prev => !prev);\r\n        }\r\n    };\r\n\r\n    // Enhanced recursive check for nested selections\r\n    const isChildSelected = React.Children.toArray(children).some(\r\n        (child: any) => {\r\n            if (child?.props?.isSelected) return true;\r\n            // Check if any of this child's children are selected\r\n            if (child?.props?.children) {\r\n                return React.Children.toArray(child.props.children).some(\r\n                    (grandchild: any) => grandchild?.props?.isSelected\r\n                );\r\n            }\r\n            return false;\r\n        }\r\n    );\r\n\r\n    const isActive = isSelected || isChildSelected;\r\n\r\n    useEffect(() => {\r\n        if (autoOpenOnSelect && isActive) {\r\n            setIsOpen(true);\r\n        }\r\n    }, [isActive, autoOpenOnSelect]);\r\n\r\n    const content = (\r\n        <div\r\n            onClick={() => {\r\n                // Always toggle if it has children\r\n                if (hasChildren) {\r\n                    handleToggle();\r\n                }\r\n\r\n                // Then handle navigation via onClick if provided\r\n                if (!disabled && onClick) {\r\n                    onClick();\r\n                }\r\n            }}\r\n            className={`flex items-center px-4 py-2 mb-2 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer ${isActive ? 'text-white font-semibold relative' : 'text-gray-100'\r\n                } ${disabled ? 'cursor-not-allowed opacity-50' : ''}`}\r\n        >\r\n            <span className=\"mr-2\">{icon}</span>\r\n            {isExpanded && <span className=\"text-xs\">{text}</span>}\r\n            {isExpanded && <span className=\"ml-auto\">{isOpen ? openIcon : closeIcon}</span>}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            {!isExpanded ? (\r\n                <Tooltip>\r\n                    <TooltipTrigger asChild>{content}</TooltipTrigger>\r\n                    <TooltipContent side=\"right\">\r\n                        <p className={React.Children.count(children) > 0 ? 'mb-4' : ''}>\r\n                            {tooltipContent}\r\n                        </p>\r\n                        {React.Children.map(children, (child) => (\r\n                            <div className=\"relative\">\r\n                                <div className=\"absolute top-0 w-1 h-full bg-gray-500\" />\r\n                                {child}\r\n                            </div>\r\n                        ))}\r\n                    </TooltipContent>\r\n                </Tooltip>\r\n            ) : (\r\n                content\r\n            )}\r\n            {isOpen && isExpanded && (\r\n                <div className=\"relative pl-8\">\r\n                    <div className=\"absolute top-0 w-1 h-full bg-gray-500\" />\r\n                    {React.Children.map(children, (child) => (\r\n                        <div>{child}</div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction UserProfile({ isExpanded, user }: { isExpanded: boolean; user: any }) {\r\n    const navigate = useNavigate();\r\n    const userProfileContent = (\r\n        <div onClick={() => navigate(\"/profile\")} className={'flex items-center gap-4 px-4 py-2 mb-2 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer'}>\r\n            <span className=\"text-gray-300 hover:text-white\">\r\n                <User2Icon size={24} />\r\n            </span>\r\n            {isExpanded && <span className=\"text-sm mr-2\">{user?.username || 'user'}</span>}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            {!isExpanded ? (\r\n                <Tooltip>\r\n                    <TooltipTrigger asChild>\r\n                        {userProfileContent}\r\n                    </TooltipTrigger>\r\n                    <TooltipContent side=\"right\">\r\n                        <p>{user?.username || 'user'}</p>\r\n                    </TooltipContent>\r\n                </Tooltip>\r\n            ) : (\r\n                userProfileContent\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction LogoutButton({ handleLogout, isExpanded }: { handleLogout: () => void; isExpanded: boolean }) {\r\n    const logoutContent = (\r\n        <div onClick={handleLogout} className={'flex items-center gap-4 px-4 py-2 mb-2 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer'}>\r\n            <span className=\"text-gray-300 hover:text-white\">\r\n                <LogOut size={24} />\r\n            </span>\r\n            {isExpanded && <span className=\"hidden sm:inline\">Logout</span>}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            {!isExpanded ? (\r\n                <Tooltip>\r\n                    <TooltipTrigger asChild>\r\n                        {logoutContent}\r\n                    </TooltipTrigger>\r\n                    <TooltipContent side=\"right\">\r\n                        <p>Logout</p>\r\n                    </TooltipContent>\r\n                </Tooltip>\r\n            ) : (\r\n                logoutContent\r\n            )}\r\n        </div>\r\n    );\r\n}","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border bg-card text-card-foreground shadow\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-3\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-4 pt-3\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n","import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","// AdAccountMetrics.js\r\nimport React from 'react';\r\nimport { Card, CardHeader, CardContent } from \"@/components/ui/card\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {  HelpCircle } from 'lucide-react';\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\r\nimport { Campaign, GoogleCampaign } from '../Dashboard/interfaces';\r\n\r\n\r\n// Define the type for each metric\r\nexport interface Metric {\r\n  label: string;\r\n  value: string | number;\r\n  tooltipContent?: string\r\n\r\n}\r\n\r\n// Define the props for the AdAccountMetrics component\r\ninterface AdAccountMetricsProps {\r\n  title?: string;\r\n  metrics: Metric[];\r\n  date: DateRange;\r\n  isLoading: boolean;\r\n  icon?: 'Facebook' | 'Google' | '';\r\n  tooltipContent?: string\r\n  errorMessage?: string;\r\n}\r\n\r\nexport interface DateRange {\r\n  from?: Date;\r\n  to?: Date;\r\n}\r\n\r\ninterface MetricCardProps extends Metric {\r\n  date: DateRange;\r\n  icon?: 'Facebook' | 'Google' | ''\r\n\r\n}\r\ninterface LogoProps {\r\n  width?: string | number;\r\n  height?: string | number;\r\n}\r\n\r\nexport const FacebookLogo: React.FC<LogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n  <svg style={{ height, width }}fill=\"#1877F2\" viewBox=\"0 0 24 24\">\r\n  <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n</svg>\r\n);\r\n\r\nexport const GoogleLogo: React.FC<LogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n  <svg viewBox=\"0 0 24 24\" style={{ height, width }}>\r\n  <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n  <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n  <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n</svg>\r\n)\r\n\r\n\r\nconst MetricCardSkeleton: React.FC = () => {\r\n  return (\r\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\r\n      <CardHeader className='flex flex-col items-start justify-start'>\r\n        <div className=\"flex flex-row items-center gap-2\">\r\n          <Skeleton className=\"w-4 h-4 rounded-full\" />\r\n          <Skeleton className=\"h-6 w-24\" />\r\n        </div>\r\n        <Skeleton className=\"h-4 w-32 mt-2\" />\r\n      </CardHeader>\r\n      <CardContent>\r\n        <Skeleton className=\"h-8 w-20 mt-2\" />\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\n\r\n// MetricCard component to render each metric using ShadCN Card\r\nconst MetricCard: React.FC<MetricCardProps> = ({ label, value, date, icon, tooltipContent }) => {\r\n  const formatDate = (dateValue: Date | undefined) => {\r\n    if (!dateValue) return \"\";\r\n    if (typeof dateValue === \"string\") {\r\n      dateValue = new Date(dateValue); // Convert string to Date\r\n    }\r\n    return dateValue.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\r\n  };\r\n\r\n  return (\r\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\r\n      <CardHeader className='flex flex-col items-start justify-start'>\r\n        <div className=\"flex flex-row items-center gap-2\">\r\n          {icon === 'Facebook' ? (\r\n            <FacebookLogo width=\"1rem\" height=\"1rem\" />\r\n          ) : icon === 'Google' ? (\r\n            <GoogleLogo width=\"1rem\" height=\"1rem\" />\r\n          ) : null}\r\n\r\n          <div className=\"text-base font-medium\">{label}</div>\r\n\r\n          {tooltipContent && (\r\n            <TooltipProvider>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button className=\"p-0 m-0\" aria-label={`Info about ${label}`}>\r\n                    <HelpCircle className=\"w-3 h-3 text-gray-400\" />\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent className=\"w-64 p-0 bg-white text-black border shadow-sm\">\r\n                  <div className=\"p-2 font-semibold border-black\">{label}</div>\r\n                  <div className=\"w-full h-[0.5px] bg-black\" />\r\n                  <div className=\"p-2\">{tooltipContent}</div>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </TooltipProvider>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"text-xs text-gray-500 font-bold\">\r\n          {formatDate(date.from)}\r\n          {date.from && date.to ? ' - ' : ''}\r\n          {formatDate(date.to)}\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <p className=\"text-xl lg:text-2xl 2xl:text-3xl font-bold text-cyan-950\">{value}</p>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n};\r\n\r\n\r\nconst AdAccountMetricsCard: React.FC<AdAccountMetricsProps> = ({ title, metrics = [], date, isLoading = false, icon, errorMessage }) => {\r\n  if (errorMessage && !isLoading) {\r\n    return (\r\n      <section className={title ? 'mt-10' : ''}>\r\n        <Card className=\"p-4\">\r\n          <CardHeader><h2 className=\"text-xl font-semibold flex items-center space-x-2\">\r\n            {title && (\r\n              <>\r\n                {icon === 'Facebook' ? (\r\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n                  </svg>\r\n                ) : (\r\n                  <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n                    <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n                    <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n                    <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n                  </svg>\r\n                )}\r\n                <span>{title}</span>\r\n              </>\r\n            )}\r\n          </h2>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"text-red-600 text-sm\">{errorMessage}</p>\r\n          </CardContent>\r\n        </Card>\r\n      </section>\r\n    );\r\n  }\r\n  return (\r\n    <section className={title ? 'mt-10' : ''}>\r\n      <h2 className=\"text-xl font-semibold mb-4 flex items-center space-x-2\">\r\n        {title && (\r\n          <>\r\n            {icon === 'Facebook' ? (\r\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n              </svg>\r\n            ) : (\r\n              <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n                <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n                <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n                <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n              </svg>\r\n            )}\r\n            <span>{title}</span>\r\n          </>\r\n        )}\r\n      </h2>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n        {isLoading\r\n          ? Array(metrics.length).fill(0).map((_, index) => <MetricCardSkeleton key={index} />)\r\n          : metrics.map((metric, index) => (\r\n            <>\r\n              <MetricCard key={index} label={metric.label} value={metric.value} date={date} icon={icon} tooltipContent={metric.tooltipContent} />\r\n            </>\r\n          ))\r\n        }\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default AdAccountMetricsCard;\r\n\r\nexport const CampaignGrid = ({ campaigns, isLoading, icon }: { campaigns: (Campaign | GoogleCampaign)[], isLoading: boolean, icon: string }) => {\r\n  return isLoading ? (\r\n    <div>Loading...</div>\r\n  ) : (\r\n    <Card className=\" p-4 my-4  hover:border hover:border-blue-600\">\r\n      <div className='flex items-center space-x-2 mb-3'>\r\n        {icon === 'Facebook' ? (\r\n          <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n            <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n          </svg>\r\n        ) : (\r\n          <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n            <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n            <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n            <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n          </svg>\r\n        )}\r\n        <h3 className=\"text-lg font-semibold\">Campaign Performance</h3>\r\n      </div>\r\n\r\n      {/* Wrapper for scrolling */}\r\n      <div className=\"overflow-x-auto max-h-[280px] overflow-y-auto\">\r\n        <table className=\"min-w-full table-auto border-collapse bg-white shadow-md rounded-lg\">\r\n          <thead>\r\n            <tr className=\"bg-gray-100 text-left text-sm font-medium text-gray-700 sticky top-0\">\r\n              <th className=\"px-6 py-3\">Campaign Name</th>\r\n              <th className=\"px-6 py-3 text-center\">Spend (₹)</th>\r\n              <th className=\"px-6 py-3 text-center\">ROAS</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {campaigns.map((campaign: Campaign | GoogleCampaign, index) => {\r\n              const spendValue = parseFloat(campaign.spend);\r\n              const roas = typeof campaign.purchase_roas === 'string' ? campaign.purchase_roas : campaign.purchase_roas?.[0]?.value;\r\n              const roasValue = roas ? parseFloat(roas) : null;\r\n\r\n              return (\r\n                <tr\r\n                  key={index}\r\n                  className={`border-t text-sm ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\r\n                    }`}\r\n                >\r\n                  <td className=\"px-6 py-3 line-clamp-2\" title={campaign.campaign_name}>\r\n                    {campaign.campaign_name}\r\n                  </td>\r\n                  <td className=\"px-6 py-3 text-center text-gray-700 font-semibold\">\r\n                  ₹{spendValue.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"px-6 py-3 text-center\">\r\n                    {roasValue !== null ? (\r\n                      <span className=\"inline-flex items-center rounded-full font-medium\">\r\n                        {roasValue.toFixed(2)}\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-gray-500\">N/A</span>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\n\r\ninterface TabProps {\r\n  label: string;\r\n  value: string;\r\n  isActive: boolean;\r\n  onClick: (value: string) => void;\r\n}\r\n\r\nconst Tab: React.FC<TabProps> = ({ label, value, isActive, onClick }) => (\r\n  <button\r\n    className={`px-6 py-2 text-sm font-bold transition-colors duration-200 ${\r\n      isActive\r\n        ? ' text-blue-500' \r\n        : 'text-gray-600 hover:text-gray-900'\r\n    }`}\r\n    onClick={() => onClick(value)}\r\n  >\r\n    {label}\r\n  </button>\r\n);\r\n\r\ninterface CustomTabsProps {\r\n  tabs: { label: string; value: string }[];\r\n  activeTab: string;\r\n  onTabChange: (value: string) => void;\r\n}\r\n\r\nexport const CustomTabs: React.FC<CustomTabsProps> = ({ tabs, activeTab, onTabChange }) => {\r\n  return (\r\n    <div className=\"flex justify-center items-center border-b border-gray-200\">\r\n      {tabs.map((tab) => (\r\n        <Tab\r\n          key={tab.value}\r\n          label={tab.label}\r\n          value={tab.value}\r\n          isActive={activeTab === tab.value}\r\n          onClick={onTabChange}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import * as React from \"react\"\r\nimport { ChevronLeftIcon, ChevronRightIcon } from \"@radix-ui/react-icons\"\r\nimport { DayPicker } from \"react-day-picker\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"px-3\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-xs font-medium\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell: \"text-muted-foreground rounded-md w-7 font-normal text-[0.6rem]\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: cn(\r\n          \"relative p-0 text-center text-[0.7rem] focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md\",\r\n          props.mode === \"range\"\r\n            ? \"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md\"\r\n            : \"[&:has([aria-selected])]:rounded-md\",\r\n        ),\r\n        day: cn(buttonVariants({ variant: \"ghost\" }), \"h-7 w-7 p-0 font-normal aria-selected:opacity-100 text-[0.7rem]\"),\r\n        day_range_start: \"day-range-start\",\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\r\n        day_today: \"bg-accent text-accent-foreground\",\r\n        day_outside:\r\n          \"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\r\n        day_disabled: \"text-muted-foreground opacity-50\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\r\n        day_hidden: \"invisible\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: () => <ChevronLeftIcon className=\"h-4 w-4\" />,\r\n        IconRight: () => <ChevronRightIcon className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCalendar.displayName = \"Calendar\"\r\n\r\nexport { Calendar }\r\n","import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverAnchor = PopoverPrimitive.Anchor\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"start\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\r\n","import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { cn } from \"@/lib/utils\"\nimport { CheckIcon } from \"@radix-ui/react-icons\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <CheckIcon className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface DateRange {\r\n  from?: string; // Primary date range start\r\n  to?: string;  // Primary date range end\r\n  compareFrom?: string; // Optional comparison date range start\r\n  compareTo?: string;   // Optional comparison date range end\r\n}\r\n\r\n// Define the initial state with default date range (first day of current month to today)\r\nconst initialState: DateRange = {\r\n  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString(),\r\n  to: new Date().toISOString(),\r\n};\r\n\r\n// Create the Redux slice\r\nconst dateSlice = createSlice({\r\n  name: \"date\",\r\n  initialState,\r\n  reducers: {\r\n    setDate: (state, action: PayloadAction<{\r\n      from?: string; \r\n      to?: string; \r\n      compareFrom?: string; \r\n      compareTo?: string;\r\n    }>) => {\r\n      // Update primary date range\r\n      state.from = action.payload.from;\r\n      state.to = action.payload.to;\r\n\r\n      // Update comparison date range\r\n      state.compareFrom = action.payload.compareFrom;\r\n      state.compareTo = action.payload.compareTo;\r\n    },\r\n    clearDate: (state) => {\r\n      // Reset to initial state\r\n      state.from = undefined;\r\n      state.to = undefined;\r\n      state.compareFrom = undefined;\r\n      state.compareTo = undefined;\r\n    },\r\n  },\r\n});\r\n\r\n// Export actions and reducer\r\nexport const { setDate, clearDate } = dateSlice.actions;\r\nexport default dateSlice.reducer;","import { useState, useMemo, useCallback } from \"react\"\r\nimport { createSelector } from \"@reduxjs/toolkit\"\r\nimport { CalendarIcon } from \"lucide-react\"\r\nimport { addDays, endOfYear, format, startOfYear, subDays, subMonths, subYears, parse } from \"date-fns\"\r\nimport type { DateRange } from \"react-day-picker\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Calendar } from \"@/components/ui/calendar\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { setDate, clearDate } from \"@/store/slices/DateSlice\"\r\nimport type { RootState } from \"@/store\"\r\n\r\ntype DatePickerWithRangeProps = {\r\n  defaultDate?: DateRange\r\n  resetToFirstPage?: () => void\r\n}\r\n\r\n// Memoized selector\r\nconst selectDateRange = createSelector(\r\n  (state: RootState) => state.date.from,\r\n  (state: RootState) => state.date.to,\r\n  (from, to) => ({\r\n    from,\r\n    to,\r\n  }),\r\n)\r\n\r\nexport function DatePickerWithRange({ defaultDate, resetToFirstPage }: DatePickerWithRangeProps) {\r\n  const dispatch = useDispatch()\r\n  const dateRange = useSelector(selectDateRange)\r\n\r\n  // Memoize the initial date\r\n  const initialDate = useMemo(() => {\r\n    if (dateRange) {\r\n      return {\r\n        from: dateRange.from ? new Date(dateRange.from) : undefined,\r\n        to: dateRange.to ? new Date(dateRange.to) : undefined,\r\n      }\r\n    }\r\n    return defaultDate\r\n      ? {\r\n          from: defaultDate.from ? new Date(defaultDate.from) : undefined,\r\n          to: defaultDate.to ? new Date(defaultDate.to) : undefined,\r\n        }\r\n      : undefined\r\n  }, [dateRange, defaultDate])\r\n\r\n  const [tempDate, setTempDate] = useState<DateRange | undefined>(initialDate)\r\n  const [compareDate, setCompareDate] = useState<DateRange | undefined>()\r\n  const [open, setOpen] = useState(false)\r\n  const [selectedPreset, setSelectedPreset] = useState<string | null>(null)\r\n  const [isCompareEnabled, setIsCompareEnabled] = useState(false)\r\n  const [calendarMode, setCalendarMode] = useState<'primary' | 'comparison'>('primary')\r\n\r\n  // Manual date input states\r\n  const [manualFromDate, setManualFromDate] = useState(\r\n    tempDate?.from ? format(tempDate.from, \"yyyy-MM-dd\") : \"\"\r\n  )\r\n  const [manualToDate, setManualToDate] = useState(\r\n    tempDate?.to ? format(tempDate.to, \"yyyy-MM-dd\") : \"\"\r\n  )\r\n  const [manualCompareFromDate, setManualCompareFromDate] = useState(\"\")\r\n  const [manualCompareToDate, setManualCompareToDate] = useState(\"\")\r\n\r\n  // Dates calculation\r\n  const dates = useMemo(() => {\r\n    const today = new Date()\r\n    const daysSinceSunday = today.getDay()\r\n    const startOfThisWeek = subDays(today, daysSinceSunday)\r\n    const endOfThisWeek = addDays(startOfThisWeek, 6)\r\n    const startOfThisMonth = new Date(today.getFullYear(), today.getMonth(), 1)\r\n    const endOfThisMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0)\r\n    const startOfLastWeek = subDays(startOfThisWeek, 7)\r\n    const endOfLastWeek = subDays(startOfThisWeek, 1)\r\n    const quarter = Math.floor(today.getMonth() / 3)\r\n    const startOfThisQuarter = new Date(today.getFullYear(), quarter * 3, 1)\r\n    const endOfThisQuarter = new Date(today.getFullYear(), (quarter + 1) * 3, 0)\r\n\r\n    const lastQuarter = today.getMonth() < 3 ? 3 : Math.floor((today.getMonth() - 3) / 3)\r\n    const lastQuarterYear = today.getMonth() < 3 ? today.getFullYear() - 1 : today.getFullYear()\r\n    const startOfLastQuarter = new Date(lastQuarterYear, lastQuarter * 3, 1)\r\n    const endOfLastQuarter = new Date(lastQuarterYear, (lastQuarter + 1) * 3, 0)\r\n\r\n    return {\r\n      today,\r\n      startOfThisWeek,\r\n      endOfThisWeek,\r\n      startOfThisMonth,\r\n      endOfThisMonth,\r\n      startOfLastWeek,\r\n      endOfLastWeek,\r\n      startOfThisQuarter,\r\n      endOfThisQuarter,\r\n      startOfLastQuarter,\r\n      endOfLastQuarter,\r\n    }\r\n  }, [])\r\n\r\n  // Date parsing utility\r\n  const parseManualDate = useCallback((dateString: string): Date | undefined => {\r\n    try {\r\n      const parsedDate = parse(dateString, \"yyyy-MM-dd\", new Date())\r\n      return !isNaN(parsedDate.getTime()) ? parsedDate : undefined\r\n    } catch {\r\n      return undefined\r\n    }\r\n  }, [])\r\n\r\n  // Handle manual date input for primary range\r\n  const handleManualDateInput = useCallback(() => {\r\n    const fromDate = parseManualDate(manualFromDate)\r\n    const toDate = parseManualDate(manualToDate)\r\n\r\n    if (fromDate && toDate) {\r\n      setTempDate({ from: fromDate, to: toDate })\r\n      setSelectedPreset(null)\r\n    }\r\n  }, [manualFromDate, manualToDate, parseManualDate])\r\n\r\n  // Handle manual date input for compare range\r\n  const handleManualCompareDateInput = useCallback(() => {\r\n    const fromDate = parseManualDate(manualCompareFromDate)\r\n    const toDate = parseManualDate(manualCompareToDate)\r\n\r\n    if (fromDate && toDate) {\r\n      setCompareDate({ from: fromDate, to: toDate })\r\n    }\r\n  }, [manualCompareFromDate, manualCompareToDate, parseManualDate])\r\n\r\n\r\n  // Preset range setter\r\n  const setPresetRange = useCallback((from: Date, to: Date) => {\r\n    if (calendarMode === 'primary') {\r\n      const newRange = { from, to }\r\n      setTempDate(newRange)\r\n      \r\n      // Update manual date inputs \r\n      setManualFromDate(format(from, \"yyyy-MM-dd\"))\r\n      setManualToDate(format(to, \"yyyy-MM-dd\"))\r\n    } else if (calendarMode === 'comparison') {\r\n      const newCompareRange = { from, to }\r\n      setCompareDate(newCompareRange)\r\n      \r\n      // Update comparison manual date inputs\r\n      setManualCompareFromDate(format(from, \"yyyy-MM-dd\"))\r\n      setManualCompareToDate(format(to, \"yyyy-MM-dd\"))\r\n    }\r\n    \r\n    setSelectedPreset(null)\r\n  }, [calendarMode])\r\n\r\n  // Presets\r\n  const presets = useMemo(\r\n    () => [\r\n      { label: \"Today\", fn: () => setPresetRange(dates.today, dates.today) },\r\n      { label: \"Yesterday\", fn: () => setPresetRange(subDays(dates.today, 1), subDays(dates.today, 1)) },\r\n      { label: \"This Week\", fn: () => setPresetRange(dates.startOfThisWeek, dates.endOfThisWeek) },\r\n      { label: \"Last 7 Days\", fn: () => setPresetRange(subDays(dates.today, 6), dates.today) },\r\n      { label: \"Last week\", fn: () => setPresetRange(dates.startOfLastWeek, dates.endOfLastWeek) },\r\n      { label: \"Last 30 Days\", fn: () => setPresetRange(subDays(dates.today, 29), dates.today) },\r\n      { label: \"This Month\", fn: () => setPresetRange(dates.startOfThisMonth, dates.today) },\r\n      { label: \"Last 3 Months\", fn: () => setPresetRange(subMonths(dates.today, 3), dates.today) },\r\n      { label: \"Last 6 Months\", fn: () => setPresetRange(subMonths(dates.today, 6), dates.today) },\r\n      { label: \"This Quarter\", fn: () => setPresetRange(dates.startOfThisQuarter, dates.endOfThisQuarter) },\r\n      { label: \"Last Quarter\", fn: () => setPresetRange(dates.startOfLastQuarter, dates.endOfLastQuarter) },\r\n      { label: \"This Year\", fn: () => setPresetRange(new Date(new Date().getFullYear(), 0, 1), dates.today) },\r\n      { label: \"Last 365 Days\", fn: () => setPresetRange(subDays(dates.today, 365), dates.today) },\r\n      {\r\n        label: \"Last Year\",\r\n        fn: () => setPresetRange(subYears(startOfYear(new Date()), 1), subYears(endOfYear(new Date()), 1)),\r\n      },\r\n    ],\r\n    [dates, setPresetRange],\r\n  )\r\n\r\n  // Calendar select handler\r\n  const handleCalendarSelect = useCallback((range: DateRange | undefined) => {\r\n    if (calendarMode === 'primary') {\r\n      if (range?.from && !range.to) {\r\n        setTempDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to && range.from > range.to) {\r\n        setTempDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to) {\r\n        setTempDate(range)\r\n        // Update manual inputs for range\r\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualToDate(format(range.to, \"yyyy-MM-dd\"))\r\n      } else {\r\n        setTempDate(undefined)\r\n        // Clear manual inputs\r\n        setManualFromDate(\"\")\r\n        setManualToDate(\"\")\r\n      }\r\n      setSelectedPreset(null)\r\n    } else {\r\n      // Comparison date range handling\r\n      if (range?.from && !range.to) {\r\n        setCompareDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualCompareToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to && range.from > range.to) {\r\n        setCompareDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualCompareToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to) {\r\n        setCompareDate(range)\r\n        // Update manual inputs for range\r\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualCompareToDate(format(range.to, \"yyyy-MM-dd\"))\r\n      } else {\r\n        setCompareDate(undefined)\r\n        // Clear manual inputs\r\n        setManualCompareFromDate(\"\")\r\n        setManualCompareToDate(\"\")\r\n      }\r\n    }\r\n  }, [calendarMode])\r\n\r\n  // Date range formatter\r\n  const formatDateRange = useCallback(\r\n    (range: DateRange | undefined) => {\r\n      if (!range) {\r\n        return defaultDate && defaultDate.from && defaultDate.to\r\n          ? `${format(defaultDate.from, \"LLL dd, y\")} - ${format(defaultDate.to, \"LLL dd, y\")}`\r\n          : \"Pick a date\"\r\n      }\r\n      if (range.from) {\r\n        if (range.to) {\r\n          return `${format(range.from, \"LLL dd, y\")} - ${format(range.to, \"LLL dd, y\")}`\r\n        }\r\n        return format(range.from, \"LLL dd, y\")\r\n      }\r\n      return \"Pick a date\"\r\n    },\r\n    [defaultDate],\r\n  )\r\n\r\n  // Clear date range\r\n  const clearDateRange = useCallback(() => {\r\n    setTempDate(undefined)\r\n    setCompareDate(undefined)\r\n    setSelectedPreset(null)\r\n    setIsCompareEnabled(false)\r\n    setManualFromDate(\"\")\r\n    setManualToDate(\"\")\r\n    setManualCompareFromDate(\"\")\r\n    setManualCompareToDate(\"\")\r\n    dispatch(clearDate())\r\n    if (resetToFirstPage) {\r\n      resetToFirstPage()\r\n    }\r\n    setOpen(false)\r\n  }, [dispatch, resetToFirstPage])\r\n\r\n  // Update handler\r\n  const handleUpdate = useCallback(() => {\r\n    if (tempDate) {\r\n      dispatch(\r\n        setDate({\r\n          from: tempDate.from ? tempDate.from.toISOString() : undefined,\r\n          to: tempDate.to ? tempDate.to.toISOString() : undefined,\r\n          compareFrom: isCompareEnabled && compareDate?.from ? compareDate.from.toISOString() : undefined,\r\n          compareTo: isCompareEnabled && compareDate?.to ? compareDate.to.toISOString() : undefined,\r\n        }),\r\n      )\r\n    }\r\n    if (resetToFirstPage) {\r\n      resetToFirstPage()\r\n    }\r\n    setOpen(false)\r\n  }, [dispatch, resetToFirstPage, tempDate, compareDate, isCompareEnabled])\r\n\r\n  return (\r\n    <Popover open={open} onOpenChange={setOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Button\r\n          variant=\"outline\"\r\n          className={cn(\r\n            \"w-[250px] justify-start text-left font-normal\",\r\n            !tempDate && !defaultDate && \"text-muted-foreground\",\r\n            \"hover:bg-muted/50 transition-colors rounded-lg border-muted-foreground/20\"\r\n          )}\r\n        >\r\n          <CalendarIcon className=\"mr-2 h-4 w-4 text-primary\" />\r\n          {formatDateRange(tempDate)}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-auto p-0 max-w-[650px]\" align=\"start\">\r\n        <div className=\"flex flex-col md:flex-row\">\r\n          {/* Preset selection column */}\r\n          <div className=\"border-r p-3 w-full md:w-[150px] overflow-y-auto bg-gradient-to-b from-muted/50 to-muted/10\" style={{ maxHeight: \"400px\" }}>\r\n            <div className=\"space-y-1.5\">\r\n              <h1 className=\"text-sm pb-2 font-medium border-b border-border/50 text-primary\">Presets</h1>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-1 gap-1\">\r\n                {presets.map((preset) => (\r\n                  <Button\r\n                    key={preset.label}\r\n                    size=\"sm\"\r\n                    variant={selectedPreset === preset.label ? \"default\" : \"ghost\"}\r\n                    className={cn(\r\n                      \"w-full justify-start text-xs font-normal h-8 rounded-md\",\r\n                      selectedPreset === preset.label \r\n                        ? \"bg-primary text-primary-foreground\" \r\n                        : \"hover:bg-muted text-muted-foreground hover:text-foreground\",\r\n                    )}\r\n                    onClick={() => {\r\n                      preset.fn()\r\n                      setSelectedPreset(preset.label)\r\n                    }}\r\n                  >\r\n                    {preset.label}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Calendar and input section */}\r\n          <div className=\"p-3 flex-grow\">\r\n            <div className=\"flex items-center space-x-2 mb-3\">\r\n              <Checkbox \r\n                id=\"compare-toggle\"\r\n                checked={isCompareEnabled}\r\n                onCheckedChange={() => setIsCompareEnabled(!isCompareEnabled)}\r\n                className=\"text-primary\"\r\n              />\r\n              <label htmlFor=\"compare-toggle\" className=\"text-sm font-medium\">Compare with another period</label>\r\n            </div>\r\n\r\n            {/* Date Range Inputs */}\r\n            <div className=\"grid gap-3 mb-3\">\r\n              <div className=\"space-y-2\">\r\n                <h2 className=\"text-xs font-medium text-muted-foreground\">Primary Range</h2>\r\n                <div className=\"flex space-x-2\">\r\n                  <div className=\"flex-1 relative\">\r\n                    <Input \r\n                      placeholder=\"YYYY-MM-DD\" \r\n                      value={manualFromDate}\r\n                      onChange={(e) => setManualFromDate(e.target.value)}\r\n                      onBlur={handleManualDateInput}\r\n                      onClick={() => {\r\n                        setCalendarMode('primary')\r\n                      }}\r\n                      className=\"h-8 pl-10 text-xs rounded-md\"\r\n                    />\r\n                    <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">From</span>\r\n                  </div>\r\n                  <div className=\"flex-1 relative\">\r\n                    <Input \r\n                      placeholder=\"YYYY-MM-DD\" \r\n                      value={manualToDate}\r\n                      onChange={(e) => setManualToDate(e.target.value)}\r\n                      onBlur={handleManualDateInput}\r\n                      onClick={() => {\r\n                        setCalendarMode('primary')\r\n                      }}\r\n                      className=\"h-8 pl-10 text-xs rounded-md\"\r\n                    />\r\n                    <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">To</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Compare Date Range Inputs */}\r\n              {isCompareEnabled && (\r\n                <div className=\"space-y-2\">\r\n                  <h2 className=\"text-xs font-medium text-muted-foreground\">Comparison Range</h2>\r\n                  <div className=\"flex space-x-2\">\r\n                    <div className=\"flex-1 relative\">\r\n                      <Input \r\n                        placeholder=\"YYYY-MM-DD\" \r\n                        value={manualCompareFromDate}\r\n                        onChange={(e) => setManualCompareFromDate(e.target.value)}\r\n                        onBlur={handleManualCompareDateInput}\r\n                        onClick={() => {\r\n                          setCalendarMode('comparison')\r\n                        }}\r\n                        className=\"h-8 pl-10 text-xs rounded-md\"\r\n                      />\r\n                      <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">From</span>\r\n                    </div>\r\n                    <div className=\"flex-1 relative\">\r\n                      <Input \r\n                        placeholder=\"YYYY-MM-DD\" \r\n                        value={manualCompareToDate}\r\n                        onChange={(e) => setManualCompareToDate(e.target.value)}\r\n                        onBlur={handleManualCompareDateInput}\r\n                        onClick={() => {\r\n                          setCalendarMode('comparison')\r\n                        }}\r\n                        className=\"h-8 pl-10 text-xs rounded-md\"\r\n                      />\r\n                      <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">To</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n\r\n            {/* Calendar */}\r\n            <div className=\"border rounded-lg p-2 bg-background/80 shadow-sm\">\r\n              <Calendar\r\n                initialFocus\r\n                mode=\"range\"\r\n                defaultMonth={\r\n                  calendarMode === 'primary' \r\n                    ? (tempDate?.from || defaultDate?.from || dates.today)\r\n                    : (compareDate?.from || dates.today)\r\n                }\r\n                selected={calendarMode === 'primary' ? tempDate : compareDate}\r\n                onSelect={handleCalendarSelect}\r\n                numberOfMonths={2}\r\n                disabled={(date) =>\r\n                  date > new Date() || date < new Date(\"2023-01-01\")\r\n                }\r\n                className=\"rounded-md\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Action Buttons */}\r\n        <div className=\"border-t p-2 flex justify-end gap-2 bg-muted/10\">\r\n          <Button \r\n            variant=\"outline\" \r\n            size=\"sm\" \r\n            onClick={clearDateRange}\r\n            className=\"rounded-md h-8 text-xs\"\r\n          >\r\n            Clear\r\n          </Button>\r\n          <Button \r\n            size=\"sm\" \r\n            onClick={handleUpdate}\r\n            className=\"rounded-md h-8 text-xs bg-primary hover:bg-primary/90\"\r\n          >\r\n            Apply\r\n          </Button>\r\n        </div>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n}\r\n\r\n","export interface TutorialStep {\r\n    element: string;\r\n    popover: {\r\n        title: string;\r\n        description: string;\r\n        position?: 'top' | 'bottom' | 'left' | 'right' | 'auto';\r\n    };\r\n}\r\n\r\nexport interface TutorialDefinition {\r\n    id: string;\r\n    title: string;\r\n    description?: string;\r\n    route: string | RegExp;  // The route where this tutorial is applicable\r\n    componentId?: string; // Component identifier (optional)\r\n    steps?: TutorialStep[]; // Steps can be defined here or in the steps map\r\n    relatedTutorials?: string[]; // IDs of tutorials that should run after this one\r\n    priority?: number; // Higher priority tutorials will run first (default: 0)\r\n}\r\n\r\n// List of all available tutorials\r\nexport const availableTutorials: TutorialDefinition[] = [\r\n    {\r\n        id: 'age-conversion-report',\r\n        title: 'Age Conversion Report',\r\n        description: 'Understanding the age conversion report',\r\n        route: /^\\/conversion-reports\\/[a-zA-Z0-9]+\\/demographics$/,\r\n        componentId: 'age-report',\r\n        priority: 10, // Higher priority - will run first\r\n    },\r\n\r\n    // Add more tutorial definitions here\r\n];\r\n\r\n// Map tutorial steps by tutorial ID\r\nexport const tutorialStepsMap: Record<string, TutorialStep[]> = {\r\n    'age-conversion-report': [\r\n        {\r\n            element: '#age-report',\r\n            popover: {\r\n                title: 'Age based Report',\r\n                description: 'Review detailed monthly conversion numbers for each age group here.',\r\n                position: 'top'\r\n            }\r\n        },\r\n        {\r\n            element: '#age-report-performance',\r\n            popover: {\r\n                title: 'Key Performers',\r\n                description: 'These metrics highlight your best and worst performing age segments.',\r\n                position: 'left'\r\n            }\r\n        },\r\n        {\r\n            element: '#age-report-table',\r\n            popover: {\r\n                title: 'Detailed Data',\r\n                description: 'Analyze session counts, conversion rates, and purchase trends for different age groups over time.',\r\n                position: 'top'\r\n            }\r\n        },\r\n        {\r\n            element: \"#refresh\",\r\n            popover: {\r\n                title: \"Refresh for Updated Values\",\r\n                description: \"Refresh to see the latest performance metrics for different age segments\",\r\n                position: 'bottom',\r\n            },\r\n        },\r\n        {\r\n            element: \"#filters\",\r\n            popover: {\r\n                title: \"Filter Your Data\",\r\n                description:\r\n                    \"Use filters to refine your data by selecting a metric, condition, and value. Click 'Add Filter' to apply.\",\r\n                position: \"bottom\",\r\n            },\r\n        },\r\n        {\r\n            element: \"#download-button\",\r\n            popover: {\r\n                title: \"Download Your Excel Report\",\r\n                description: \"Click to download the report as an Excel file for further analysis.\",\r\n                position: \"bottom\",\r\n            }\r\n        },\r\n        {\r\n            element: \"#expand-button\",\r\n            popover: {\r\n              title: \"Expand the Table for a Better View\",\r\n              description: \"Click to enlarge the table for easier data analysis and readability.\",\r\n              position: \"bottom\",\r\n            }\r\n          }          \r\n    ],\r\n    // Define more tutorial steps as needed\r\n};\r\n\r\n// Helper to get all tutorials for a given path\r\nexport const getTutorialsForPath = (path: string): TutorialDefinition[] => {\r\n    return availableTutorials\r\n        .filter(tutorial => {\r\n            if (typeof tutorial.route === 'string') {\r\n                return tutorial.route === path;\r\n            } else {\r\n                return tutorial.route.test(path);\r\n            }\r\n        })\r\n        .sort((a, b) => (b.priority || 0) - (a.priority || 0)); // Sort by priority\r\n};\r\n\r\n// Helper to get tutorial steps by tutorial ID\r\nexport const getTutorialSteps = (tutorialId: string): TutorialStep[] => {\r\n    const tutorial = getTutorialById(tutorialId);\r\n\r\n    // If tutorial has steps defined in its definition, use those\r\n    if (tutorial?.steps && tutorial.steps.length > 0) {\r\n        return tutorial.steps;\r\n    }\r\n\r\n    // Otherwise check the steps map\r\n    return tutorialStepsMap[tutorialId] || [];\r\n};\r\n\r\n// Helper to get a specific tutorial by ID\r\nexport const getTutorialById = (id: string): TutorialDefinition | undefined => {\r\n    return availableTutorials.find(tutorial => tutorial.id === id);\r\n};\r\n\r\n// Helper to get related tutorials (tutorials that should run after this one)\r\nexport const getRelatedTutorials = (tutorialId: string): string[] => {\r\n    const tutorial = getTutorialById(tutorialId);\r\n    return tutorial?.relatedTutorials || [];\r\n};\r\n\r\n// Helper to get component-specific tutorials for a path\r\nexport const getComponentTutorials = (path: string, componentId: string): TutorialDefinition[] => {\r\n    return availableTutorials\r\n        .filter(tutorial => {\r\n            const routeMatches = typeof tutorial.route === 'string'\r\n                ? tutorial.route === path\r\n                : tutorial.route.test(path);\r\n\r\n            return routeMatches && tutorial.componentId === componentId;\r\n        })\r\n        .sort((a, b) => (b.priority || 0) - (a.priority || 0)); // Sort by priority\r\n};\r\n\r\n// Helper to get all tutorials for the current path in the correct order\r\nexport const getAllTutorialsForPath = (path: string): TutorialDefinition[] => {\r\n    const pageTutorials = getTutorialsForPath(path);\r\n\r\n    // Process tutorials to include related tutorials in the correct order\r\n    const processedTutorials: TutorialDefinition[] = [];\r\n    const addedTutorialIds = new Set<string>();\r\n\r\n    const processTutorial = (tutorialId: string) => {\r\n        if (addedTutorialIds.has(tutorialId)) {\r\n            return;\r\n        }\r\n\r\n        const tutorial = getTutorialById(tutorialId);\r\n        if (!tutorial) {\r\n            return;\r\n        }\r\n\r\n        // Check if the route matches\r\n        const routeMatches = typeof tutorial.route === 'string'\r\n            ? tutorial.route === path\r\n            : tutorial.route.test(path);\r\n\r\n        if (!routeMatches) {\r\n            return;\r\n        }\r\n\r\n        processedTutorials.push(tutorial);\r\n        addedTutorialIds.add(tutorialId);\r\n\r\n        // Process related tutorials\r\n        (tutorial.relatedTutorials || []).forEach(processTutorial);\r\n    };\r\n\r\n    // Process tutorials in priority order\r\n    pageTutorials.forEach(tutorial => processTutorial(tutorial.id));\r\n\r\n    return processedTutorials;\r\n};\r\n\r\n// Create a route map for quick lookup\r\nexport const tutorialRouteMap: Record<string, string | RegExp> = {};\r\navailableTutorials.forEach(tutorial => {\r\n    tutorialRouteMap[tutorial.id] = tutorial.route;\r\n});","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface TutorialState {\r\n  isFirstTimeLogin: boolean;\r\n  activeTutorial: string | null;\r\n  isTutorialActive: boolean;\r\n  activeTutorialStep: number;\r\n  tutorialQueue: string[]; // Array of tutorial IDs to play in sequence\r\n  completedTutorials: Record<string, boolean>;\r\n}\r\n\r\nconst initialState: TutorialState = {\r\n  isFirstTimeLogin: false,\r\n  activeTutorial: null,\r\n  isTutorialActive: false,\r\n  activeTutorialStep: 0,\r\n  tutorialQueue: [],\r\n  completedTutorials: {}\r\n};\r\n\r\nconst tutorialSlice = createSlice({\r\n  name: 'tutorial',\r\n  initialState,\r\n  reducers: {\r\n    // Set first-time login status\r\n    setFirstTimeLogin: (state, action: PayloadAction<boolean>) => {\r\n      state.isFirstTimeLogin = action.payload;\r\n    },\r\n\r\n    // Queue multiple tutorials to play in sequence\r\n    queueTutorials: (state, action: PayloadAction<string[]>) => {\r\n      state.tutorialQueue = [...action.payload];\r\n      \r\n      // If no tutorial is active, start the first one in queue\r\n      if (!state.isTutorialActive && state.tutorialQueue.length > 0) {\r\n        state.activeTutorial = state.tutorialQueue[0];\r\n        state.tutorialQueue = state.tutorialQueue.slice(1);\r\n        state.isTutorialActive = true;\r\n        state.activeTutorialStep = 0;\r\n      }\r\n    },\r\n\r\n    // Start a specific tutorial\r\n    startTutorial: (state, action: PayloadAction<string>) => {\r\n      state.activeTutorial = action.payload;\r\n      state.isTutorialActive = true;\r\n      state.activeTutorialStep = 0;\r\n    },\r\n\r\n    // Move to the next tutorial in queue\r\n    nextTutorial: (state) => {\r\n      // Mark current tutorial as completed\r\n      if (state.activeTutorial) {\r\n        state.completedTutorials[state.activeTutorial] = true;\r\n      }\r\n      \r\n      // Check if there are more tutorials in queue\r\n      if (state.tutorialQueue.length > 0) {\r\n        state.activeTutorial = state.tutorialQueue[0];\r\n        state.tutorialQueue = state.tutorialQueue.slice(1);\r\n        state.activeTutorialStep = 0;\r\n      } else {\r\n        // No more tutorials, stop the tutorial mode\r\n        state.activeTutorial = null;\r\n        state.isTutorialActive = false;\r\n      }\r\n    },\r\n\r\n    // Update current step in the active tutorial\r\n    setTutorialStep: (state, action: PayloadAction<number>) => {\r\n      state.activeTutorialStep = action.payload;\r\n    },\r\n\r\n    // Stop current tutorial and clear queue\r\n    stopTutorial: (state) => {\r\n      // Mark current tutorial as completed if there is one active\r\n      if (state.activeTutorial) {\r\n        state.completedTutorials[state.activeTutorial] = true;\r\n      }\r\n      \r\n      state.isTutorialActive = false;\r\n      state.activeTutorial = null;\r\n      state.tutorialQueue = [];\r\n      state.activeTutorialStep = 0;\r\n    },\r\n\r\n    // Complete first-time login\r\n    completeFirstTimeLogin: (state) => {\r\n      state.isFirstTimeLogin = false;\r\n    },\r\n    \r\n    // Reset tutorial for a specific ID\r\n    resetTutorial: (state, action: PayloadAction<string>) => {\r\n      if (state.completedTutorials[action.payload]) {\r\n        state.completedTutorials[action.payload] = false;\r\n      }\r\n    },\r\n    \r\n    // Reset all tutorials\r\n    resetAllTutorials: (state) => {\r\n      state.completedTutorials = {};\r\n    }\r\n  }\r\n});\r\n\r\n// Export actions\r\nexport const { \r\n  setFirstTimeLogin, \r\n  queueTutorials,\r\n  startTutorial, \r\n  nextTutorial,\r\n  setTutorialStep,\r\n  stopTutorial, \r\n  completeFirstTimeLogin,\r\n  resetTutorial,\r\n  resetAllTutorials\r\n} = tutorialSlice.actions;\r\n\r\nexport default tutorialSlice.reducer;","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { RootState } from '@/store';\r\nimport { queueTutorials } from '@/store/slices/TutorialSlice';\r\nimport { getAllTutorialsForPath } from './TutorialConfig';\r\n\r\ninterface TutorialButtonProps {\r\n  className?: string;\r\n  buttonText?: string;\r\n  variant?: 'primary' | 'secondary' | 'outline';\r\n  componentId?: string;\r\n  tutorialId?: string;\r\n  position?: 'header' | 'inline'; // Position determines behavior\r\n}\r\n\r\nconst TutorialButton: React.FC<TutorialButtonProps> = ({\r\n  className = '',\r\n  buttonText = 'Start Tutorial',\r\n  variant = 'primary',\r\n  componentId,\r\n  tutorialId,\r\n  position = 'inline',\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const currentPath = location.pathname;\r\n  \r\n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\r\n\r\n  const handleStartTutorial = () => {\r\n    // If a specific tutorial ID is provided, queue just that tutorial\r\n    if (tutorialId) {\r\n      dispatch(queueTutorials([tutorialId]));\r\n      return;\r\n    }\r\n    \r\n    // For header button or general page tutorial button, \r\n    // get all tutorials for the current path\r\n    const allTutorials = getAllTutorialsForPath(currentPath);\r\n    const tutorialIds = allTutorials.map(tutorial => tutorial.id);\r\n    \r\n    // If we're in \"header\" mode, queue all tutorials\r\n    if (position === 'header') {\r\n      if (tutorialIds.length > 0) {\r\n        dispatch(queueTutorials(tutorialIds));\r\n      } else {\r\n        console.warn(`No tutorials found for path ${currentPath}`);\r\n      }\r\n      return;\r\n    }\r\n    \r\n    // For component-specific buttons, filter by componentId if provided\r\n    if (componentId) {\r\n      const componentTutorials = allTutorials\r\n        .filter(tutorial => tutorial.componentId === componentId)\r\n        .map(tutorial => tutorial.id);\r\n      \r\n      if (componentTutorials.length > 0) {\r\n        dispatch(queueTutorials(componentTutorials));\r\n      } else {\r\n        console.warn(`No tutorials found for component ${componentId} on path ${currentPath}`);\r\n      }\r\n      return;\r\n    }\r\n    \r\n    // Default: queue all tutorials for this path\r\n    if (tutorialIds.length > 0) {\r\n      dispatch(queueTutorials(tutorialIds));\r\n    } else {\r\n      console.warn(`No tutorials found for path ${currentPath}`);\r\n    }\r\n  };\r\n\r\n  // Determine button styling based on variant\r\n  const buttonStyles = {\r\n    primary: 'bg-blue-500 hover:bg-blue-600 text-white',\r\n    secondary: 'bg-gray-500 hover:bg-gray-600 text-white',\r\n    outline: 'border border-blue-500 text-blue-500 hover:bg-blue-50'\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={handleStartTutorial}\r\n      disabled={isTutorialActive}\r\n      className={`px-4 py-2 rounded-md ${buttonStyles[variant]} ${className} ${isTutorialActive ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n    >\r\n      {buttonText}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default TutorialButton;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { RootState } from '@/store';\r\nimport { getAllTutorialsForPath } from './TutorialConfig';\r\nimport TutorialButton from './TutorialButton';\r\n\r\nconst HeaderTutorialButton: React.FC = () => {\r\n  const location = useLocation();\r\n  const currentPath = location.pathname;\r\n  \r\n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\r\n  const completedTutorials = useSelector((state: RootState) => state.tutorials.completedTutorials || {});\r\n  \r\n  // Check if there are any tutorials for the current path\r\n  const availableTutorials = getAllTutorialsForPath(currentPath);\r\n  const hasTutorials = availableTutorials.length > 0;\r\n  \r\n  // Check if all tutorials are completed\r\n  const allCompleted = hasTutorials && \r\n    availableTutorials.every(tutorial => completedTutorials[tutorial.id]);\r\n  \r\n  // Don't show the button if there are no tutorials or if a tutorial is active\r\n  if (!hasTutorials || isTutorialActive) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <TutorialButton\r\n      buttonText={allCompleted ? \"Replay Tutorial\" : \"Start Tutorial\"}\r\n      variant=\"outline\"\r\n      position=\"header\"\r\n      className=\"ml-2\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default HeaderTutorialButton;","import { Settings, RefreshCw} from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { DatePickerWithRange } from \"./DatePickerWithRange\";\r\nimport { Popover, PopoverTrigger, PopoverContent } from \"@/components/ui/popover\";\r\nimport HeaderTutorialButton from \"../Tutorial/HeaderTutorialButton\";\r\n\r\n\r\ninterface HeaderProps {\r\n  title: string;\r\n  Icon: React.ComponentType<{ className?: string }>;\r\n  showDatePicker?: boolean;\r\n  showSettings?: boolean;\r\n  showRefresh?: boolean;\r\n  isLoading?: boolean;\r\n  handleManualRefresh?: () => void;\r\n  locale?: \"en-IN\" | \"en-US\";\r\n  setLocale?: (value: \"en-IN\" | \"en-US\") => void;\r\n}\r\n \r\nexport default function Header({\r\n  title,\r\n  Icon,\r\n  showDatePicker = false,\r\n  showSettings = false,\r\n  showRefresh = false,\r\n  isLoading = false,\r\n  handleManualRefresh,\r\n  locale,\r\n  setLocale,\r\n}: HeaderProps) {\r\n\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-40 bg-white border-b px-6 py-3 transition-all duration-300\">\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* Left Section */}\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"rounded-lg bg-secondary p-2 transition-transform duration-300 ease-in-out hover:scale-110\">\r\n            <Icon className=\"h-6 w-6 text-secondary-foreground\" />\r\n          </div>\r\n          <h1 className=\"text-2xl font-semibold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-secondary-foreground to-primary\">\r\n            {title}\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Right Section */}\r\n        <div className=\"flex flex-row items-center space-x-2\">\r\n          {showDatePicker && (\r\n            <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n              <DatePickerWithRange\r\n                defaultDate={{\r\n                  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                  to: new Date()\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {showRefresh && (\r\n            <div className=\"md:flex items-center hidden\">\r\n              <Button onClick={handleManualRefresh} disabled={isLoading} className=\"flex items-center\">\r\n                <RefreshCw className={`h-4 w-4 ${isLoading ? \"animate-spin\" : \"\"}`} />\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Rest of the component remains the same */}\r\n          {showSettings && (\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" size=\"icon\">\r\n                  <Settings className=\"h-4 w-4\" />\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent>\r\n                <div className=\"grid gap-2\">\r\n                  <h3 className=\"font-medium\">Locale Settings</h3>\r\n                  <div className=\"flex flex-col space-y-2\">\r\n                    <label className=\"cursor-pointer\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"locale\"\r\n                        value=\"en-IN\"\r\n                        checked={locale === \"en-IN\"}\r\n                        onChange={() => setLocale && setLocale(\"en-IN\")}\r\n                        className=\"mr-2\"\r\n                      />\r\n                      Indian Formatting\r\n                    </label>\r\n                    <label className=\"cursor-pointer\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"locale\"\r\n                        value=\"en-US\"\r\n                        checked={locale === \"en-US\"}\r\n                        onChange={() => setLocale && setLocale(\"en-US\")}\r\n                        className=\"mr-2\"\r\n                      />\r\n                      Western Formatting\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </PopoverContent>\r\n            </Popover>\r\n          )}\r\n<HeaderTutorialButton />\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}","import { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport { format } from \"date-fns\"\r\nimport { Blend, LineChart} from \"lucide-react\"\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from \"axios\"\r\nimport AdAccountMetricsCard, { CampaignGrid } from \"./AdAccountsMetricsCard.tsx\"\r\nimport { AdAccountData, GoogleAdAccountData } from '@/pages/Dashboard/interfaces.ts'\r\ntype DataSource = 'all' | 'facebook' | 'google'\r\nimport { CustomTabs } from '../ConversionReportPage/components/CustomTabs.tsx';\r\nimport Header from '@/components/dashboard_component/Header.tsx';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store/index.ts';\r\n\r\n\r\n\r\n\r\nexport default function Dashboard() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [fbAdAccountsMetrics, setFbAdAccountsMetrics] = useState<AdAccountData[]>([]);\r\n  const [googleAdMetrics, setGoogleAdMetrics] = useState<GoogleAdAccountData>();\r\n  const [activeTab, setActiveTab] = useState<string>('all'); \r\n  const [dataSource, setDataSource] = useState<DataSource>('all');\r\n  const [locale, setLocale] = useState<\"en-IN\" | \"en-US\">(\"en-IN\"); \r\n  const [rawMetrics, setRawMetrics] = useState({\r\n    totalSpent: 0,\r\n    totalRevenue: 0,\r\n    totalROAS: 0,\r\n    totalPurchases: 0,\r\n    totalCTR: 0,\r\n    totalCPC: 0,\r\n    totalCPM: 0,\r\n    totalCPP: 0,\r\n  });\r\n  const { brandId } = useParams();\r\n  const navigate = useNavigate();\r\n  const tabs: { label: string; value: DataSource }[] = [\r\n    { label: \"All Data\", value: \"all\" },\r\n    { label: \"Meta\", value: \"facebook\" },\r\n    { label: \"Google\", value: \"google\" },\r\n  ];\r\n\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n\r\n  const handleDataSourceChange = (newValue: string) => {\r\n    const selectedTab = tabs.find((tab) => tab.value === newValue);\r\n    if (selectedTab && selectedTab.value !== dataSource) {\r\n      setActiveTab(selectedTab.value); \r\n      setDataSource(selectedTab.value); \r\n    }\r\n  };\r\n\r\n  const user = useSelector((state : RootState) => state.user.user);\r\n\r\n  const userId = user?.id;\r\n\r\n\r\n  const fetchAdData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const baseURL =\r\n        import.meta.env.PROD\r\n          ? import.meta.env.VITE_API_URL\r\n          : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n      const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n      const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n      let fbData = [];\r\n      let googleData = [];\r\n\r\n      if (dataSource === 'all' || dataSource === 'facebook') {\r\n        try {\r\n          const fbAdResponse = await axios.post(\r\n            `${baseURL}/api/metrics/fbAdAndCampaign/${brandId}`,\r\n            { startDate, endDate, userId },\r\n            { withCredentials: true }\r\n          );\r\n          fbData = fbAdResponse.data.data;\r\n          console.log(\"fbdata\", fbData);\r\n          setFbAdAccountsMetrics(fbData);\r\n        } catch (fbError) {\r\n          console.error('Error fetching Facebook ad data:', fbError);\r\n        }\r\n      }\r\n\r\n      if (dataSource === 'all' || dataSource === 'google') {\r\n        try {\r\n          const googleAdResponse = await axios.post(\r\n            `${baseURL}/api/metrics/googleAdAndCampaign/${brandId}`,\r\n            { startDate, endDate, userId },\r\n            { withCredentials: true }\r\n          );\r\n          googleData = googleAdResponse.data?.data || [];\r\n          console.log(googleData);\r\n          setGoogleAdMetrics(googleData);\r\n        } catch (googleError) {\r\n          console.error('Error fetching Google ad data:', googleError);\r\n        }\r\n      }\r\n\r\n      calculateAggregatedMetrics(\r\n        dataSource === 'google' ? [] : fbData,\r\n        dataSource === 'facebook' ? undefined : googleData\r\n      );\r\n   \r\n    } catch (error) {\r\n      console.error('Error fetching ad data:', error);\r\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n        alert('Your session has expired. Please log in again.');\r\n        navigate('/');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [navigate, date, dataSource, brandId, userId]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    fetchAdData();\r\n  }, [fetchAdData]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    fetchAdData();\r\n\r\n    const intervalId = setInterval(fetchAdData, 5 * 60 * 1000);\r\n\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchAdData]);\r\n\r\n  \r\n  const calculateAggregatedMetrics = useCallback((fbData: AdAccountData[], googleData: GoogleAdAccountData | undefined) => {\r\n    let totalSpent = 0;\r\n    let totalRevenue = 0;\r\n    let totalPurchases = 0;\r\n    let totalClicks = 0;\r\n    let totalImpressions = 0;\r\n  \r\n    if (fbData?.length) {\r\n      fbData.forEach(account => {\r\n        totalSpent += parseFloat(account.spend || '0');\r\n        totalRevenue += parseFloat(account.Revenue?.value || '0');\r\n        totalPurchases += parseFloat(account.purchases?.value || '0');\r\n        totalClicks += parseFloat(account.clicks || '0');\r\n        totalImpressions += parseFloat(account.impressions || '0');\r\n      });\r\n    }\r\n  \r\n    if (googleData?.adMetrics) {\r\n      totalSpent += parseFloat(googleData.adMetrics.totalSpend || '0');\r\n      totalRevenue += parseFloat(googleData.adMetrics.totalConversionsValue || '0');\r\n      totalPurchases += parseFloat(googleData.adMetrics.totalConversions || '0');\r\n      totalClicks += parseFloat(googleData.adMetrics.totalClicks || '0');\r\n      totalImpressions += parseFloat(googleData.adMetrics.totalImpressions || '0');\r\n    }\r\n    \r\n  \r\n    setRawMetrics({\r\n      totalSpent,\r\n      totalRevenue,\r\n      totalROAS: totalRevenue / totalSpent || 0,\r\n      totalPurchases,\r\n      totalCTR: (totalClicks / totalImpressions) * 100 || 0,\r\n      totalCPC: totalSpent / totalClicks || 0,\r\n      totalCPM: (totalSpent * 1000) / totalImpressions || 0,\r\n      totalCPP: totalPurchases > 0 ? (totalSpent / totalPurchases) : 0 ,\r\n    });\r\n  }, []);\r\n\r\n\r\n  const formattedMetrics = useMemo(() => {\r\n    return {\r\n      totalSpent: `₹ ${rawMetrics.totalSpent.toLocaleString(locale)}`,\r\n      totalRevenue: `₹ ${rawMetrics.totalRevenue.toLocaleString(locale)}`,\r\n      totalROAS: Number((rawMetrics.totalROAS).toFixed(2)).toLocaleString(locale),\r\n      totalPurchases: rawMetrics.totalPurchases.toLocaleString(locale),\r\n      totalCTR: `${Number((rawMetrics.totalCTR).toFixed(2)).toLocaleString(locale)} %`,\r\n      totalCPC: Number((rawMetrics.totalCPC).toFixed(2)).toLocaleString(locale),\r\n      totalCPM: Number((rawMetrics.totalCPM).toFixed(2)).toLocaleString(locale),\r\n      totalCPP: Number((rawMetrics.totalCPP).toFixed(2)).toLocaleString(locale),\r\n    };\r\n  }, [rawMetrics, locale]);\r\n    \r\n\r\n// Use formattedMetrics for rendering\r\nconst metrics = [\r\n  {\r\n    label: 'Amount Spent',\r\n    value: formattedMetrics.totalSpent,\r\n    tooltipContent: 'The sum of ad spends for all advertising platforms',\r\n  },\r\n  {\r\n    label: 'Revenue',\r\n    value: formattedMetrics.totalRevenue,\r\n    tooltipContent: 'Revenue from Ads Purchases',\r\n  },\r\n  {\r\n    label: 'ROAS (Ads only)',\r\n    value: formattedMetrics.totalROAS,\r\n    tooltipContent: 'Blended ROAS = Ads Purchases value / Blended Ad Spend',\r\n  },\r\n  {\r\n    label: 'Ads Purchases',\r\n    value: formattedMetrics.totalPurchases,\r\n    tooltipContent: 'Ads Purchases = Fb Ads Purchase + Google Conversions',\r\n  },\r\n  {\r\n    label: 'CPC',\r\n    value: formattedMetrics.totalCPC,\r\n    tooltipContent:\r\n      'Average CPC from all advertising platforms = (Blended Ad Spend / Blended Clicks)',\r\n  },\r\n  {\r\n    label: 'CTR',\r\n    value: formattedMetrics.totalCTR,\r\n    tooltipContent:\r\n      'Average CTR from all advertising platforms = (Blended Clicks / Blended Impressions)*100',\r\n  },\r\n \r\n  {\r\n    label: 'CPM',\r\n    value: formattedMetrics.totalCPM,\r\n    tooltipContent:\r\n      'Average CPM from all advertising platforms = (Blended Ad Spend * 1000 / Blended Impressions)',\r\n  },\r\n  {\r\n    label: 'CPP',\r\n    value: formattedMetrics.totalCPP,\r\n    tooltipContent:\r\n      'Average CPP from all advertising platforms = (Blended Ad Spend / Blended Purchases)',\r\n  },\r\n];\r\n\r\n\r\n  const googleMetrics = [\r\n    {\r\n      label: 'Total Cost',\r\n      value: googleAdMetrics\r\n        ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalSpend || '0').toLocaleString(locale)}` \r\n        : '₹ 0',\r\n    },\r\n    {\r\n      label: 'Conversion Value',\r\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalConversionsValue).toLocaleString(locale)}` : ' 0',\r\n    },\r\n    {\r\n      label: 'ROAS',\r\n      value: googleAdMetrics ? parseFloat(googleAdMetrics?.adMetrics?.roas).toLocaleString(locale) : '0.00',\r\n    },\r\n    {\r\n      label: 'Conversions',\r\n      value: googleAdMetrics ? parseFloat(googleAdMetrics?.adMetrics?.totalConversions).toLocaleString(locale) : '0',\r\n    },\r\n    {\r\n      label: 'CPC',\r\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalCPC).toLocaleString(locale)}` : ' 0',\r\n    },\r\n    {\r\n      label: 'CPM',\r\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalCPM).toLocaleString(locale)}` : ' 0',\r\n    },\r\n    {\r\n      label: 'CTR',\r\n      value: googleAdMetrics ? `${parseFloat(googleAdMetrics?.adMetrics?.totalCTR).toLocaleString(locale)} %` : ' 0',\r\n    },\r\n    {\r\n      label: 'Cost Per Conversion',\r\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalCostPerConversion).toLocaleString(locale)}` : ' 0',\r\n    },\r\n  ]\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n        <Header\r\n      title=\"AdMetrics Dashboard\"\r\n      Icon={LineChart}\r\n      showDatePicker={true}\r\n      showSettings={true}\r\n      showRefresh={true}\r\n      isLoading={false}\r\n      handleManualRefresh={() => {\r\n        fetchAdData();\r\n      }} \r\n      locale={locale}\r\n      setLocale={setLocale}/>\r\n\r\n      <div className=\"bg-white px-6 sticky top-0 z-10\">\r\n        <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleDataSourceChange} />\r\n      </div>\r\n\r\n\r\n      {/* Main content */}\r\n      <main className=\"p-4 md:p-6 lg:px-8\">\r\n        <div className=\"space-y-2\">\r\n          {/* Blended summary */}\r\n          <section>\r\n            <h2 className=\"text-xl font-semibold flex flex-row items-center justify-between\">\r\n              <div className='flex flex-row items-center space-x-2'>\r\n                <Blend className=\"h-5 w-5\" />\r\n                <span>Blended summary</span>\r\n                {(dataSource === 'all' || dataSource === 'facebook') && (\r\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n                  </svg>\r\n                )}\r\n                {(dataSource === 'all' || dataSource === 'google') && (\r\n                  <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\" >\r\n                    <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path><path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path><path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n                  </svg>\r\n                )}\r\n              </div>\r\n              \r\n          \r\n\r\n            </h2>\r\n            <AdAccountMetricsCard \r\n              metrics={metrics} \r\n              date={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} \r\n              isLoading={isLoading} \r\n              icon={dataSource === 'all' ? '' : dataSource === 'facebook' ? 'Facebook' : 'Google'} \r\n            />\r\n          </section>\r\n        </div>\r\n\r\n\r\n        {(dataSource === 'all' || dataSource === 'facebook') && fbAdAccountsMetrics?.length > 0 && fbAdAccountsMetrics.map((accountMetrics, index) => {\r\n          const fbmetrics = [\r\n            { label: 'Amount Spent', value: `₹ ${parseFloat(accountMetrics.spend || '0').toLocaleString(locale)}` },\r\n            {\r\n              label: 'Revenue',\r\n              value: `₹ ${parseFloat(accountMetrics.Revenue?.value || '0').toLocaleString(locale)}`\r\n            },\r\n            {\r\n              label: 'ROAS (Ads only)',\r\n              value: accountMetrics.purchase_roas && accountMetrics.purchase_roas.length > 0\r\n                ? parseFloat(accountMetrics.purchase_roas[0].value).toFixed(2)\r\n                : '0'\r\n            },\r\n            { label: 'Ads Purchases', value: accountMetrics.purchases?.value || '0' },\r\n            { label: 'CPC (All clicks)', value: `₹ ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpc || '0'))}` },\r\n            { label: 'CPM', value: `₹ ${new Intl.NumberFormat(locale, { minimumFractionDigits: 2 }).format(parseFloat(accountMetrics.cpm || '0'))}` },\r\n            { label: 'CTR', value: `${parseFloat(accountMetrics.ctr || '0').toFixed(2)} %` },\r\n            { label: 'Cost per Purchase (All)', value: `₹ ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpp || '0'))}` },\r\n          ];\r\n\r\n          return (\r\n            <>\r\n              <AdAccountMetricsCard\r\n                key={index}\r\n                icon=\"Facebook\"\r\n                title={`Facebook - ${accountMetrics.account_name}`}\r\n                metrics={fbmetrics}  // Pass fbmetrics for the current account\r\n                date={{ \r\n                  from: date.from ? new Date(date.from) : undefined,\r\n                  to: date.to ? new Date(date.to) : undefined \r\n                }}\r\n                isLoading={isLoading}\r\n                errorMessage={accountMetrics.message}\r\n              />\r\n              <CampaignGrid \r\n                campaigns={accountMetrics.campaigns || []} \r\n                isLoading={isLoading} \r\n                icon=\"Facebook\" \r\n              />\r\n            </>\r\n          );\r\n        })}\r\n\r\n        {\r\n          (dataSource === 'all' || dataSource === 'google') && (\r\n            googleAdMetrics && Object.keys(googleAdMetrics).length > 0 ? (\r\n              <>\r\n                <AdAccountMetricsCard\r\n                  icon=\"Google\"\r\n                  title={`Google Ads - ${googleAdMetrics?.adAccountName}`}\r\n                  metrics={googleMetrics}\r\n                  date={{ \r\n                    from: date.from ? new Date(date.from) : undefined,\r\n                    to: date.to ? new Date(date.to) : undefined \r\n                  }}\r\n                  isLoading={isLoading}\r\n                />\r\n                <CampaignGrid campaigns={googleAdMetrics.campaignData || []} isLoading={isLoading} icon=\"Google\" />\r\n              </>\r\n            ) : (\r\n              <section>\r\n                <div className='flex flex-row gap-2 items-center'>\r\n                  <h3 className=\"text-lg font-semibold\">Google Ad Metrics</h3>\r\n                  <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n                    <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n                    <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n                    <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n                  </svg>\r\n                </div>\r\n\r\n                <div className=\"text-center text-gray-500 mt-4 bg-white p-2\">\r\n                  No Google Ad Account for this brand.\r\n                </div>\r\n              </section>\r\n            )\r\n          )\r\n        }\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import type React from \"react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport axios from \"axios\"\r\nimport { Loader2, Mail, User, Building, Briefcase, MessageSquare, Send, X, AlertCircle } from \"lucide-react\"\r\nimport { Card, CardContent } from \"../ui/card\"\r\nimport { Skeleton } from \"../ui/skeleton\"\r\n\r\nconst baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n function TicketFormSkeleton() {\r\n  return (\r\n    <Card className=\"p-6 space-y-4\">\r\n      <CardContent className=\"space-y-4\">\r\n        <div className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-32\" />\r\n          <Skeleton className=\"h-10 w-full\" />\r\n        </div>\r\n        \r\n        <div className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-32\" />\r\n          <Skeleton className=\"h-10 w-full\" />\r\n        </div>\r\n        \r\n        <div className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-32\" />\r\n          <Skeleton className=\"h-10 w-full\" />\r\n        </div>\r\n        \r\n        <div className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-32\" />\r\n          <Skeleton className=\"h-24 w-full\" />\r\n        </div>\r\n        \r\n        <div className=\"flex justify-end space-x-2\">\r\n          <Skeleton className=\"h-10 w-24\" />\r\n          <Skeleton className=\"h-10 w-24\" />\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\ninterface TicketFormProps {\r\n  onClose: () => void\r\n}\r\n\r\nfunction TicketForm({ onClose }: TicketFormProps) {\r\n  const [form, setForm] = useState({\r\n    subject: \"\",\r\n    description: \"\",\r\n    departmentId: \"\",\r\n    brand: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n  })\r\n\r\n  const [departments, setDepartments] = useState<Array<{ id: string; name: string }>>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [submitting, setSubmitting] = useState(false)\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n\r\n  useEffect(() => {\r\n    const fetchDepartments = async () => {\r\n      setLoading(true)\r\n      try {\r\n        const response = await axios.get(`${baseURL}/api/zoho/departments`,{withCredentials: true})\r\n        if (response.data && response.data.departments) {\r\n          setDepartments(response.data.departments)\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching departments:\", error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchDepartments()\r\n  }, [])\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target\r\n    setForm((prev) => ({ ...prev, [name]: value }))\r\n\r\n    // Clear error when field is updated\r\n    if (errors[name]) {\r\n      setErrors((prev) => {\r\n        const newErrors = { ...prev }\r\n        delete newErrors[name]\r\n        return newErrors\r\n      })\r\n    }\r\n  }\r\n\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {}\r\n\r\n    if (!form.subject.trim()) newErrors.subject = \"Subject is required\"\r\n    if (!form.brand.trim()) newErrors.brand = \"Brand name is required\"\r\n    if (!form.departmentId) newErrors.departmentId = \"Please select a department\"\r\n    if (!form.description.trim()) newErrors.description = \"Description is required\"\r\n    if (!form.firstName.trim()) newErrors.firstName = \"First Name is required\"\r\n    if (!form.email.trim()) {\r\n      newErrors.email = \"Email is required\"\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(form.email)) {\r\n      newErrors.email = \"Please enter a valid email address\"\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!validateForm()) {\r\n      return\r\n    }\r\n\r\n    setSubmitting(true)\r\n\r\n    try {\r\n      const response = await axios.post(`${baseURL}/api/zoho/create-ticket`, form,{withCredentials: true})\r\n\r\n      if (response.data.success) {\r\n        onClose()\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error submitting ticket:\", error)\r\n      setErrors({\r\n        form: \"There was an error submitting your ticket. Please try again.\",\r\n      })\r\n    } finally {\r\n      setSubmitting(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <TicketFormSkeleton />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\r\n      <div className=\"bg-slate-800 px-6 py-4 flex justify-between items-center\">\r\n        <h2 className=\"text-xl font-semibold text-white flex items-center\">\r\n          <MessageSquare className=\"mr-2 h-5 w-5\" />\r\n          Submit a Support Ticket\r\n        </h2>\r\n        <button onClick={onClose} className=\"text-slate-300 hover:text-white transition-colors\">\r\n          <X className=\"h-6 w-6\" />\r\n        </button>\r\n      </div>\r\n\r\n      {errors.form && (\r\n        <div className=\"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start\">\r\n          <AlertCircle className=\"h-5 w-5 text-red-500 mr-2 flex-shrink-0 mt-0.5\" />\r\n          <span className=\"text-red-700 text-sm\">{errors.form}</span>\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\r\n          {/* Left column - Essential information */}\r\n          <div className=\"space-y-5\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"subject\">\r\n                Subject <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <MessageSquare className=\"h-5 w-5 text-slate-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"subject\"\r\n                  name=\"subject\"\r\n                  type=\"text\"\r\n                  value={form.subject}\r\n                  onChange={handleChange}\r\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.subject ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\r\n                  placeholder=\"Brief description of your issue\"\r\n                />\r\n              </div>\r\n              {errors.subject && <p className=\"mt-1 text-sm text-red-600\">{errors.subject}</p>}\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"brand\">\r\n                Brand Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Building className=\"h-5 w-5 text-slate-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"brand\"\r\n                  name=\"brand\"\r\n                  type=\"text\"\r\n                  value={form.brand}\r\n                  onChange={handleChange}\r\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.brand ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\r\n                  placeholder=\"Your brand name\"\r\n                />\r\n              </div>\r\n              {errors.brand && <p className=\"mt-1 text-sm text-red-600\">{errors.brand}</p>}\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"departmentId\">\r\n                Department <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Briefcase className=\"h-5 w-5 text-slate-400\" />\r\n                </div>\r\n                <select\r\n                  id=\"departmentId\"\r\n                  name=\"departmentId\"\r\n                  value={form.departmentId}\r\n                  onChange={handleChange}\r\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.departmentId ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 appearance-none bg-no-repeat bg-right`}\r\n                  style={{\r\n                    backgroundImage:\r\n                      \"url(\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' strokeLinecap='round' strokeLinejoin='round' strokeWidth='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\\\")\",\r\n                    backgroundPosition: \"right 0.5rem center\",\r\n                    backgroundSize: \"1.5em 1.5em\",\r\n                  }}\r\n                >\r\n                  <option value=\"\">Select an issue type</option>\r\n                  {departments.map((dept) => (\r\n                    <option key={dept.id} value={dept?.id}>\r\n                      {dept.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              {errors.departmentId && <p className=\"mt-1 text-sm text-red-600\">{errors.departmentId}</p>}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right column - Contact information */}\r\n          <div className=\"space-y-5\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"firstName\">\r\n                  First Name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                    <User className=\"h-5 w-5 text-slate-400\" />\r\n                  </div>\r\n                  <input\r\n                    id=\"firstName\"\r\n                    name=\"firstName\"\r\n                    type=\"text\"\r\n                    value={form.firstName}\r\n                    onChange={handleChange}\r\n                    className=\"pl-10 block w-full px-3 py-2.5 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500\"\r\n                    placeholder=\"First name\"\r\n                  />\r\n               \r\n                </div>\r\n                {errors.firstName && <p className=\"mt-1 text-sm text-red-600\">{errors.firstName}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"lastName\">\r\n                  Last Name\r\n                </label>\r\n                <input\r\n                  id=\"lastName\"\r\n                  name=\"lastName\"\r\n                  type=\"text\"\r\n                  value={form.lastName}\r\n                  onChange={handleChange}\r\n                  className=\"block w-full px-3 py-2.5 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500\"\r\n                  placeholder=\"Last name\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"email\">\r\n                Email Address <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Mail className=\"h-5 w-5 text-slate-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  value={form.email}\r\n                  onChange={handleChange}\r\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.email ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\r\n                  placeholder=\"your.email@example.com\"\r\n                />\r\n              </div>\r\n              {errors.email && <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>}\r\n              <div className=\"h-full flex items-end\">\r\n              <div className=\"text-xs text-slate-500 italic\">We'll use this email to contact you about your ticket</div>\r\n            </div>\r\n            </div>\r\n\r\n            \r\n          </div>\r\n        </div>\r\n\r\n        {/* Description - Full width */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"description\">\r\n            Description <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <textarea\r\n            id=\"description\"\r\n            name=\"description\"\r\n            value={form.description}\r\n            onChange={handleChange}\r\n            rows={5}\r\n            className={`block w-full px-3 py-2.5 border ${errors.description ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\r\n            placeholder=\"Please provide detailed information about your issue to help us assist you better\"\r\n          />\r\n          {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\r\n        </div>\r\n\r\n        {/* Action buttons */}\r\n        <div className=\"flex gap-4 pt-2\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={submitting}\r\n            className={`flex-1 bg-slate-700 text-white py-2.5 px-4 rounded-md hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors ${\r\n              submitting ? \"opacity-70 cursor-not-allowed\" : \"\"\r\n            }`}\r\n          >\r\n            {submitting ? (\r\n              <span className=\"flex items-center justify-center gap-2\">\r\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                Submitting...\r\n              </span>\r\n            ) : (\r\n              <span className=\"flex items-center justify-center gap-2\">\r\n                <Send className=\"w-4 h-4\" />\r\n                Submit Ticket\r\n              </span>\r\n            )}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"flex-1 bg-white text-slate-700 py-2.5 px-4 border border-slate-300 rounded-md hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TicketForm\r\n\r\n","import { useState } from 'react';\r\nimport { FaHeadset } from \"react-icons/fa\";\r\nimport TicketForm from './TicketForm'; \r\n\r\nconst HelpDeskModal = () => {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={() => setIsModalOpen(true)}\r\n        className=\"fixed bottom-8 right-8 z-30 flex items-center gap-2 bg-indigo-600 text-white p-3 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200 group\"\r\n      >\r\n        <FaHeadset className=\"w-5 h-5 group-hover:animate-pulse\" />\r\n      </button>\r\n      \r\n      {isModalOpen && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n  \r\n              <TicketForm onClose={() => setIsModalOpen(false)} />\r\n\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HelpDeskModal;","import React from \"react\";\r\nimport CollapsibleSidebar from \"@/pages/Dashboard/CollapsibleSidebar.tsx\";\r\nimport Dashboard from \"./dashboard.tsx\";\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal.tsx\";\r\n\r\nconst AnalyticsDashboard: React.FC = () => {\r\n  return (\r\n    <div className=\"flex h-screen\"> \r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <Dashboard />\r\n     <HelpDeskModal />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnalyticsDashboard;\r\n","import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <Cross2Icon className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import { useState } from 'react'\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport axios from 'axios'\r\n\r\n\r\nexport default function ShopifyModalContent() {\r\n  const [storeName, setStoreName] = useState('')\r\n  const baseURL = import.meta.env.PROD? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n  const handleShopifyLogin = async () => {\r\n    try {\r\n      const response = await axios.post(`${baseURL}/api/auth/shopify`, { shop: storeName }, { withCredentials: true });\r\n      if (response.data.success) {\r\n        const { authUrl } = response.data;\r\n        console.log('Generated Shopify Auth URL:', authUrl); // Log the URL to check if it's correct\r\n        window.location.href = authUrl;\r\n      } else {\r\n        console.error('Failed to get Shopify Auth URL');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting Shopify Auth URL:', error);\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"mt-4 space-y-4\">\r\n      <Input\r\n        type=\"text\"\r\n        placeholder=\"Enter your Shopify store name\"\r\n        value={storeName}\r\n        onChange={(e) => setStoreName(e.target.value)}\r\n      />\r\n      <Button className=\"w-full\" onClick={handleShopifyLogin} disabled={!storeName}>\r\n        Login to Shopify\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\n","import { useState, useEffect } from 'react'\r\nimport axios, { AxiosError } from 'axios'\r\nimport { Search, Check } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { FacebookLogo, GoogleLogo } from '@/pages/AnalyticsDashboard/AdAccountsMetricsCard'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '@/store'\r\n\r\ninterface LogoProps {\r\n  width?: string | number;\r\n  height?: string | number;\r\n}\r\n\r\nexport const Ga4Logo: React.FC<LogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n  <svg viewBox=\"0 0 24 24\" style={{ height, width }}>\r\n    <rect x=\"17\" y=\"2\" width=\"2rem\" height=\"2rem\" rx=\"2.5\" fill=\"#F9AB00\"></rect>\r\n    <path d=\"M9.5 13.5C9.5 12.1193 10.6193 11 12 11C13.3807 11 14.5 12.1193 14.5 13.5V19.5C14.5 20.8807 13.3807 22 12 22C10.6193 22 9.5 20.8807 9.5 19.5V13.5Z\" fill=\"#E37400\"></path>\r\n    <path d=\"M2 19.5C2 18.1193 3.11929 17 4.5 17C5.88071 17 7 18.1193 7 19.5C7 20.8807 5.88071 22 4.5 22C3.11929 22 2 20.8807 2 19.5Z\" fill=\"#E37400\"></path><path d=\"M6.92162 10C6.36184 10 5.95724 9.68838 5.95724 9.05977V8.55474H3.2304C2.49881 8.55474 2 8.1088 2 7.45332C2 7.07723 2.12193 6.70651 2.40459 6.22297C2.93666 5.29349 3.57403 4.31565 4.31116 3.23573C4.92637 2.31162 5.39747 2 6.20111 2C7.2209 2 7.88044 2.54265 7.88044 3.38617V7.02351H8.19082C8.72842 7.02351 9 7.34587 9 7.79181C9 8.23774 8.72288 8.55474 8.19082 8.55474H7.88044V9.05977C7.88044 9.68838 7.47585 10 6.92162 10ZM6.01267 7.09335V3.48287H5.97387C5.0095 4.8368 4.34996 5.83076 3.7015 7.03962V7.09335H6.01267Z\" fill=\"#E37400\"></path>\r\n  </svg>\r\n);\r\n\r\nexport const ShopifyLogo: React.FC<LogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n  <svg viewBox=\"0 0 64 64\" style={{ height, width }}\r\n    xmlns=\"http://www.w3.org/2000/svg\" ><g>\r\n      <g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-11.703,9.951-12.889,15.008    c-3.078,0.956-5.266,1.638-5.542,1.728C9.943,18.42,9.89,18.474,9.667,20.1C9.495,21.331,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#95C675\" /></g><g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-9.873,9.951-11.059,15.008    c-3.078,0.956-5.44,6.219-5.719,6.307c-1.719,0.542-1.772,0.596-1.996,2.223C11.148,25.91,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#79B259\" /></g><path d=\"M40.022,62.857L59,58.731c0,0-6.661-45.261-6.703-45.572c-0.042-0.311-0.313-0.482-0.538-0.5   c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631c-0.192-0.194-0.479-0.249-0.75-0.251   c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839L40.022,62.857z\" fill=\"#55932C\" /><path d=\"M33.583,2.977c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844   c-7.887,0-11.674,9.873-12.875,14.947l2.447-0.759c1.354-4.609,4.545-12.053,10.209-12.053c0.346,0,0.688,0.116,1.018,0.345   c-2.532,1.195-5.244,4.209-6.398,10.213l2.43-0.75c1.182-4.541,3.381-6.739,5.307-7.569c0.484,1.227,0.803,2.988,0.803,5.363   c0,0.108,0,0.211-0.002,0.314l2.078-0.643c0-0.2,0.002-0.4,0.002-0.617c0-1.966-0.273-3.551-0.709-4.807   c1.746,0.218,2.912,2.213,3.662,4.508l1.938-0.601C38.906,5.876,36.976,2.977,33.583,2.977z\" fill=\"#4A7A2B\" /><path d=\"M47.611,12.348c-0.474-0.037-0.793-0.06-0.793-0.06s-3.28-3.271-3.639-3.631   c-0.192-0.194-0.479-0.249-0.75-0.251c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839l0.396,0.075l10.098-2.196L47.611,12.348z\" fill=\"#4C822A\" />\r\n    </g></svg>\r\n)\r\n\r\ninterface OtherPlatformModalContentProps {\r\n  platform: string;\r\n  onConnect: (platform: string, account: string, accountId: string, managerId?: string) => void;\r\n  connectedId: string;\r\n}\r\n\r\ninterface GoogleAdsAccount {\r\n  name: string;\r\n  clientId: string;\r\n  managerId?: string;  // Added managerId\r\n  hidden?: boolean;\r\n}\r\n\r\ninterface GoogleAnalyticsAccount {\r\n  propertyName: string\r\n  propertyId: string\r\n}\r\n\r\ninterface FacebookAdsAccount {\r\n  adname: string\r\n  id: string\r\n}\r\n\r\nexport default function OtherPlatformModalContent({\r\n  platform,\r\n  onConnect,\r\n  connectedId,\r\n}: OtherPlatformModalContentProps) {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [googleAdsAccounts, setGoogleAdsAccounts] = useState<GoogleAdsAccount[]>([]);\r\n  const [googleAnalyticsAccounts, setGoogleAnalyticsAccounts] = useState<GoogleAnalyticsAccount[]>([]);\r\n  const [facebookAdsAccounts, setFacebookAdsAccounts] = useState<FacebookAdsAccount[]>([]);\r\n  const [showLoginButton, setShowLoginButton] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n\r\n  useEffect(() => {\r\n    const fetchGoogleAdsAccounts = async () => {\r\n      setLoading(true); // Start loading\r\n      try {\r\n        const userId = user?.id;\r\n        const response = await axios.post(\r\n          `${baseURL}/api/setup/google-accounts`,\r\n          { userId },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.status === 200) {\r\n          setShowLoginButton(false);\r\n          setGoogleAdsAccounts(\r\n            response.data?.clientAccounts.filter((account: GoogleAdsAccount) => !account.hidden)\r\n          );\r\n        } else {\r\n          console.log('Unexpected status code:', response.status);\r\n        }\r\n      } catch (error) {\r\n        handleError(error, setShowLoginButton);\r\n      } finally {\r\n        setLoading(false); // End loading\r\n      }\r\n    };\r\n\r\n    const fetchGoogleAnalyticsAccounts = async () => {\r\n      setLoading(true); // Start loading\r\n      try {\r\n        const userId = user?.id;\r\n        const response = await axios.post(\r\n          `${baseURL}/api/setup/ga4-propertyIds`,\r\n          { userId },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.status === 200) {\r\n          setShowLoginButton(false);\r\n          setGoogleAnalyticsAccounts(response.data.propertiesList || []);\r\n        } else {\r\n          console.log('Unexpected status code:', response.status);\r\n        }\r\n      } catch (error) {\r\n        handleError(error, setShowLoginButton);\r\n      } finally {\r\n        setLoading(false); // End loading\r\n      }\r\n    };\r\n\r\n    const fetchFacebookAdsAccounts = async () => {\r\n      setLoading(true); // Start loading\r\n      try {\r\n        const userId = user?.id;\r\n        const response = await axios.post(\r\n          `${baseURL}/api/setup/fb-ad-accounts`,\r\n          { userId },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        setFacebookAdsAccounts(response.data.adAccounts || []);\r\n      } catch (error) {\r\n        handleError(error, setShowLoginButton);\r\n      } finally {\r\n        setLoading(false); // End loading\r\n      }\r\n    };\r\n\r\n    if (platform.toLowerCase() === 'google ads') fetchGoogleAdsAccounts();\r\n    if (platform.toLowerCase() === 'google analytics') fetchGoogleAnalyticsAccounts();\r\n    if (platform.toLowerCase() === 'facebook') fetchFacebookAdsAccounts();\r\n  }, [platform, user]);\r\n\r\n  const handleError = (error: unknown, setShowLoginButton: (value: boolean) => void) => {\r\n    const axiosError = error as AxiosError;\r\n\r\n    if (axiosError.response) {\r\n      const { status, data } = axiosError.response;\r\n      const code = axiosError.code;\r\n      if (status === 400) {\r\n        setShowLoginButton(true);\r\n      } else if (status === 403) {\r\n        setShowLoginButton(true);\r\n      } else if (status === 401 || code === 'TOKEN_EXPIRED') {\r\n        alert('Your Google session has expired. Please log in again.');\r\n        setShowLoginButton(true);\r\n      } else {\r\n        console.error('Unhandled Error Status:', status);\r\n        console.error('Error Message:', data);\r\n      }\r\n    } else if (axiosError.request) {\r\n      console.error('No response received:', axiosError.request);\r\n    } else {\r\n      console.error('Unexpected Error:', axiosError.message);\r\n    }\r\n  };\r\n\r\n\r\n  const filteredAccounts = () => {\r\n    if (platform.toLowerCase() === 'google ads') {\r\n      if (!googleAdsAccounts || googleAdsAccounts.length === 0) {\r\n        return null;\r\n      }\r\n      return googleAdsAccounts.filter((account) =>\r\n        account.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    } else if (platform.toLowerCase() === 'google analytics') {\r\n      if (!googleAnalyticsAccounts || googleAnalyticsAccounts.length === 0) {\r\n        return null;\r\n      }\r\n      return googleAnalyticsAccounts.filter((account) =>\r\n        account.propertyName.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    } else if (platform.toLowerCase() === 'facebook') {\r\n      if (!facebookAdsAccounts || facebookAdsAccounts.length === 0) {\r\n        return null; // Return null if there are no Facebook Ads accounts\r\n      }\r\n      return facebookAdsAccounts.filter((account) =>\r\n        account.adname.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const handleConnect = (account: GoogleAdsAccount | GoogleAnalyticsAccount | FacebookAdsAccount) => {\r\n    let accountId: string;\r\n    let displayName: string;\r\n    let managerId: string | undefined;\r\n\r\n    if ('clientId' in account) {\r\n      accountId = account.clientId;\r\n      managerId = account.managerId;\r\n\r\n      // Include manager ID in the display name if available\r\n      displayName = managerId\r\n        ? `${account.name} (${accountId}/${managerId})`\r\n        : `${account.name} (${accountId})`;\r\n    } else if ('propertyId' in account) {\r\n      accountId = account.propertyId;\r\n      displayName = `${account.propertyName} (${accountId})`;\r\n    } else if ('id' in account) {\r\n      accountId = account.id;\r\n      displayName = `${account.adname}`;\r\n    } else {\r\n      accountId = '';\r\n      displayName = '';\r\n    }\r\n\r\n    onConnect(platform, displayName, accountId, managerId);\r\n  };\r\n\r\n  const handleGoogleLogin = async () => {\r\n    try {\r\n      const response = await axios.get(`${baseURL}/api/auth/google?context=brandSetup`, { withCredentials: true });\r\n      const { authUrl } = response.data;\r\n\r\n      window.location.href = authUrl;\r\n    } catch (error) {\r\n      console.error('Error getting Google Auth URL:', error);\r\n    }\r\n  }\r\n\r\n  const handleFbLogin = async () => {\r\n    try {\r\n      const response = await axios.get(`${baseURL}/api/auth/facebook`, { withCredentials: true });\r\n      if (response.data.success) {\r\n        window.location.href = response.data.authURL;\r\n      } else {\r\n        console.error('Failed to get Facebook Auth URL');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting Facebook Auth URL:', error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    loading ? <div>Loading...</div> : (\r\n      <>\r\n        {showLoginButton ? (\r\n          <Button\r\n            size=\"sm\"\r\n            onClick={platform.toLowerCase() === 'facebook' ? handleFbLogin : handleGoogleLogin}\r\n            className=\"flex items-center gap-2 bg-white text-black border border-green-800 hover:bg-green-50\"\r\n          >\r\n            {platform.toLowerCase() === 'google ads' && (\r\n              <>\r\n                <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                Connect to your Google Ads account\r\n              </>\r\n            )}\r\n            {platform.toLowerCase() === 'google analytics' && (\r\n              <>\r\n                <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                Connect to your GA4 account\r\n              </>\r\n            )}\r\n            {platform.toLowerCase() === 'facebook' && (\r\n              <>\r\n                <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                Connect to your Facebook account\r\n              </>\r\n            )}\r\n          </Button>\r\n        ) : (\r\n          // Handle the case where the button is not shown\r\n          <>\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"Search accounts...\"\r\n                className=\"pl-10\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"max-h-[50vh] overflow-auto\">\r\n              {filteredAccounts()?.map((account) => {\r\n                // Extract platform-specific details\r\n                const isGoogleAds = platform.toLowerCase() === 'google ads';\r\n                const isFacebook = platform.toLowerCase() === 'facebook';\r\n                // const isGoogleAnalytics = platform.toLowerCase() === 'google analytics';\r\n\r\n                const accountId = isGoogleAds\r\n                  ? (account as GoogleAdsAccount).clientId\r\n                  : isFacebook\r\n                    ? (account as FacebookAdsAccount).id\r\n                    : (account as GoogleAnalyticsAccount).propertyId;\r\n\r\n                const managerId = isGoogleAds\r\n                  ? (account as GoogleAdsAccount).managerId\r\n                  : undefined;\r\n\r\n                const accountName = isGoogleAds\r\n                  ? (account as GoogleAdsAccount).name\r\n                  : isFacebook\r\n                    ? (account as FacebookAdsAccount).adname\r\n                    : (account as GoogleAnalyticsAccount).propertyName;\r\n\r\n                const platformLogo = isGoogleAds ? (\r\n                  <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                ) : isFacebook ? (\r\n                  <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                ) : (\r\n                  <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                );\r\n\r\n                // Create display text based on account type\r\n                const displayText = isGoogleAds && managerId\r\n                  ? `${accountName} (${accountId}/${managerId})`\r\n                  : isFacebook\r\n                    ? `${accountName}`\r\n                    : `${accountName} (${accountId})`;\r\n\r\n                return (\r\n                  <div\r\n                    key={`${platform}-${accountId}-${managerId || \"\"}`}\r\n                    className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\"\r\n                  >\r\n                    <span>\r\n                      <div className=\"flex flex-row items-center gap-3\">\r\n                        {platformLogo}\r\n                        {displayText}\r\n                      </div>\r\n                    </span>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleConnect(account)}\r\n                      disabled={connectedId.includes(accountId)}\r\n                      className=\"bg-blue-600\"\r\n                    >\r\n                      {connectedId.includes(accountId) && <Check className=\"h-4 w-4 mr-2\" />}\r\n                      {connectedId.includes(accountId) ? 'Connected' : 'Connect'}\r\n                    </Button>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </>\r\n        )}\r\n      </>\r\n    )\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Upload, Check, ArrowRight, Building2, ChevronRight } from 'lucide-react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport ShopifyModalContent from './ShopifyModalContent';\r\nimport OtherPlatformModalContent from './OtherPlatformModalContent';\r\nimport { FacebookLogo, GoogleLogo } from '@/pages/AnalyticsDashboard/AdAccountsMetricsCard';\r\nimport { Ga4Logo, ShopifyLogo } from './OtherPlatformModalContent';\r\nimport axios from 'axios';\r\nimport { setUser } from '@/store/slices/UserSlice';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\n\r\n\r\nconst platforms = [\r\n  { name: 'Shopify', color: 'bg-emerald-50', icon: ShopifyLogo, textColor: 'text-emerald-700', ringColor: 'ring-emerald-200', description: 'Connect your e-commerce store' },\r\n  { name: 'Facebook', color: 'bg-blue-50', icon: FacebookLogo, textColor: 'text-blue-700', ringColor: 'ring-blue-200', description: 'Link your ad accounts' },\r\n  { name: 'Google Ads', color: 'bg-rose-50', icon: GoogleLogo, textColor: 'text-rose-700', ringColor: 'ring-rose-200', description: 'Import campaign data' },\r\n  { name: 'Google Analytics', color: 'bg-yellow-50', icon: Ga4Logo, textColor: 'text-yellow-700', ringColor: 'ring-yellow-200', description: 'Track website metrics' },\r\n];\r\n\r\nconst steps = ['Brand Details', 'Platform Connections', 'Review'];\r\n\r\nexport default function BrandSetup() {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [openModal, setOpenModal] = useState<string | null>(null);\r\n  const [connectedAccounts, setConnectedAccounts] = useState<Record<string, string[]>>({});\r\n  const [brandName, setBrandName] = useState('');\r\n  const [brandLogo, setBrandLogo] = useState<File | null>(null);\r\n  const [googleAdId, setGoogleAdId] = useState<string>('');\r\n  const [ga4Id, setGa4Id] = useState<string>('');\r\n  const [fbAdId, setFBAdId] = useState<string[]>([]);\r\n  const [shop, setShop] = useState<string>('');\r\n  const [shopifyAccessToken, setShopifyAccessToken] = useState('');\r\n  const { toast } = useToast();\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const accessToken = params.get('access_token');\r\n    const shopName = params.get('shop_name');\r\n\r\n    if (accessToken && shopName) {\r\n      setShopifyAccessToken(accessToken);\r\n      setShop(shopName);\r\n      setConnectedAccounts(prev => ({\r\n        ...prev,\r\n        Shopify: [shopName],\r\n      }));\r\n    }\r\n  }, []);\r\n\r\n  const handleConnect = (platform: string, account: string, accountId: string) => {\r\n    setConnectedAccounts(prev => ({\r\n      ...prev,\r\n      [platform]: [...(prev[platform] || []), account]\r\n    }));\r\n    if (platform.toLowerCase() === 'google ads') {\r\n      setGoogleAdId(accountId);\r\n    } else if (platform.toLowerCase() === 'google analytics') {\r\n      setGa4Id(accountId);\r\n    } else {\r\n      setFBAdId(prev => [...prev, accountId]);\r\n    }\r\n    toast({ description: `Successfully connected ${account} to ${platform}`, variant: \"default\" });\r\n  };\r\n\r\n  const handleLogoUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      setBrandLogo(file);\r\n      toast({ description: 'Logo uploaded successfully', variant: \"default\" });\r\n    }\r\n  };\r\n\r\n  const isConnected = (platform: string) => {\r\n    return (connectedAccounts[platform]?.length || 0) > 0;\r\n  };\r\n\r\n  const getConnectedId = (platformName: string): string => {\r\n    switch (platformName.toLowerCase()) {\r\n      case 'google ads':\r\n        return googleAdId;\r\n      case 'google analytics':\r\n        return ga4Id;\r\n      case 'facebook':\r\n        return fbAdId.join(',');\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const canProceed = () => {\r\n    switch (currentStep) {\r\n      case 0:\r\n        return !!brandName && !!brandLogo;\r\n      case 1:\r\n        return Object.keys(connectedAccounts).length > 0;\r\n      default:\r\n        return true;\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!brandName || Object.keys(connectedAccounts).length === 0) {\r\n      return toast({ description: 'Please complete all fields before submitting.', variant: \"destructive\" });\r\n    }\r\n\r\n    const payload = {\r\n      name: brandName,\r\n      logoUrl: brandLogo || '',\r\n      googleAdAccount: googleAdId || '',\r\n      ga4Account: { PropertyID: ga4Id || '' },\r\n      fbAdAccounts: fbAdId.map((accountId) => accountId),\r\n      shopifyAccount: { shopName: shop || '', shopifyAccessToken: shopifyAccessToken || '' }\r\n    };\r\n\r\n    try {\r\n      // First create the brand\r\n      const brandResponse = await axios.post(\r\n        `${baseURL}/api/brands/add`,\r\n        payload,\r\n        { withCredentials: true }\r\n      );\r\n\r\n      const newBrandId = brandResponse.data.brand._id;\r\n\r\n      // Then add the brand to user\r\n      if (user) {\r\n        await axios.post(\r\n          `${baseURL}/api/users/add-brand`,\r\n          {\r\n            userId: user?.id,\r\n            brandId: newBrandId\r\n          },\r\n          { withCredentials: true }\r\n        );\r\n      }\r\n\r\n      // Update local state\r\n      const updatedUser = user ? {\r\n        ...user,\r\n        brands: [...user.brands, newBrandId]\r\n      } : null;\r\n\r\n      if (updatedUser) setUser(updatedUser);\r\n\r\n      toast({ description: 'Brand setup completed successfully!', variant: \"default\" });\r\n\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast({ description: 'Error creating brand. Please try again.', variant: \"destructive\" });\r\n    }\r\n  };\r\n\r\n\r\n  const renderStepContent = () => {\r\n    switch (currentStep) {\r\n      case 0:\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"space-y-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700\">Brand Name</label>\r\n              <Input\r\n                placeholder=\"Enter your brand name\"\r\n                value={brandName}\r\n                onChange={(e) => setBrandName(e.target.value)}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700\">Brand Logo</label>\r\n              <div className=\"flex items-center gap-4\">\r\n                <Input\r\n                  id=\"brandLogo\"\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleLogoUpload}\r\n                  className=\"hidden\"\r\n                />\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"flex-1\"\r\n                  onClick={() => document.getElementById('brandLogo')?.click()}\r\n                >\r\n                  <Upload className=\"h-4 w-4 mr-2\" />\r\n                  {brandLogo ? 'Change Logo' : 'Upload Logo'}\r\n                </Button>\r\n                {brandLogo && (\r\n                  <div className=\"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-lg\">\r\n                    <Check className=\"h-4 w-4 text-green-500\" />\r\n                    <span className=\"text-sm text-gray-600\">{brandLogo.name}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      case 1:\r\n        return (\r\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n            {platforms.map((platform) => (\r\n              <Dialog\r\n                key={platform.name}\r\n                open={openModal === platform.name}\r\n                onOpenChange={(isOpen) => setOpenModal(isOpen ? platform.name : null)}\r\n              >\r\n                <DialogTrigger asChild>\r\n                  <button\r\n                    className={`relative group p-6 rounded-xl ${platform.color} ring-1 ${platform.ringColor} transition-all duration-200 hover:scale-[1.02]`}\r\n                  >\r\n                    <div className=\"flex items-start gap-4\">\r\n                      <platform.icon width=\"2rem\" height=\"2rem\" />\r\n                      <div className=\"flex-1 text-left\">\r\n                        <h3 className={`font-semibold ${platform.textColor}`}>{platform.name}</h3>\r\n                        <p className=\"text-sm text-gray-600 mt-1\">{platform.description}</p>\r\n                      </div>\r\n                      {isConnected(platform.name) ? (\r\n                        <Check className=\"h-5 w-5 text-green-500\" />\r\n                      ) : (\r\n                        <ChevronRight className=\"h-5 w-5 text-gray-400\" />\r\n                      )}\r\n                    </div>\r\n                  </button>\r\n                </DialogTrigger>\r\n                <DialogContent className=\"sm:max-w-[600px]\">\r\n                  <DialogHeader>\r\n                    <DialogTitle>Connect to {platform.name}</DialogTitle>\r\n                    <DialogDescription>\r\n                      {platform.name === 'Shopify'\r\n                        ? 'Enter your Shopify store name and login to connect.'\r\n                        : 'Select an account to connect with your brand.'}\r\n                    </DialogDescription>\r\n                  </DialogHeader>\r\n                  {platform.name === 'Shopify' ? (\r\n                    <ShopifyModalContent />\r\n                  ) : (\r\n                    <OtherPlatformModalContent\r\n                      platform={platform.name}\r\n                      onConnect={handleConnect}\r\n                      connectedId={getConnectedId(platform.name)}\r\n                    />\r\n                  )}\r\n                </DialogContent>\r\n              </Dialog>\r\n            ))}\r\n          </div>\r\n        );\r\n      case 2:\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"rounded-lg bg-gray-50 p-6\">\r\n              <h3 className=\"font-medium text-gray-900\">Brand Details</h3>\r\n              <div className=\"mt-4 space-y-3\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Name</span>\r\n                  <span className=\"font-medium\">{brandName}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Logo</span>\r\n                  <span className=\"font-medium\">{brandLogo?.name}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rounded-lg bg-gray-50 p-6\">\r\n              <h3 className=\"font-medium text-gray-900\">Connected Platforms</h3>\r\n              <div className=\"mt-4 space-y-3\">\r\n                {Object.entries(connectedAccounts).map(([platform, accounts]) => (\r\n                  <div key={platform} className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">{platform}</span>\r\n                    <span className=\"font-medium\">{accounts.join(', ')}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"mx-auto shadow-lg\">\r\n      <CardContent className=\"p-8\">\r\n        <div className=\"flex items-center gap-3 mb-8\">\r\n          <div className=\"rounded-full bg-primary/10 p-2\">\r\n            <Building2 className=\"h-6 w-6 text-primary\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Brand Setup</h2>\r\n            <p className=\"text-gray-500\">Complete the steps below to set up your brand</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            {steps.map((step, index) => (\r\n              <div key={step} className=\"flex items-center\">\r\n                <div className={`flex items-center justify-center w-8 h-8 rounded-full ${index <= currentStep ? 'bg-primary text-white' : 'bg-gray-100 text-gray-400'}`}>\r\n                  {index < currentStep ? (\r\n                    <Check className=\"h-5 w-5\" />\r\n                  ) : (\r\n                    <span>{index + 1}</span>\r\n                  )}\r\n                </div>\r\n                <span className={`ml-2 ${index <= currentStep ? 'text-gray-900' : 'text-gray-400'}`}>\r\n                  {step}\r\n                </span>\r\n                {index < steps.length - 1 && (\r\n                  <div className={`w-24 h-0.5 mx-4 ${index < currentStep ? 'bg-primary' : 'bg-gray-100'}`} />\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {renderStepContent()}\r\n\r\n        <div className=\"flex justify-between mt-8\">\r\n          {currentStep > 0 && (\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setCurrentStep(current => current - 1)}\r\n            >\r\n              Back\r\n            </Button>\r\n          )}\r\n          <Button\r\n            className=\"ml-auto\"\r\n            disabled={!canProceed()}\r\n            onClick={() => {\r\n              if (currentStep === steps.length - 1) {\r\n                handleSubmit();\r\n              } else {\r\n                setCurrentStep(current => current + 1);\r\n              }\r\n            }}\r\n          >\r\n            {currentStep === steps.length - 1 ? (\r\n              <>\r\n                Complete Setup\r\n                <Check className=\"ml-2 h-5 w-5\" />\r\n              </>\r\n            ) : (\r\n              <>\r\n                Continue\r\n                <ArrowRight className=\"ml-2 h-5 w-5\" />\r\n              </>\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","import {\r\n  Rocket,\r\n} from 'lucide-react'\r\nimport BrandSetup from './components/BrandForm.tsx'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '@/store/index.ts'\r\nimport CollapsibleSidebar from '../Dashboard/CollapsibleSidebar.tsx'\r\n\r\nexport default function BrandSetupDashboard() {\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n\r\n  return (\r\n    <div className=\"flex h-screen\"> {/* Set a fixed width for the sidebar */}\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n      <div className=\"container mx-auto px-4 py-4\">\r\n        <div className=\"space-y-5\">\r\n          {/* Vibrant Welcome Header */}\r\n          <div className=\"bg-gradient-to-r from-primary to-primary/80 text-white rounded-2xl shadow-md overflow-hidden\">\r\n            <div className=\"p-8 flex items-center justify-between\">\r\n              <div className=\"space-y-4 max-w-2xl\">\r\n                <h1 className=\"text-4xl font-extrabold tracking-tight\">\r\n                  Welcome, <span className=\"text-white/90\">{user?.username.split(' ')[0] || 'User'}</span>\r\n                </h1>\r\n                <p className=\"text-lg text-white/80 leading-relaxed\">\r\n                  Embark on your analytics journey! Setting up your first brand will unlock powerful insights, helping you transform data into strategic growth.\r\n                </p>\r\n              </div>\r\n              <Rocket className=\"h-24 w-24 text-white/20 animate-pulse\" />\r\n            </div>\r\n          </div>\r\n              <BrandSetup />\r\n        </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { createContext, useContext, useState } from \"react\";\r\n\r\ninterface TokenErrorContextType {\r\n  tokenError: boolean;\r\n  setTokenError: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst TokenErrorContext = createContext<TokenErrorContextType>({\r\n  tokenError: false,\r\n  setTokenError: () => {}\r\n});\r\n\r\nexport const TokenErrorProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [tokenError, setTokenError] = useState(false);\r\n\r\n  return (\r\n    <TokenErrorContext.Provider value={{ tokenError, setTokenError }}>\r\n      {children}\r\n    </TokenErrorContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useTokenError = () => useContext(TokenErrorContext);\r\n","import axios, { AxiosInstance, AxiosError} from 'axios';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useTokenError } from \"@/context/TokenErrorContext\";\r\n\r\n/**\r\n * Creates a custom Axios instance with cancelable requests.\r\n * @returns {AxiosInstance} Configured Axios instance.\r\n */\r\nconst createAxiosInstance = (): AxiosInstance => {\r\n\r\n    const navigate = useNavigate();\r\n    const { setTokenError } = useTokenError();\r\n\r\n  const axiosInstance: AxiosInstance = axios.create({\r\n    baseURL: import.meta.env.PROD\r\n      ? import.meta.env.VITE_API_URL as string\r\n      : import.meta.env.VITE_LOCAL_API_URL as string,\r\n    withCredentials: true, \r\n  });\r\n\r\n\r\n  // Add a response interceptor\r\n  axiosInstance.interceptors.response.use(\r\n    (response) => response,\r\n    (error: AxiosError) => {\r\n      if (error.response?.status === 401) {\r\n    \r\n          localStorage.removeItem('user');\r\n          navigate('/');\r\n        \r\n      }else if (error.response?.status === 403) {\r\n        setTokenError(true);\r\n      }\r\n      return Promise.reject(error); \r\n    }\r\n  );\r\n\r\n  return axiosInstance;\r\n};\r\n\r\nexport default createAxiosInstance;","import { Skeleton } from \"@/components/ui/skeleton\"\r\n\r\nconst MetricCardSkeleton = () => {\r\n  return (\r\n    <div className=\"relative overflow-hidden bg-white p-6\">\r\n      <div className=\"absolute top-0 right-0 p-4\">\r\n        <Skeleton className=\"h-6 w-6 rounded\" />\r\n      </div>\r\n      <Skeleton className=\"h-4 w-24\" />\r\n      <div className=\"mt-4\">\r\n        <Skeleton className=\"h-8 w-32\" />\r\n      </div>\r\n      <div className=\"mt-4 flex items-center justify-between\">\r\n        <Skeleton className=\"h-4 w-16\" />\r\n        <Skeleton className=\"h-4 w-24\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TimeSectionSkeleton = () => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <Skeleton className=\"h-7 w-32\" />\r\n        <div className=\"h-[1px] flex-1 mx-4 bg-slate-200\" />\r\n      </div>\r\n      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\r\n        <MetricCardSkeleton />\r\n        <MetricCardSkeleton />\r\n        <MetricCardSkeleton />\r\n        <MetricCardSkeleton />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst DashboardSkeleton = () => {\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-100\">\r\n      <div className=\"mx-auto max-w-7xl p-8\">\r\n        <div className=\"mb-6 space-y-4\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"h-12 w-1 bg-blue-500 rounded-full\" />\r\n            <div>\r\n              <Skeleton className=\"h-9 w-64\" />\r\n              <Skeleton className=\"h-5 w-48 mt-1\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-10\">\r\n          <TimeSectionSkeleton />\r\n          <TimeSectionSkeleton />\r\n          <TimeSectionSkeleton />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DashboardSkeleton","import {\r\n  ArrowDownIcon,\r\n  ArrowUpIcon,\r\n  CheckCircle2,\r\n  RefreshCw,\r\n  ShoppingBag,\r\n  ShoppingCart,\r\n  Users,\r\n  XCircle,\r\n  Tag,\r\n  Coins,\r\n  TrendingUpDown,\r\n  Clock,\r\n  CalendarDays\r\n} from \"lucide-react\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { useSelector } from \"react-redux\"\r\nimport type { RootState } from \"@/store\"\r\nimport { useCallback, useEffect, useState } from \"react\"\r\nimport createAxiosInstance from \"../ConversionReportPage/components/axiosInstance\"\r\nimport DashboardSkeleton from \"./components/DashboardSkeleton\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { FacebookLogo, GoogleLogo } from \"../AnalyticsDashboard/AdAccountsMetricsCard\"\r\nimport { Ga4Logo, ShopifyLogo } from \"./components/OtherPlatformModalContent\"\r\n\r\nexport type Trend = \"up\" | \"down\"\r\nexport type Period = \"Today\" | \"Last 7 Days\" | \"Last 30 Days\"\r\n\r\nexport interface DateRange {\r\n  start: string\r\n  end: string\r\n}\r\n\r\nexport interface MetricData {\r\n  current: number\r\n  previous: number\r\n  change: number\r\n  trend: Trend\r\n}\r\n\r\nexport interface PeriodData {\r\n  title: string\r\n  dateRanges: {\r\n    current: DateRange\r\n    previous: DateRange\r\n  }\r\n  sessions: MetricData\r\n  addToCarts: MetricData\r\n  checkouts: MetricData\r\n  purchases: MetricData\r\n  spend: MetricData\r\n  roas: MetricData\r\n}\r\n\r\nexport interface Summary {\r\n  summaries: Record<Period, PeriodData>\r\n}\r\n\r\nconst iconMap = {\r\n  sessions: Users,\r\n  addToCarts: ShoppingCart,\r\n  checkouts: ShoppingBag,\r\n  purchases: Tag,\r\n  spend: Coins,\r\n  roas: TrendingUpDown,\r\n} as const\r\n\r\ninterface MetricRowProps {\r\n  title: string\r\n  icon: typeof iconMap[keyof typeof iconMap]\r\n  current: number\r\n  previous: number\r\n  change: number\r\n  trend: Trend\r\n}\r\n\r\nexport function MetricRow({ title, icon: Icon, current, previous, change, trend }: MetricRowProps) {\r\n  return (\r\n    <div className=\"flex items-center justify-between py-3 border-b border-slate-100 last:border-0\">\r\n      <div className=\"flex items-center space-x-3\">\r\n        <div className=\"p-2 rounded-md bg-slate-100/80 shadow-sm\">\r\n          <Icon className=\"h-4 w-4 text-slate-700\" />\r\n        </div>\r\n        <span className=\"text-sm font-medium text-slate-800\">{title}</span>\r\n      </div>\r\n      <div className=\"flex items-center space-x-4\">\r\n        <div className=\"text-right\">\r\n          <div className=\"text-sm font-semibold text-slate-800\">{current.toLocaleString()}</div>\r\n          <div className=\"text-xs text-slate-500 flex items-center justify-end\">\r\n            <span className=\"mr-1\">vs</span>\r\n            <span>{previous.toLocaleString()}</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className={cn(\r\n            \"px-2 py-1 rounded-full text-xs font-medium flex items-center justify-center shadow-sm w-[80px]\",\r\n            trend === \"up\"\r\n              ? \"bg-emerald-50 text-emerald-700 border border-emerald-100\"\r\n              : \"bg-rose-50 text-rose-700 border border-rose-100\",\r\n          )}\r\n        >\r\n          {trend === \"up\" ? <ArrowUpIcon className=\"h-3 w-3 mr-1\" /> : <ArrowDownIcon className=\"h-3 w-3 mr-1\" />}\r\n          {change}%\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\ninterface PeriodCardProps {\r\n  period: Period\r\n  data: {\r\n    analytics?: PeriodData\r\n    facebook?: PeriodData\r\n    google?: PeriodData\r\n  }\r\n}\r\n\r\nexport function PeriodCard({ period, data }: PeriodCardProps) {\r\n  const gradients = {\r\n    Today: \"from-blue-100/70 to-indigo-100/70\",\r\n    \"Last 7 Days\": \"from-violet-100/70 to-purple-100/70\",\r\n    \"Last 30 Days\": \"from-amber-100/70 to-orange-100/70\",\r\n  }\r\n\r\n  const dateRanges = data.analytics?.dateRanges || data.facebook?.dateRanges || data.google?.dateRanges\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString(\"en-GB\", {\r\n      day: \"numeric\",\r\n      month: \"short\",\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Card className=\"overflow-hidden border-slate-200 shadow-md hover:shadow-lg transition-shadow duration-300 h-[390px] flex flex-col\">\r\n      <CardHeader className={`bg-gradient-to-r p-4 ${gradients[period]} border-b border-slate-200 flex-shrink-0`}>\r\n        <div className=\"flex justify-between items-center\">\r\n          <div className=\"flex items-center space-x-2.5\">\r\n            <div className=\"bg-white/80 p-2 rounded-full shadow-sm\">\r\n              <Clock className=\"h-5 w-5 text-slate-700\" />\r\n            </div>\r\n            <CardTitle className=\"text-base font-semibold text-slate-800\">{period}</CardTitle>\r\n          </div>\r\n\r\n          {dateRanges && (\r\n            <div className=\"bg-white/90 rounded-md px-3 py-1.5 shadow-sm border border-slate-200 text-xs\">\r\n              <div className=\"flex items-center gap-1.5 text-slate-700 font-medium\">\r\n                <CalendarDays className=\"h-3.5 w-3.5 text-slate-600\" />\r\n                <span>\r\n                  {formatDate(dateRanges.current.start)} - {formatDate(dateRanges.current.end)}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex items-center gap-1.5 mt-1 text-slate-500 text-[10px]\">\r\n                <span className=\"text-slate-400\">vs</span>\r\n                <span>\r\n                  {formatDate(dateRanges.previous.start)} - {formatDate(dateRanges.previous.end)}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"p-0 overflow-y-auto flex-grow\">\r\n        <div className=\"px-5 py-3 space-y-4\">\r\n          {/* Analytics Section */}\r\n          {data.analytics && (\r\n            <div>\r\n              <div className=\"flex items-center mb-3\">\r\n                <div className=\"h-4 w-1 bg-blue-500 rounded-full mr-2.5\"></div>\r\n                <h3 className=\"text-sm font-semibold text-slate-800\">Analytics</h3>\r\n              </div>\r\n              <div className=\"space-y-0.5\">\r\n                <MetricRow title=\"Sessions\" icon={Users} {...data.analytics.sessions!} />\r\n                <MetricRow title=\"Cart Additions\" icon={ShoppingCart} {...data.analytics.addToCarts!} />\r\n                <MetricRow title=\"Checkouts\" icon={ShoppingBag} {...data.analytics.checkouts!} />\r\n                <MetricRow title=\"Purchases\" icon={Tag} {...data.analytics.purchases!} />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Facebook Section */}\r\n          {data.facebook && (\r\n            <div>\r\n              <div className=\"flex items-center mb-3\">\r\n                <div className=\"h-4 w-1 bg-indigo-500 rounded-full mr-2.5\"></div>\r\n                <h3 className=\"text-sm font-semibold text-slate-800\">Meta</h3>\r\n              </div>\r\n              <div className=\"space-y-0.5\">\r\n                <MetricRow title=\"Meta Spend\" icon={Coins} {...data.facebook.spend!} />\r\n                <MetricRow title=\"Meta ROAS\" icon={TrendingUpDown} {...data.facebook.roas!} />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Google Section */}\r\n          {data.google && (\r\n            <div>\r\n              <div className=\"flex items-center mb-3\">\r\n                <div className=\"h-4 w-1 bg-emerald-500 rounded-full mr-2.5\"></div>\r\n                <h3 className=\"text-sm font-semibold text-slate-800\">Google</h3>\r\n              </div>\r\n              <div className=\"space-y-0.5\">\r\n                <MetricRow title=\"Google Spend\" icon={Coins} {...data.google.spend!} />\r\n                <MetricRow title=\"Google ROAS\" icon={TrendingUpDown} {...data.google.roas!} />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\ninterface Platform {\r\n  id: string;\r\n  name: string;\r\n  icon: React.ElementType;\r\n  connected: boolean;\r\n  accounts: string[];\r\n  primaryColor: string;\r\n}\r\n\r\ninterface PlatformConnectionsProps {\r\n  platforms: Platform[];\r\n}\r\n\r\nexport function PlatformConnections({ platforms }: PlatformConnectionsProps) {\r\n  // Function to get correct border color class based on platform and connection status\r\n  const getBorderColorClass = (platform:Platform) => {\r\n    if (!platform.connected) return 'border-gray-200';\r\n    \r\n    switch (platform.id) {\r\n      case 'shopify': return 'border-green-500';\r\n      case 'facebook': return 'border-blue-500';\r\n      case 'ga4': return 'border-yellow-500';\r\n      case 'google-ads': return 'border-indigo-500';\r\n      default: return 'border-gray-200';\r\n    }\r\n  };\r\n  \r\n  // Function to get correct background color class based on platform and connection status\r\n  const getBgColorClass = (platform:Platform) => {\r\n    if (!platform.connected) return 'bg-gray-50 hover:bg-gray-100';\r\n    \r\n    switch (platform.id) {\r\n      case 'shopify': return 'bg-green-500/5 hover:bg-green-500/10';\r\n      case 'facebook': return 'bg-blue-500/5 hover:bg-blue-500/10';\r\n      case 'ga4': return 'bg-yellow-500/5 hover:bg-yellow-500/10';\r\n      case 'google-ads': return 'bg-indigo-500/5 hover:bg-indigo-500/10';\r\n      default: return 'bg-gray-50 hover:bg-gray-100';\r\n    }\r\n  };\r\n  \r\n  // Function to get icon background color\r\n  const getIconBgColorClass = (platform:Platform) => {\r\n    if (!platform.connected) return 'bg-gray-100';\r\n    \r\n    switch (platform.id) {\r\n      case 'shopify': return 'bg-green-500/10';\r\n      case 'facebook': return 'bg-blue-500/10';\r\n      case 'ga4': return 'bg-yellow-500/10';\r\n      case 'google-ads': return 'bg-indigo-500/10';\r\n      default: return 'bg-gray-100';\r\n    }\r\n  };\r\n  \r\n  // Function to get icon text color\r\n  const getIconTextColorClass = (platform:Platform) => {\r\n    if (!platform.connected) return 'text-gray-400';\r\n    \r\n    switch (platform.id) {\r\n      case 'shopify': return 'text-green-500';\r\n      case 'facebook': return 'text-blue-500';\r\n      case 'ga4': return 'text-yellow-500';\r\n      case 'google-ads': return 'text-indigo-500';\r\n      default: return 'text-gray-400';\r\n    }\r\n  };\r\n  \r\n  // Function to get status text color\r\n  const getStatusTextColorClass = (platform:Platform) => {\r\n    if (!platform.connected) return 'text-gray-400';\r\n    \r\n    switch (platform.id) {\r\n      case 'shopify': return 'text-green-500';\r\n      case 'facebook': return 'text-blue-500';\r\n      case 'ga4': return 'text-yellow-500';\r\n      case 'google-ads': return 'text-indigo-500';\r\n      default: return 'text-gray-400';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full bg-white rounded-lg shadow-sm border-t-2 border-r-2 border-l-2\">\r\n      {/* Status Header */}\r\n      <div className=\"px-4 py-3 border-b border-gray-100\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-sm font-medium text-gray-700\">Platform Connections</h3>\r\n          <span className=\"text-xs bg-gray-50 text-gray-600 px-2 py-1 rounded-full\">\r\n            {platforms.filter(p => p.connected).length} of {platforms.length} Connected\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Segmented Bar */}\r\n      <div className=\"flex w-full\">\r\n        {platforms.map((platform) => (\r\n          <div\r\n            key={platform.id}\r\n            className={`\r\n              flex-1 py-3 px-4\r\n              ${getBgColorClass(platform)}\r\n              border ${getBorderColorClass(platform)}\r\n              transition-colors cursor-pointer relative group\r\n            `}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className={`p-1.5 rounded-full ${getIconBgColorClass(platform)}`}>\r\n                <platform.icon\r\n                  className={`h-4 w-4 ${getIconTextColorClass(platform)}`}\r\n                />\r\n              </div>\r\n              <div className=\"flex flex-col min-w-0\">\r\n                <span className={`text-xs font-medium truncate ${\r\n                  platform.connected ? 'text-gray-700' : 'text-gray-400'\r\n                }`}>\r\n                  {platform.name}\r\n                </span>\r\n                <div className=\"flex items-center gap-1\">\r\n                  {platform.connected ? (\r\n                    <CheckCircle2 className={`h-3 w-3 ${getStatusTextColorClass(platform)}`} />\r\n                  ) : (\r\n                    <XCircle className=\"h-3 w-3 text-gray-400\" />\r\n                  )}\r\n                  <span className={`text-[10px] truncate ${getStatusTextColorClass(platform)}`}>\r\n                    {platform.connected\r\n                      ? `${platform.accounts.length} ${platform.accounts.length === 1 ? 'account' : 'accounts'}`\r\n                      : 'Not connected'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SummaryDashboard: React.FC = () => {\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n  const brandId = useSelector((state: RootState) => state.brand.selectedBrandId)\r\n  const brands = useSelector((state: RootState) => state.brand.brands)\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId)\r\n\r\n  const fbAccounts = selectedBrand?.fbAdAccounts ?? []\r\n  const googleAccount = selectedBrand?.googleAdAccount ? [selectedBrand.googleAdAccount.clientId] : []\r\n  const ga4Accounts = selectedBrand?.ga4Account ? Object.values(selectedBrand.ga4Account) : []\r\n  const shopifyShopName = selectedBrand?.shopifyAccount?.shopName || \"\"\r\n  const shopifyAccount = shopifyShopName ? [shopifyShopName] : []\r\n\r\n  const userName = user?.username\r\n  const [loading, setLoading] = useState(false)\r\n  const [analytics, setAnalytics] = useState<Summary>()\r\n  const [facebookad, setFacebookad] = useState<Summary>()\r\n  const [googlead, setGooglead] = useState<Summary>()\r\n\r\n  const axiosInstance = createAxiosInstance()\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    setAnalytics(undefined);\r\n    setFacebookad(undefined);\r\n    setGooglead(undefined);\r\n\r\n    const requests = [\r\n      {\r\n        key: \"analytics\",\r\n        promise: axiosInstance.post(\r\n          `api/summary/analytics/${brandId}`,\r\n          { userId: user?.id },\r\n          { withCredentials: true }\r\n        ),\r\n      },\r\n      {\r\n        key: \"facebookAds\",\r\n        promise: axiosInstance.post(\r\n          `api/summary/facebook-ads/${brandId}`,\r\n          { userId: user?.id },\r\n          { withCredentials: true }\r\n        ),\r\n      },\r\n      {\r\n        key: \"googleAds\",\r\n        promise: axiosInstance.post(\r\n          `api/summary/google-ads/${brandId}`,\r\n          { userId: user?.id },\r\n          { withCredentials: true }\r\n        ),\r\n      },\r\n    ];\r\n\r\n    const results = await Promise.allSettled(requests.map((req) => req.promise));\r\n\r\n    results.forEach((result, index) => {\r\n      if (result.status === \"fulfilled\") {\r\n        if (requests[index].key === \"analytics\") setAnalytics(result.value.data);\r\n        if (requests[index].key === \"facebookAds\") setFacebookad(result.value.data);\r\n        if (requests[index].key === \"googleAds\") setGooglead(result.value.data);\r\n      } else {\r\n        console.error(`Error fetching ${requests[index].key} data:`, result.reason);\r\n      }\r\n    });\r\n\r\n    setLoading(false);\r\n  }, [brandId, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n    console.log(facebookad)\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000)\r\n    return () => clearInterval(intervalId)\r\n  }, [fetchData])\r\n\r\n  if (loading) {\r\n    return <DashboardSkeleton />\r\n  }\r\n\r\n  const periods: Period[] = [\"Today\", \"Last 7 Days\", \"Last 30 Days\"]\r\n\r\n  const platforms = [\r\n    {\r\n      id: 'shopify',\r\n      name: 'Shopify',\r\n      icon: ShopifyLogo,\r\n      connected: shopifyAccount.length > 0 ? true : false,\r\n      accounts: shopifyAccount,\r\n      primaryColor: 'green-500'\r\n    },\r\n    {\r\n      id: 'facebook',\r\n      name: 'Facebook Ads',\r\n      icon: FacebookLogo,\r\n      connected: fbAccounts.length > 0 ? true : false,\r\n      accounts: fbAccounts,\r\n      primaryColor: 'blue-500'\r\n    },\r\n    {\r\n      id: 'ga4',\r\n      name: 'GA4',\r\n      icon: Ga4Logo,\r\n      connected: ga4Accounts.length > 0 ? true : false,\r\n      accounts: ga4Accounts,\r\n      primaryColor: 'yellow-500'\r\n    },\r\n    {\r\n      id: 'google-ads',\r\n      name: 'Google Ads',\r\n      icon: GoogleLogo,\r\n      connected: googleAccount.length > 0 ? true : false,\r\n      accounts: googleAccount,\r\n      primaryColor: 'indigo-500'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 text-slate-900\">\r\n      <div className=\"mx-auto p-8\">\r\n        <div className=\"mb-8 space-y-4 animate-fade-up\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"h-12 w-1 bg-blue-500 rounded-full\" />\r\n              <div>\r\n                <h1 className=\"text-2xl lg:text-3xl font-bold tracking-tight\">Welcome Back, {userName}</h1>\r\n                <p className=\"text-slate-500 mt-1\">Here's your business performance overview</p>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              onClick={fetchData}\r\n              disabled={loading}\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              className=\"hover:bg-slate-100\"\r\n            >\r\n              <RefreshCw className={cn(\"h-4 w-4 \", loading && \"animate-spin\")} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n       <div className = \"mb-8\">\r\n        <PlatformConnections platforms={platforms} />\r\n        </div>\r\n        <div className=\"mb-8\">\r\n          <div className=\"grid gap-6 lg:grid-cols-2 xl:grid-cols-3\">\r\n            {periods.map((period) => (\r\n              <PeriodCard\r\n                key={period}\r\n                period={period}\r\n                data={{\r\n                  analytics: analytics?.summaries[period],\r\n                  facebook: facebookad?.summaries[period],\r\n                  google: googlead?.summaries[period],\r\n                }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SummaryDashboard","import React from \"react\";\r\nimport CollapsibleSidebar from \"@/pages/Dashboard/CollapsibleSidebar\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport Dashboard from \"./BrandSetUpDashboard\";\r\nimport SummaryDashboard from \"./dashboard\";\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\";\r\n// import LandingSlides from \"./components/LandingSlides\";\r\n\r\nconst GeneralDashboard: React.FC = () => {\r\n    const { user } = useUser();\r\n\r\n    return (\r\n        <div className=\"flex h-screen relative\"> \r\n            <CollapsibleSidebar />\r\n            <div className=\"flex-1 h-screen overflow-auto\">\r\n               \r\n                {user?.brands?.length === 0 ? <Dashboard /> : <SummaryDashboard />}\r\n            </div>\r\n            <HelpDeskModal />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GeneralDashboard;","import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\ninterface Brand {\r\n  _id: string;\r\n  name: string;\r\n  brandId: string;\r\n  fbAdAccounts?: [];\r\n  googleAdAccount?: string;\r\n  ga4Account?: {string : string};\r\n}\r\n\r\ninterface BrandContextType {\r\n  selectedBrandId: string | null;\r\n  setSelectedBrandId: (id: string | null) => void;\r\n  resetBrand: () => void;\r\n  brands: Brand[];\r\n  setBrands: (brands: Brand[]) => void;\r\n}\r\n\r\nconst BrandContext = createContext<BrandContextType | undefined>(undefined);\r\n\r\nexport const BrandProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [selectedBrandId, setSelectedBrandId] = useState<string | null>(null);\r\n  const [brands, setBrands] = useState<Brand[]>([]);\r\n\r\n  // Load brands from local storage when the component mounts\r\n  useEffect(() => {\r\n    const storedBrands = localStorage.getItem('brands');\r\n    const storedSelectedBrandId = localStorage.getItem('selectedBrandId');\r\n\r\n    if (storedBrands) {\r\n      setBrands(JSON.parse(storedBrands));\r\n    }\r\n    if (storedSelectedBrandId) {\r\n      setSelectedBrandId(storedSelectedBrandId);\r\n    }\r\n  }, []);\r\n\r\n  // Whenever brands state changes, save them to local storage\r\n  useEffect(() => {\r\n    if (brands.length > 0) {\r\n      localStorage.setItem('brands', JSON.stringify(brands));\r\n    }\r\n  }, [brands]);\r\n\r\n  useEffect(() => {\r\n    if (selectedBrandId) {\r\n      localStorage.setItem('selectedBrandId', selectedBrandId);\r\n    }\r\n  }, [selectedBrandId]);\r\n\r\n  const resetBrand = () => {\r\n    setSelectedBrandId(null);\r\n    localStorage.removeItem('selectedBrandId');\r\n  };\r\n\r\n  return (\r\n    <BrandContext.Provider value={{ selectedBrandId, setSelectedBrandId, resetBrand, brands, setBrands }}>\r\n      {children}\r\n    </BrandContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useBrand = () => {\r\n  const context = useContext(BrandContext);\r\n  if (context === undefined) {\r\n    throw new Error('useBrand must be used within a BrandProvider');\r\n  }\r\n  return context;\r\n};\r\n","import { useEffect, useMemo, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { format } from \"date-fns\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport CollapsibleSidebar from \"@/pages/Dashboard/CollapsibleSidebar\"\r\nimport { CalendarRange, ChevronDown,Maximize, Minimize } from \"lucide-react\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@radix-ui/react-tooltip\"\r\nimport React from \"react\"\r\nimport { Card, CardContent } from \"@/components/ui/card\"\r\nimport { ShopifyLogo } from \"../GeneralisedDashboard/components/OtherPlatformModalContent\"\r\nimport { FacebookLogo, GoogleLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\"\r\nimport { useSelector } from \"react-redux\"\r\nimport type { RootState } from \"@/store\"\r\nimport Header from \"@/components/dashboard_component/Header\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\"\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\"\r\n\r\ninterface DailyMetric {\r\n    _id: string\r\n    date: string\r\n    metaSpend: number\r\n    metaROAS: number\r\n    googleSpend: number\r\n    googleROAS: number\r\n    totalSpend: number\r\n    adSales: number\r\n    grossROI: number\r\n    shopifySales: number\r\n    totalSales: number\r\n    refundAmount: number\r\n    netROI: number\r\n    metaSales?: number\r\n    googleSales?: number\r\n    ROI?: number\r\n}\r\n\r\ninterface MonthlyAggregate {\r\n    _id: {\r\n        month: number\r\n        year: number\r\n    }\r\n    metaSpend: number\r\n    metaROAS: number\r\n    googleSpend: number\r\n    googleROAS: number\r\n    totalSpend: number\r\n    grossROI: number\r\n    shopifySales: number\r\n    totalSales: number\r\n    refundAmount: number\r\n    netROI: number\r\n    dailyMetrics: DailyMetric[]\r\n    month: number\r\n    year: number\r\n    metaSales?: number\r\n    googleSales?: number\r\n    totalAdSales?: number\r\n    ROI?: number\r\n}\r\n\r\nfunction TooltipHeader({\r\n    title,\r\n    tooltip,\r\n    colSpan = 1,\r\n    rowSpan,\r\n    isSubHeader = false,\r\n}: {\r\n    title: string\r\n    tooltip: string\r\n    colSpan?: number\r\n    rowSpan?: number\r\n    isSubHeader?: boolean\r\n}) {\r\n    return (\r\n        <th\r\n            className={`\r\n                ${isSubHeader ? 'text-xs font-medium' : 'font-semibold text-sm'}\r\n                text-center whitespace-nowrap border-r border-gray-400 p-2\r\n                ${isSubHeader ? 'bg-gradient-to-b from-gray-100 to-gray-200' : 'bg-gradient-to-r from-gray-100 to-gray-200'}\r\n                relative overflow-hidden\r\n                ${!isSubHeader ? 'after:content-[\"\"] after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-blue-500/20' : ''}\r\n            `}\r\n            colSpan={colSpan}\r\n            rowSpan={rowSpan}\r\n        >\r\n            <TooltipProvider>\r\n                <Tooltip>\r\n                    <TooltipTrigger asChild>\r\n                        <span className=\"flex items-center justify-center gap-1 cursor-help\">{title}</span>\r\n                    </TooltipTrigger>\r\n                    <TooltipContent className=\"mb-3\">\r\n                        <div className=\"text-gray-700 bg-white p-2 rounded-md text-sm border shadow-lg max-w-xs\">{tooltip}</div>\r\n                    </TooltipContent>\r\n                </Tooltip>\r\n            </TooltipProvider>\r\n        </th>\r\n    )\r\n}\r\n\r\nexport const ExcelMetricsPage: React.FC = () => {\r\n    const [metricsData, setMetricsData] = useState<MonthlyAggregate[]>([])\r\n    const [loading, setLoading] = useState<boolean>(true)\r\n    const [error, setError] = useState<string | null>(null)\r\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false)\r\n    const dateFrom = useSelector((state: RootState) => state.date.from)\r\n    const dateTo = useSelector((state: RootState) => state.date.to)\r\n    const [expandedMonths, setExpandedMonths] = useState<string[]>([])\r\n    const { brandId } = useParams()\r\n\r\n    const date = useMemo(\r\n        () => ({\r\n            from: dateFrom,\r\n            to: dateTo,\r\n        }),\r\n        [dateFrom, dateTo],\r\n    )\r\n\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\"\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\"\r\n\r\n    const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n\r\n    const toggleFullScreen = () => {\r\n        setIsFullScreen(!isFullScreen)\r\n    }\r\n\r\n    const getTableHeight = () => {\r\n        if (isFullScreen) {\r\n            return 'max-h-[calc(100vh-80px)]'\r\n        }\r\n        return 'max-h-[calc(100vh-200px)]'\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setLoading(true)\r\n            setError(null)\r\n            try {\r\n                const queryParams: Record<string, string> = {}\r\n\r\n                if (startDate) queryParams.startDate = startDate\r\n                if (endDate) queryParams.endDate = endDate\r\n\r\n                const reportResponse = await axios.get(`${baseURL}/api/report/${brandId}`, {\r\n                    params: queryParams,\r\n                    withCredentials: true,\r\n                })\r\n                const metricsData: MonthlyAggregate[] = reportResponse.data.data\r\n                setMetricsData(metricsData)\r\n            } catch (err) {\r\n                console.error(err)\r\n                setError(\"Failed to fetch data. Please try again later.\")\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        fetchData()\r\n    }, [brandId, startDate, endDate, baseURL])\r\n\r\n    const toggleMonth = (monthYear: string) => {\r\n        setExpandedMonths((prev) => \r\n            prev.includes(monthYear) \r\n                ? prev.filter((m) => m !== monthYear) \r\n                : [...prev, monthYear]\r\n        )\r\n    }\r\n\r\n    const formatCurrency = (value: number) => {\r\n        return new Intl.NumberFormat(\"en-IN\", { \r\n            style: \"currency\", \r\n            currency: \"INR\" \r\n        }).format(value)\r\n    }\r\n\r\n    const formatPercentage = (value: number) => {\r\n        return `${value.toFixed(2)}`\r\n    }\r\n\r\n    const processedData = useMemo(() => {\r\n        const safeDivide = (numerator: number, denominator: number) => \r\n            (denominator ? numerator / denominator : 0)\r\n\r\n        return metricsData.map((monthData: MonthlyAggregate) => {\r\n            const processedDailyMetrics = monthData.dailyMetrics.map((daily) => ({\r\n                ...daily,\r\n                metaSales: daily.metaSpend * (daily.metaROAS || 0),\r\n                googleSales: daily.googleSpend * (daily.googleROAS || 0),\r\n                adSales: (daily.totalSpend * daily.grossROI) || 0,\r\n                ROI: safeDivide(daily.totalSales, daily.totalSpend)\r\n            }))\r\n\r\n            const metaSales = processedDailyMetrics.reduce((sum, daily) => sum + daily.metaSales!, 0)\r\n            const googleSales = processedDailyMetrics.reduce((sum, daily) => sum + daily.googleSales!, 0)\r\n            const totalAdSales = (metaSales + googleSales) || 0\r\n\r\n            return {\r\n                ...monthData,\r\n                metaSales,\r\n                googleSales,\r\n                totalAdSales,\r\n                metaROAS: safeDivide(metaSales, monthData.metaSpend),\r\n                googleROAS: safeDivide(googleSales, monthData.googleSpend),\r\n                grossROI: safeDivide(totalAdSales, monthData.totalSpend),\r\n                netROI: safeDivide(monthData.shopifySales, monthData.totalSpend),\r\n                ROI: safeDivide(monthData.totalSales, monthData.totalSpend),\r\n                dailyMetrics: processedDailyMetrics,\r\n            }\r\n        })\r\n    }, [metricsData])\r\n\r\nreturn (\r\n    <div className=\"flex h-screen\">\r\n        <CollapsibleSidebar />\r\n        <div className=\"flex-1 h-screen overflow-hidden bg-gray-100\">\r\n            <Header title=\"Marketing Insights Tracker\" Icon={CalendarRange} showDatePicker={true} />\r\n\r\n            <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : 'm-6'}`}>\r\n                <CardContent>\r\n                    <div className=\"flex flex-row items-center justify-between mb-3\">\r\n                        <div className=\"flex flex-row items-center gap-4\">\r\n                            <h2 className=\"text-lg font-semibold text-gray-900 \">\r\n                                Key Performance Metrics by Month with Daily Drill-Down\r\n                            </h2>\r\n                            <div className=\"flex flex-row gap-2\">\r\n                                <FacebookLogo width={20} height={20} />\r\n                                <GoogleLogo width={20} height={20} />\r\n                                <ShopifyLogo width={20} height={20} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-row items-center gap-3\">\r\n                            {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                <DatePickerWithRange\r\n                                    defaultDate={{\r\n                                        from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                                        to: new Date()\r\n                                    }}\r\n                                />\r\n                            </div>}\r\n                            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {loading ? (\r\n                        <div className=\"flex items-center justify-center h-[calc(100vh-300px)]\">\r\n                            <div className=\"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-600\"></div>\r\n                        </div>\r\n                    ) : error ? (\r\n                        <div className=\"rounded-lg bg-red-50 p-4 text-red-600 border border-red-200\">{error}</div>\r\n                    ) : (\r\n                        <div className=\"border rounded-lg shadow-sm bg-white overflow-hidden\">\r\n                            <div className={`${getTableHeight()}  overflow-auto`}>\r\n                                <table className={`w-full border-collapse`}>\r\n                                    <thead className=\"sticky top-0 z-20 text-sm\">\r\n                                        <tr>\r\n                                            <th className=\"w-3 bg-gradient-to-r from-gray-100 to-gray-200 border-r border-gray-400 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-blue-500/20\" rowSpan={2} />\r\n                                            <TooltipHeader title=\"Date\" tooltip=\"Date\" rowSpan={2} />\r\n                                            <TooltipHeader title=\"Meta (Facebook & Instagram Ads)\" tooltip=\"Meta Metrics\" colSpan={3} />\r\n                                            <TooltipHeader title=\"Google Ads\" tooltip=\"Google Metrics\" colSpan={3} />\r\n                                            <TooltipHeader title=\"Marketing Performance (Platform-Reported)\" tooltip=\"Marketing Performance (Platform-Reported)\" colSpan={3} />\r\n                                            <TooltipHeader title=\"Shopify (Actual Sales Data)\" tooltip=\"Shopify Metrics\" colSpan={5} />\r\n                                        </tr>\r\n                                        <tr>\r\n\r\n                                            <TooltipHeader title=\"Spend\" tooltip=\"Meta Spent\" isSubHeader />\r\n                                            <TooltipHeader title=\"Sales\" tooltip=\"Meta Sales = Meta Spent * Meta ROAS\" isSubHeader />\r\n                                            <TooltipHeader title=\"ROAS\" tooltip=\"Meta ROAS\" isSubHeader />\r\n                                            <TooltipHeader title=\"Spend\" tooltip=\"Google Spent\" isSubHeader />\r\n                                            <TooltipHeader title=\"Sales\" tooltip=\"Google Sales = Google Spent * Google ROAS\" isSubHeader />\r\n                                            <TooltipHeader title=\"ROAS\" tooltip=\"Google ROAS\" isSubHeader />\r\n\r\n                                            <TooltipHeader\r\n                                                title=\"Spend\"\r\n                                                tooltip=\"Total Spent = Meta Spent + Google Spent\"\r\n                                                isSubHeader\r\n                                            />\r\n                                            <TooltipHeader\r\n                                                title=\"Sales\"\r\n                                                tooltip=\"ROI = (MetaSales + GoogleSales)\"\r\n                                                isSubHeader\r\n                                            />\r\n                                            <TooltipHeader\r\n                                                title=\"ROI\"\r\n                                                tooltip=\"ROI = (MetaSales + GoogleSales)/ Total Spent\"\r\n                                                isSubHeader\r\n                                            />\r\n                                            <TooltipHeader title=\"Net Sales\" tooltip=\"Net Sales = Gross Sales - Discount\" isSubHeader />\r\n                                            <TooltipHeader title=\"Net ROI\" tooltip=\"Total Sales / Total Spend\" isSubHeader />\r\n                                            <TooltipHeader title=\"Returns\" tooltip=\"Returns\" isSubHeader />\r\n                                            <TooltipHeader\r\n                                                title=\"Total Sales\"\r\n                                                tooltip=\"Total Sales = Net Sales - Returns\"\r\n                                                isSubHeader\r\n                                            />\r\n                                            <TooltipHeader title=\"Final ROI\" tooltip=\"Final ROI = Total Sales / Total Spend\" isSubHeader />\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {processedData.map((monthData: any) => {\r\n                                            const monthYear = `${monthData.year}-${monthData.month.toString().padStart(2, \"0\")}`\r\n                                            const isExpanded = expandedMonths.includes(monthYear)\r\n                                            return (\r\n                                                <React.Fragment key={monthYear}>\r\n                                                    <tr\r\n                                                        className={`\r\n                                                        ${isExpanded ? 'bg-blue-100/30 '\r\n                                                                : 'hover:bg-gradient-to-r hover:from-gray-50 hover:to-transparent'} \r\n                                                        border-b border-gray-200 cursor-pointer \r\n                                                        transition-colors text-sm \r\n                                                    `}\r\n                                                        onClick={() => toggleMonth(monthYear)}\r\n                                                    >\r\n                                                        <td className=\"w-3 px-4 py-2\">\r\n                                                            <div className={`\r\n                          w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center\r\n                          transition-all duration-300 transform\r\n                          ${isExpanded ? 'rotate-180 bg-blue-500' : 'hover:bg-blue-200'}\r\n                        `}>\r\n                                                                <ChevronDown className={`w-4 h-4 ${isExpanded ? 'text-white' : 'text-blue-500'}`} />\r\n                                                            </div>\r\n\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-left font-medium whitespace-nowrap\">\r\n                                                            {format(new Date(monthData.year, monthData.month - 1), \"MMM yyyy\")}\r\n                                                        </td>\r\n\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.metaSpend)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.metaSales)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatPercentage(monthData.metaROAS)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.googleSpend)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.googleSales)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatPercentage(monthData.googleROAS)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.totalSpend )}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.totalSpend * monthData.grossROI) || 0}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatPercentage(monthData.grossROI)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.totalSales)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatPercentage(monthData.ROI)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.refundAmount)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatCurrency(monthData.shopifySales)}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-3 text-right font-medium text-gray-700\">\r\n                                                            {formatPercentage(monthData.netROI)}\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                    {isExpanded &&\r\n                                                        monthData.dailyMetrics.map((daily: any) => (\r\n                                                            <tr\r\n                                                                key={daily._id}\r\n                                                                className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\"\r\n                                                            >\r\n                                                                <td className=\"w-5 px-4 py-1.5\" />\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-left text-gray-600\">\r\n                                                                    {format(new Date(daily.date), \"dd/MM/yyyy\")}\r\n                                                                </td>\r\n\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right text-gray-700\">\r\n                                                                    {formatCurrency(daily.metaSpend)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right text-gray-700\">\r\n                                                                    {formatCurrency(daily.metaSales)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right  text-gray-700\">\r\n                                                                    {formatPercentage(daily.metaROAS)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right  text-gray-700\">\r\n                                                                    {formatCurrency(daily.googleSpend)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right  text-gray-700\">\r\n                                                                    {formatCurrency(daily.googleSales)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right  text-gray-700\">\r\n                                                                    {formatPercentage(daily.googleROAS)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right  text-gray-700\">\r\n                                                                    {formatCurrency(daily.totalSpend)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right  text-gray-700\">\r\n                                                                    {formatCurrency(daily.adSales)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right  text-gray-700\">\r\n                                                                    {formatPercentage(daily.grossROI)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right text-gray-700\">\r\n                                                                    {formatCurrency(daily.totalSales)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right text-gray-700\">\r\n                                                                    {formatPercentage(daily.ROI)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right text-gray-700\">\r\n                                                                    {formatCurrency(daily.refundAmount)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right text-gray-700\">\r\n                                                                    {formatCurrency(daily.shopifySales)}\r\n                                                                </td>\r\n                                                                <td className=\"px-4 py-1.5 text-xs text-right text-gray-700\">\r\n                                                                    {formatPercentage(daily.netROI)}\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        ))}\r\n                                                </React.Fragment>\r\n                                            )\r\n                                        })}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n        <HelpDeskModal />\r\n    </div>\r\n)\r\n}\r\n\r\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"@radix-ui/react-icons\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDownIcon className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUpIcon className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDownIcon className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <CheckIcon className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n","import { useState, useEffect, useCallback } from 'react'\r\nimport { PlusCircle, Edit2, X, Trash2 } from 'lucide-react'\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport { Calendar } from \"@/components/ui/calendar\"\r\nimport { format, endOfMonth } from \"date-fns\"\r\nimport { Bar, BarChart, ResponsiveContainer, XAxis, YAxis, Tooltip } from 'recharts'\r\nimport { cn } from \"@/lib/utils\"\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '@/store'\r\n\r\n// Define types for better type safety\r\ninterface MetricsData {\r\n  spend: number;\r\n  Revenue: number;\r\n  purchase_roas: string;\r\n  individualAccounts?: Array<{\r\n    accountId: string;\r\n    spend: number;\r\n    purchase_roas: string;\r\n    Revenue: string | number;\r\n  }>;\r\n}\r\n\r\ninterface BrandTarget {\r\n  brandId: string;\r\n  name: string;\r\n  source: string;\r\n  targetSales: number;\r\n  targetSpend: number;\r\n  targetROAS: number;\r\n  targetDate: Date;\r\n}\r\n\r\nexport default function BrandPerformanceDashboard() {\r\n  const brands = useSelector((state: RootState) => state.brand.brands)\r\n  const [selectedBrands, setSelectedBrands] = useState<Array<BrandTarget>>([])\r\n  const [newBrand, setNewBrand] = useState<BrandTarget>({\r\n    brandId: '',\r\n    name: '',\r\n    source: '',\r\n    targetSales: 0,\r\n    targetSpend: 0,\r\n    targetROAS: 0,\r\n    targetDate: endOfMonth(new Date())\r\n  })\r\n  const [editingBrand, setEditingBrand] = useState<string | null>(null)\r\n  const [editData, setEditData] = useState<BrandTarget | null>(null)\r\n  const [achievedMetrics, setAchievedMetrics] = useState<{ [key: string]: MetricsData }>({})\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const userId = user?.id;\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const getMetaMetrics = useCallback(async (brandId: string) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `${baseURL}/api/performance/metaMetrics/${brandId}`, { userId },\r\n        { withCredentials: true }\r\n      );\r\n      \r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching metrics data:', error);\r\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n        alert('Your session has expired. Please log in again.');\r\n        navigate('/');\r\n      }\r\n      return { success: false, data: { spend: 0, Revenue: 0, purchase_roas: \"0.00\" } };\r\n    }\r\n  }, [baseURL, userId, navigate]);\r\n  \r\n  const fetchMetricsData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const metricsData: { [key: string]: MetricsData } = {};\r\n      await Promise.all(\r\n        selectedBrands.map(async (brand) => {\r\n          const response = await getMetaMetrics(brand.brandId);\r\n          if (response.success) {\r\n            metricsData[brand.brandId] = response.data;\r\n          }\r\n        })\r\n      );\r\n      setAchievedMetrics(metricsData);\r\n    } catch (error) {\r\n      console.error('Error fetching metrics data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [selectedBrands, getMetaMetrics]);\r\n  \r\n  useEffect(() => {\r\n    if (selectedBrands.length > 0) {\r\n      fetchMetricsData();\r\n    }\r\n  }, [fetchMetricsData, selectedBrands]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target\r\n    setNewBrand(prev => ({ ...prev, [name]: ['brandId', 'name'].includes(name) ? value : Number(value) }))\r\n  }\r\n\r\n  const handleSourceChange = (value: string) => {\r\n    setNewBrand(prev => ({ ...prev, source: value }))\r\n  }\r\n\r\n  const handleAddBrand = async () => {\r\n    const brandToAdd = brands.find(b => String(b._id) === String(newBrand.brandId));\r\n\r\n    if (brandToAdd) {\r\n      try {\r\n        const newBrandTarget = {\r\n          brandId: brandToAdd._id,\r\n          name: brandToAdd.name,\r\n          source: newBrand.source,\r\n          targetSales: newBrand.targetSales,\r\n          targetSpend: newBrand.targetSpend,\r\n          targetROAS: newBrand.targetROAS,\r\n          targetDate: newBrand.targetDate,\r\n        };\r\n\r\n        const response = await axios.post(`${baseURL}/api/performance/addTarget`, newBrandTarget, { withCredentials: true });\r\n\r\n        setSelectedBrands(prev => [...prev, response.data]);\r\n        setNewBrand({\r\n          brandId: '',\r\n          name: '',\r\n          source: '',\r\n          targetSales: 0,\r\n          targetSpend: 0,\r\n          targetROAS: 0,\r\n          targetDate: endOfMonth(new Date())\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error adding brand:', error);\r\n      }\r\n    } else {\r\n      console.log(\"Brand not found\");\r\n    }\r\n  };\r\n\r\n  const handleEdit = (brandId: string) => {\r\n    const brandToEdit = selectedBrands.find(b => b.brandId === brandId)\r\n    if (brandToEdit) {\r\n      setEditingBrand(brandId)\r\n      setEditData({ ...brandToEdit, targetDate: new Date(brandToEdit.targetDate) })\r\n    }\r\n  }\r\n\r\n  const handleSaveEdit = async (brandId: string) => {\r\n    if (editData) {\r\n      try {\r\n        const response = await axios.patch(`${baseURL}/api/performance/updateTarget/${brandId}`, editData, { withCredentials: true });\r\n        setSelectedBrands(prev => prev.map(brand =>\r\n          brand.brandId === brandId ? { ...brand, ...response.data } : brand\r\n        ));\r\n\r\n        setEditingBrand(null);\r\n        setEditData(null);\r\n\r\n        alert('Brand updated successfully!');\r\n      } catch (error) {\r\n        console.error('Error saving brand edit:', error);\r\n        alert('Failed to update brand');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingBrand(null)\r\n    setEditData(null)\r\n  }\r\n\r\n  const handleDelete = async (brandId: string) => {\r\n    try {\r\n      await axios.delete(`${baseURL}/api/performance/deleteTarget/${brandId}`, { withCredentials: true });\r\n      setSelectedBrands(prev => prev.filter(brand => brand.brandId !== brandId));\r\n      console.log('Brand deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting brand:', error);\r\n    }\r\n  };\r\n\r\n  const Loader = () => (\r\n    <div className=\"animate-spin rounded-full h-5 w-5 border-t-2 border-blue-500\"></div>\r\n  )\r\n\r\n  const calculateMetrics = (brand: BrandTarget) => {\r\n    const metrics = achievedMetrics[brand.brandId] || { spend: 0, Revenue: 0, purchase_roas: \"0.00\" }; \r\n    // Calculate spent metrics\r\n    const achievedSpend = metrics.spend || 0;\r\n    // Calculate sales metrics\r\n    const achievedSales = Number(metrics.Revenue) || 0;\r\n    const remainingSales = Math.max(brand.targetSales - achievedSales, 0).toFixed(2);\r\n    \r\n    // Calculate ROAS\r\n    const achievedROAS = parseFloat(metrics.purchase_roas) || 0;\r\n    \r\n    // Calculate days and per-day requirements\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const targetDate = new Date(brand.targetDate);\r\n    targetDate.setHours(0, 0, 0, 0);\r\n    const remainingDays = Math.max(Math.ceil((targetDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24)), 0);\r\n    \r\n    const requiredSalesPerDay = remainingDays > 0 ? parseFloat(remainingSales) / remainingDays : 0;\r\n\r\n    return {\r\n      achievedSales,\r\n      remainingSales,\r\n      achievedSpend,\r\n      achievedROAS,\r\n      remainingDays,\r\n      requiredSalesPerDay,\r\n    }\r\n  }\r\n\r\n  const chartData = selectedBrands.map(brand => {\r\n    const { achievedSales, remainingSales } = calculateMetrics(brand);\r\n    return {\r\n      name: brand.name,\r\n      Achieved: achievedSales,\r\n      Remaining: remainingSales\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchBrandTargets = async () => {\r\n      try {\r\n        const response = await axios.get(`${baseURL}/api/performance/brandTarget`, { withCredentials: true });\r\n        // Ensure targetDate is a Date object\r\n        const brands = response.data.map((brand: any) => ({\r\n          ...brand,\r\n          targetDate: new Date(brand.targetDate)\r\n        }));\r\n        setSelectedBrands(brands);\r\n      } catch (error) {\r\n        console.error('Error fetching brands:', error);\r\n      }\r\n    };\r\n\r\n    fetchBrandTargets();\r\n  }, [baseURL]);\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen\">\r\n      <nav className=\"bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\r\n          <h1 className=\"text-2xl font-bold\">Brands Performance Metrics</h1>\r\n        </div>\r\n      </nav>\r\n      <div className='container mx-auto p-4'>\r\n        <Card className=\"mb-4\">\r\n          <CardHeader>\r\n            <CardTitle>Add New Brand Target</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4\">\r\n              <div>\r\n                <Label htmlFor=\"brandName\">Brand Name</Label>\r\n                <Select onValueChange={(value) => {\r\n                  const brand = brands.find(b => b._id === value);\r\n                  setNewBrand(prev => ({ \r\n                    ...prev, \r\n                    brandId: value,\r\n                    name: brand?.name || ''\r\n                  }));\r\n                }}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select brand\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {brands.map(brand => (\r\n                      <SelectItem key={brand._id} value={brand._id}>\r\n                        {brand.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"source\">Source</Label>\r\n                <Select onValueChange={handleSourceChange} value={newBrand.source}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select source\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Meta & Google\">Meta & Google</SelectItem>\r\n                    <SelectItem value=\"Meta\">Meta</SelectItem>\r\n                    <SelectItem value=\"Google\">Google</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"targetSales\">Target Sales</Label>\r\n                <Input \r\n                  id=\"targetSales\" \r\n                  name=\"targetSales\" \r\n                  type=\"number\"\r\n                  value={newBrand.targetSales} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"Enter target sales\" \r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"targetSpend\">Target Spend</Label>\r\n                <Input \r\n                  id=\"targetSpend\" \r\n                  name=\"targetSpend\" \r\n                  type=\"number\"\r\n                  value={newBrand.targetSpend} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"Enter target spend\" \r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"targetROAS\">Target ROAS</Label>\r\n                <Input \r\n                  id=\"targetROAS\" \r\n                  name=\"targetROAS\" \r\n                  type=\"number\"\r\n                  value={newBrand.targetROAS} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"Enter target ROAS\" \r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Target Date</Label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button\r\n                      variant={\"outline\"}\r\n                      className={cn(\r\n                        \"w-full justify-start text-left font-normal\",\r\n                        !newBrand.targetDate && \"text-muted-foreground\"\r\n                      )}\r\n                    >\r\n                      {newBrand.targetDate ? format(newBrand.targetDate, \"PPP\") : <span>Pick a date</span>}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0\">\r\n                    <Calendar\r\n                      mode=\"single\"\r\n                      selected={newBrand.targetDate}\r\n                      onSelect={(date) => date && setNewBrand(prev => ({ ...prev, targetDate: date }))}\r\n                      initialFocus\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n              </div>\r\n              <div className=\"flex items-end\">\r\n                <Button onClick={handleAddBrand} className=\"w-full\">\r\n                  <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Brand Target\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className='mb-4'>\r\n          <CardHeader>\r\n            <CardTitle>Brand Performance Table</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Brand</TableHead>\r\n                    <TableHead>Source</TableHead>\r\n                    <TableHead>Month</TableHead>\r\n                    <TableHead>Target Spend</TableHead>\r\n                    <TableHead>Target Sales</TableHead>\r\n                    <TableHead>Target ROAS</TableHead>\r\n                    <TableHead>Achieved Spend</TableHead>\r\n                    <TableHead>Achieved Sales</TableHead>\r\n                    <TableHead>Achieved ROAS</TableHead>\r\n                    <TableHead>Remaining Sales</TableHead>\r\n                    <TableHead>Remaining Days</TableHead>\r\n                    <TableHead>Required Sales/Day</TableHead>\r\n                    <TableHead>Actions</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {selectedBrands.map(brand => {\r\n                    const { \r\n                      achievedSales, \r\n                      remainingSales, \r\n                      achievedSpend, \r\n                      achievedROAS, \r\n                      remainingDays, \r\n                      requiredSalesPerDay \r\n                    } = calculateMetrics(brand);\r\n                    \r\n                    const isEditing = editingBrand === brand.brandId;\r\n                    \r\n                    return (\r\n                      <TableRow key={brand.brandId}>\r\n                        <TableCell className=\"font-bold text-sm\">{brand.name}</TableCell>\r\n                        <TableCell>\r\n                          {isEditing ? (\r\n                            <Select\r\n                              onValueChange={(value) => setEditData(prev => prev ? { ...prev, source: value } : null)}\r\n                              defaultValue={editData?.source}\r\n                            >\r\n                              <SelectTrigger>\r\n                                <SelectValue placeholder={brand.source} />\r\n                              </SelectTrigger>\r\n                              <SelectContent>\r\n                                <SelectItem value=\"Meta & Google\">Meta & Google</SelectItem>\r\n                                <SelectItem value=\"Meta\">Meta</SelectItem>\r\n                                <SelectItem value=\"Google\">Google</SelectItem>\r\n                              </SelectContent>\r\n                            </Select>\r\n                          ) : (\r\n                            brand.source\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {isEditing ? (\r\n                            <Popover>\r\n                              <PopoverTrigger asChild>\r\n                                <Button variant={\"outline\"}>\r\n                                  {editData?.targetDate ? format(editData.targetDate, \"PPP\") : <span>Pick a date</span>}\r\n                                </Button>\r\n                              </PopoverTrigger>\r\n                              <PopoverContent className=\"w-auto p-0\">\r\n                                <Calendar\r\n                                  mode=\"single\"\r\n                                  selected={editData?.targetDate}\r\n                                  onSelect={(date) => date && setEditData(prev => prev ? { ...prev, targetDate: date } : null)}\r\n                                  initialFocus\r\n                                />\r\n                              </PopoverContent>\r\n                            </Popover>\r\n                          ) : (\r\n                            format(new Date(brand.targetDate), \"MMM yyyy\") \r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {isEditing ? (\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={editData?.targetSpend}\r\n                              onChange={(e) => setEditData(prev => prev ? { ...prev, targetSpend: Number(e.target.value) } : null)}\r\n                            />\r\n                          ) : (\r\n                            `₹${brand.targetSpend.toLocaleString()}`\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {isEditing ? (\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={editData?.targetSales}\r\n                              onChange={(e) => setEditData(prev => prev ? { ...prev, targetSales: Number(e.target.value) } : null)}\r\n                            />\r\n                          ) : (\r\n                            `₹${brand.targetSales.toLocaleString()}`\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {isEditing ? (\r\n                            <Input\r\n                              type=\"number\"\r\n                              step=\"0.01\"\r\n                              value={editData?.targetROAS}\r\n                              onChange={(e) => setEditData(prev => prev ? { ...prev, targetROAS: Number(e.target.value) } : null)}\r\n                            />\r\n                          ) : (\r\n                            brand.targetROAS.toFixed(2)\r\n                          )}\r\n                        </TableCell>\r\n                       \r\n                        <TableCell>{isLoading ? <Loader /> : `₹${achievedSpend.toLocaleString('en-IN')}`}</TableCell>\r\n                        <TableCell>{isLoading ? <Loader /> : `₹${achievedSales.toLocaleString('en-IN')}`}</TableCell>\r\n                        <TableCell>{isLoading ? <Loader /> : achievedROAS.toFixed(2)}</TableCell>\r\n                        <TableCell>{new Intl.NumberFormat('en-IN', { maximumFractionDigits: 2 }).format(Number(remainingSales))}</TableCell>\r\n                        <TableCell>{remainingDays}</TableCell>\r\n                        <TableCell>₹{new Intl.NumberFormat('en-IN', { maximumFractionDigits: 2 }).format(requiredSalesPerDay)}</TableCell>\r\n                        <TableCell>\r\n                          {isEditing ? (\r\n                            <>\r\n                              <Button onClick={() => handleSaveEdit(brand.brandId)} className=\"mr-2\">Save</Button>\r\n                              <Button onClick={handleCancelEdit} variant=\"outline\"><X className=\"h-4 w-4\" /></Button>\r\n                            </>\r\n                          ) : (\r\n                            <div className='flex flex-row gap-1'>\r\n                              <Button size={\"sm\"} onClick={() => handleEdit(brand.brandId)} ><Edit2 className=\"h-2 w-2\" /></Button>\r\n                              <Button size={\"sm\"} onClick={() => handleDelete(brand.brandId)} variant=\"destructive\"><Trash2 className=\"h-2 w-2\" /></Button>\r\n                            </div>\r\n                          )}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    )\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Sales Progress</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart data={chartData}>\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value) => `₹${Number(value).toLocaleString()}`} />\r\n                <Bar dataKey=\"Achieved\" stackId=\"a\" fill=\"#4ade80\" />\r\n                <Bar dataKey=\"Remaining\" stackId=\"a\" fill=\"#f87171\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport BrandPerformanceDashboard from \"./Dashboard\";\r\nimport CollapsibleSidebar from \"@/pages/Dashboard/CollapsibleSidebar\";\r\n const PerformanceDashboard : React.FC=()=>{\r\n    return (\r\n        <div className=\"flex h-screen\"> \r\n        <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <BrandPerformanceDashboard />\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\nexport default PerformanceDashboard;","import React, { useEffect, useRef, useState, useCallback, useMemo } from 'react'\r\nimport { ArrowUp, ArrowDown, ArrowUpDown, Filter, ChevronLeft, X, CheckCircle, AlertCircle, RefreshCw, BarChart2, Tag, Layers, Package, ChevronDown, ChevronRight } from 'lucide-react';\r\nimport { useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { Skeleton } from '@/components/ui/skeleton'\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@radix-ui/react-tooltip'\r\nimport { GoogleLogo } from '@/pages/AnalyticsDashboard/AdAccountsMetricsCard'\r\nimport { Button } from '@/components/ui/button'\r\nimport { format } from \"date-fns\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\n\r\ntype Metrics = {\r\n    products: number\r\n    totalCost: number\r\n    ROAS: number,\r\n    conversions: number,\r\n    ConversionValue: number,\r\n    ConversionRate: number,\r\n    totalClicks: number,\r\n    ctr: number,\r\n    AvgCPC: number,\r\n}\r\n\r\ntype Category = {\r\n    name: string\r\n    metrics: Metrics\r\n    subcategories: Category[]\r\n}\r\n\r\ntype ColumnDef = {\r\n    id: string\r\n    header: string\r\n    accessorKey: string\r\n    cell: (value: any) => React.ReactNode\r\n}\r\n\r\ntype TabConfig = {\r\n    id: string\r\n    label: string\r\n    apiEndpoint: string\r\n    columns: ColumnDef[]\r\n    data: any[]\r\n    lastUpdated: number | null,\r\n}\r\n\r\nexport default function ProductTab() {\r\n    const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n    const { brandId } = useParams()\r\n\r\n    const [tabs, setTabs] = useState<TabConfig[]>([\r\n        { id: 'products', label: 'Products', apiEndpoint: `${baseURL}/api/segment/productMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n        { id: 'categories', label: 'Categories', apiEndpoint: `${baseURL}/api/segment/categoryMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n        { id: 'brands', label: 'Brands', apiEndpoint: `${baseURL}/api/segment/brandMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n        { id: 'productTypes', label: 'Product types', apiEndpoint: `${baseURL}/api/segment/typeMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n    ])\r\n    const [activeTab, setActiveTab] = useState(tabs[0].id)\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set())\r\n    const [loading, setLoading] = useState(false)\r\n    const [filterApplied, setFilterApplied] = useState(false);\r\n    const rowsPerPage = 100\r\n    const [filterData, setFilterData] = useState<any>({});\r\n    const cacheRef = useRef<{ [key: string]: { data: any; timestamp: number } }>({});\r\n    const POLL_INTERVAL = 5 * 60 * 1000;\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    // Sorting state\r\n    const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n    const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n\r\n    const handleTabChange = (newTabId: string) => {\r\n        setActiveTab(newTabId);\r\n        setCurrentPage(1);\r\n        setExpandedCategories(new Set());\r\n    };\r\n\r\n    const fetchTabData = useCallback(\r\n        async (tabId: string, body: Record<string, any> = {}, isFilterApplied: boolean = false) => {\r\n            if (loading) return;\r\n\r\n            setLoading(true);\r\n\r\n            const tab = tabs.find(t => t.id === tabId);\r\n            if (!tab) {\r\n                console.warn(`Tab not found for ID: ${tabId}`);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const updatedBody = {\r\n                ...body,\r\n                ...(startDate && { startDate }),\r\n                ...(endDate && { endDate }),\r\n            };\r\n\r\n            const cacheKey = `${tabId}-${startDate || \"default\"}-${endDate || \"default\"}`;\r\n            const cachedData = cacheRef.current[cacheKey];\r\n            const now = Date.now();\r\n\r\n            if (!isFilterApplied && tabId === 'products') {\r\n                delete cacheRef.current[cacheKey];\r\n            }\r\n\r\n            if (!isFilterApplied && cachedData && now - cachedData.timestamp < POLL_INTERVAL) {\r\n                setTabs(prevTabs =>\r\n                    prevTabs.map(t =>\r\n                        t.id === tabId ? { ...t, data: cachedData.data, lastUpdated: cachedData.timestamp } : t\r\n                    )\r\n                );\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const response = await axios.post(tab.apiEndpoint, updatedBody, { withCredentials: true });\r\n\r\n                if (response.data.success) {\r\n                    const result = response.data;\r\n                    const data = result[`${tabId}Data`] || [];\r\n                    console.log(\"New Data for Tab:\", tabId, data);\r\n\r\n                    const columns: ColumnDef[] = Object.keys(data[0] || {}).map(key => ({\r\n                        id: key,\r\n                        header: key.charAt(0).toUpperCase() + key.slice(1),\r\n                        accessorKey: key,\r\n                        cell: (value: any) => {\r\n                            if (key === 'issues' && Array.isArray(value)) {\r\n                                return value.length > 0 ? value[0].description : 'No issues';\r\n                            }\r\n                            return String(value);\r\n                        },\r\n                    }));\r\n\r\n                    console.log(\"Columns for Tab:\", columns);\r\n\r\n                    setTabs(prevTabs =>\r\n                        prevTabs.map(t =>\r\n                            t.id === tabId ? { ...t, columns, data, lastUpdated: now } : t\r\n                        )\r\n                    );\r\n\r\n                    cacheRef.current[cacheKey] = { data, timestamp: now };\r\n                } else {\r\n                    console.error(`Failed to fetch data for ${tabId}`);\r\n                }\r\n            } catch (error) {\r\n                console.error(`Error fetching data for ${tabId}:`, error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        },\r\n        [tabs, loading, cacheRef, startDate, endDate]\r\n    );\r\n\r\n    useEffect(() => {\r\n        const requestBody = {\r\n            ...filterData,\r\n            ...(startDate && { startDate }),\r\n            ...(endDate && { endDate }),\r\n        };\r\n\r\n        fetchTabData(activeTab, filterApplied ? requestBody : {}, filterApplied ? true : false);\r\n    }, [activeTab, date, filterApplied, filterData]);\r\n\r\n    const handleRowClick = (currentTab: string, rowData: Record<string, any>) => {\r\n        const tabColumnMapping: Record<string, string> = {\r\n            brands: 'Brand', // Column name to fetch value when on Brand tab\r\n            productTypes: 'Type', // Column name to fetch value when on Product types tab\r\n            categories: 'name', // Column name to fetch value when on Categories tab\r\n            products: 'status'\r\n        };\r\n\r\n        const bodyKeyMapping: Record<string, string> = {\r\n            brands: 'brands', // Key to send in the API request body when on Brand tab\r\n            productTypes: 'productType', // Key to send in the API request body when on Product types tab\r\n            categories: 'categoryName', // Key to send in the API request body when on Categories tab\r\n            products: 'status'\r\n        };\r\n\r\n        const columnToFetch = tabColumnMapping[currentTab];\r\n        const bodyKey = bodyKeyMapping[currentTab];\r\n\r\n        if (columnToFetch && bodyKey) {\r\n            const valueToSend = rowData[columnToFetch]; // Get value from the row based on the column name\r\n\r\n            if (valueToSend) {\r\n                const filterPayload: Record<string, any> = {\r\n                    [bodyKey]: valueToSend, // Add the main key-value pair\r\n                };\r\n\r\n                // Add the additional key for the 'categories' tab\r\n                if (currentTab === 'categories' && rowData.level) {\r\n                    filterPayload['categoryLevel'] = rowData.level; // Add the additional key\r\n                }\r\n\r\n                // Set filter state\r\n                setFilterData(filterPayload); // Set custom filter data\r\n                setFilterApplied(true); // Mark filter as applied\r\n                setActiveTab('products'); // Switch to the Products tab\r\n            } else {\r\n                console.warn(`No value found for column \"${columnToFetch}\" in row`, rowData);\r\n            }\r\n        } else {\r\n            console.warn(`No column or body key mapping found for tab: ${currentTab}`);\r\n        }\r\n    };\r\n\r\n    const toggleCategory = (categoryPath: string) => {\r\n        setExpandedCategories(prev => {\r\n            const newSet = new Set(prev)\r\n            if (newSet.has(categoryPath)) {\r\n                newSet.delete(categoryPath)\r\n            } else {\r\n                newSet.add(categoryPath)\r\n            }\r\n            return newSet\r\n        })\r\n    }\r\n\r\n    const renderCategoryRow = (category: Category, depth: number = 0, path: string = '') => {\r\n        const currentPath = path ? `${path}.${category.name}` : category.name\r\n        const isExpanded = expandedCategories.has(currentPath)\r\n\r\n        return (\r\n            <React.Fragment key={currentPath}>\r\n                <tr className={`${isExpanded ? 'bg-gray-100' : 'bg-white'}`}>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm flex items-center\">\r\n                        <div style={{ marginLeft: `${depth * 20}px` }} onClick={() => toggleCategory(currentPath)} className=\"flex items-center cursor-pointer\">\r\n                            {category.subcategories.length > 0 && (\r\n                                <button className=\"mr-2\">\r\n                                    {isExpanded ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronRight className=\"h-4 w-4\" />}\r\n                                </button>\r\n                            )}\r\n                            {category.name}\r\n                        </div>\r\n                    </td>\r\n                    <td\r\n                        className=\"px-4 py-2 whitespace-nowrap text-sm cursor-pointer text-blue-500 underline\"\r\n                        onClick={() => handleRowClick(activeTab, category)} // Adding handleRowClick to the Products column\r\n                    >\r\n                        {category.metrics.products}\r\n                    </td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.totalCost}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ROAS}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.conversions}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ConversionValue}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ConversionRate}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.totalClicks}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ctr}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.AvgCPC}</td>\r\n                </tr>\r\n                {isExpanded &&\r\n                    category.subcategories.map(subCategory =>\r\n                        renderCategoryRow(subCategory, depth + 1, currentPath)\r\n                    )}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    const handleSort = (columnId: string) => {\r\n        if (sortColumn === columnId) {\r\n            setSortOrder(prevOrder => (prevOrder === 'asc' ? 'desc' : 'asc'));\r\n        } else {\r\n            setSortColumn(columnId);\r\n            setSortOrder('asc');\r\n        }\r\n    };\r\n    const getCurrentTabData = () => {\r\n        const currentTab = tabs.find(tab => tab.id === activeTab)\r\n        if (!currentTab || currentTab.id === 'categories') return { columns: [], data: [] }\r\n\r\n        let sortedData = currentTab.data;\r\n\r\n        if (sortColumn) {\r\n            sortedData = [...sortedData].sort((a, b) => {\r\n                const aValue = a[sortColumn];\r\n                const bValue = b[sortColumn];\r\n\r\n                if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n                    return sortOrder === 'asc' ? aValue - bValue : bValue - aValue;\r\n                }\r\n\r\n                const stringA = String(aValue || '').toLowerCase();\r\n                const stringB = String(bValue || '').toLowerCase();\r\n\r\n                if (stringA < stringB) return sortOrder === 'asc' ? -1 : 1;\r\n                if (stringA > stringB) return sortOrder === 'asc' ? 1 : -1;\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        const startIndex = (currentPage - 1) * rowsPerPage;\r\n        const endIndex = startIndex + rowsPerPage;\r\n        return {\r\n            columns: currentTab.columns,\r\n            data: sortedData.slice(startIndex, endIndex),\r\n        };\r\n    }\r\n\r\n    const { columns, data } = getCurrentTabData()\r\n    const totalPages = Math.ceil((tabs.find(tab => tab.id === activeTab)?.data.length || 0) / rowsPerPage)\r\n\r\n    const categoryColumns = [\r\n        { id: 'name', header: 'Name' },\r\n        { id: 'products', header: 'Products' },\r\n        { id: 'totalCost', header: 'Cost' },\r\n        { id: 'ROAS', header: 'ROAS' },\r\n        { id: 'conversions', header: 'Conversions' },\r\n        { id: 'ConversionValue', header: 'Conv. Value' },\r\n        { id: 'ConversionRate', header: 'Conv. Rate' },\r\n        { id: 'totalClicks', header: 'Clicks' },\r\n        { id: 'ctr', header: 'CTR' },\r\n        { id: 'AvgCPC', header: 'Avg CPC' },\r\n    ]\r\n\r\n    function TableSkeleton() {\r\n        return (\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full table-auto border-collapse\">\r\n                    <thead>\r\n                        <tr>\r\n                            {['w-24', 'w-32', 'w-32', 'w-24', 'w-24', 'w-24'].map((width, index) => (\r\n                                <th key={index} className=\"px-4 py-2 border-b\">\r\n                                    <Skeleton className={`h-4 ${width}`} />\r\n                                </th>\r\n                            ))}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {Array.from({ length: 8 }).map((_, index) => (\r\n                            <tr key={index}>\r\n                                {['w-24', 'w-32', 'w-32', 'w-24', 'w-24', 'w-24'].map((width, idx) => (\r\n                                    <td key={idx} className=\"px-4 py-2 border-b\">\r\n                                        <Skeleton className={`h-4 ${width}`} />\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n    <div className='w-full'>\r\n        <div className='flex flex-row gap-2 items-center mb-4'>\r\n            <GoogleLogo />\r\n            <h1 className='text-xl font-bold text-gray-800'>Google Ads Product Insights</h1>\r\n        </div>\r\n        <div className='bg-white p-6 rounded-xl shadow-lg border border-gray-200'>\r\n            <div className=\"flex items-center justify-between border-b border-gray-200 pb-2 mb-2\">\r\n                <div className=\"flex space-x-2\" role=\"tablist\">\r\n                    {tabs.map(tab => (\r\n                        <Button\r\n                            key={tab.id}\r\n                            variant={activeTab === tab.id ? \"default\" : \"ghost\"}\r\n                            onClick={() => handleTabChange(tab.id)}\r\n                            className=\"relative\"\r\n                        >\r\n                            {tab.id === 'products' && <Package className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.id === 'categories' && <Layers className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.id === 'brands' && <Tag className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.id === 'productTypes' && <BarChart2 className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.label}\r\n                            {activeTab === tab.id && (\r\n                                <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600\" />\r\n                            )}\r\n                        </Button>\r\n                    ))}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <DatePickerWithRange\r\n                      \r\n                    />\r\n                    <Button variant=\"outline\" size=\"icon\">\r\n                        <Filter className={`h-4 w-4 ${filterApplied ? 'text-blue-600' : 'text-gray-600'}`} />\r\n                    </Button>\r\n                    <TooltipProvider>\r\n                        <Tooltip>\r\n                            <TooltipTrigger asChild>\r\n                                <Button variant=\"outline\" size=\"icon\" onClick={() => fetchTabData(activeTab, {}, false)}>\r\n                                    <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                </Button>\r\n                            </TooltipTrigger>\r\n                            {tabs.find(t => t.id === activeTab)?.lastUpdated && (\r\n                                <TooltipContent>\r\n                                    <p>Last updated: {new Date(tabs.find(t => t.id === activeTab)?.lastUpdated || 0).toLocaleString()}</p>\r\n                                </TooltipContent>\r\n                            )}\r\n                        </Tooltip>\r\n                    </TooltipProvider>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='space-y-4'>\r\n                {filterApplied && (\r\n                    <div className=\"flex items-center gap-2 w-fit p-2 bg-blue-50 rounded-full\">\r\n                        <span className=\"text-xs font-medium text-blue-700\">{Object.entries(filterData).map(([key, value]) => `${key}: ${value}`).join(', ')}</span>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => {\r\n                                setFilterApplied(false);\r\n                                setFilterData({});\r\n                                setActiveTab('products');\r\n                                cacheRef.current['products'] = null as any;\r\n                                fetchTabData('products', {}, false);\r\n                            }}\r\n                            className=\"text-blue-700 hover:text-blue-800 hover:bg-blue-100 p-1 h-auto\"\r\n                        >\r\n                            <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n                <div className=\"rounded-md border border-gray-200 overflow-hidden\">\r\n                    <div className=\"max-h-[350px] overflow-auto\">\r\n                        {loading ? <TableSkeleton /> : (\r\n                            <table className=\"w-full\">\r\n                                <thead className=\"sticky top-0 z-10 bg-[#4A628A]\">\r\n                                    <tr>\r\n                                        {(activeTab === 'categories' ? categoryColumns : columns).map(column => (\r\n                                            <th key={column.id} className=\"px-4 py-3 text-left text-xs font-medium text-gray-50 uppercase tracking-wider min-w-[150px] cursor-pointer\" onClick={() => handleSort(column.id)}>\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                {column.header}\r\n                                                {sortColumn === column.id ? (\r\n                                                    sortOrder === 'asc' ? <ArrowUp className=\"h-4 w-4\" /> : <ArrowDown className=\"h-4 w-4\" />\r\n                                                ) : (\r\n                                                    <ArrowUpDown className=\"h-4 w-4\" />\r\n                                                )}\r\n                                            </div>\r\n                                        </th>\r\n                                        ))}\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                    {activeTab === 'categories' ? (\r\n                                        tabs.find(tab => tab.id === 'categories')?.data.map((category: Category) =>\r\n                                            renderCategoryRow(category)\r\n                                        )\r\n                                    ) : (\r\n                                        data.map((row, i) => (\r\n                                            <tr key={i} className=\"hover:bg-gray-50\">\r\n                                                {columns.map((column) => {\r\n                                                    const value = column.cell(row[column.accessorKey]);\r\n                                                    const isIssuesColumn = column.id === 'issues';\r\n                                                    const isProductColumn = column.id === 'Products';\r\n                                                    const isStatusColumn = column.id === 'status';\r\n                                                    const isNoIssues = typeof value === 'string' && value.trim().toLowerCase() === 'no issues';\r\n\r\n                                                    const getStatusColor = (status: string) => {\r\n                                                        switch (status.trim().toUpperCase()) {\r\n                                                            case \"UNSPECIFIED\": return 'bg-gray-100 text-gray-800';\r\n                                                            case \"UNKNOWN\": return 'bg-yellow-100 text-yellow-800';\r\n                                                            case \"NOT_ELIGIBLE\": return 'bg-red-100 text-red-800';\r\n                                                            case \"ELIGIBLE_LIMITED\": return 'bg-orange-100 text-orange-800';\r\n                                                            case \"ELIGIBLE\": return 'bg-green-100 text-green-800';\r\n                                                            default: return 'bg-gray-100 text-gray-700';\r\n                                                        }\r\n                                                    };\r\n\r\n                                                    const renderCell = () => {\r\n                                                        if (isIssuesColumn) {\r\n                                                            return (\r\n                                                                <div className={`flex items-center ${isNoIssues ? 'text-green-600' : 'text-red-600'}`}>\r\n                                                                    {isNoIssues ? <CheckCircle className=\"w-4 h-4 mr-2\" /> : <AlertCircle className=\"w-4 h-4 mr-2\" />}\r\n                                                                    {value}\r\n                                                                </div>\r\n                                                            );\r\n                                                        }\r\n\r\n                                                        if (isStatusColumn) {\r\n                                                            const statusValue = value ? String(value) : '';\r\n                                                            const colorClass = getStatusColor(statusValue);\r\n                                                            return (\r\n                                                                <div className={`px-2 py-1.5 rounded-full text-xs font-medium w-full ${colorClass} cursor-pointer`} onClick={() => handleRowClick(activeTab, row)}>\r\n                                                                    {statusValue}\r\n                                                                </div>\r\n                                                            );\r\n                                                        }\r\n                                                        return column.cell ? column.cell(value) : value;\r\n                                                    };\r\n\r\n                                                    return (\r\n                                                        <td\r\n                                                            key={column.id}\r\n                                                            className={`px-4 py-2.5 text-sm whitespace-nowrap min-w-[150px] ${isProductColumn ? 'cursor-pointer text-blue-600 hover:text-blue-800' : ''}`}\r\n                                                            onClick={() => isProductColumn && handleRowClick(activeTab, row)}\r\n                                                        >\r\n                                                            {renderCell()}\r\n                                                        </td>\r\n                                                    );\r\n                                                })}\r\n                                            </tr>\r\n                                        ))\r\n                                    )}\r\n                                    {(activeTab === 'categories' ? tabs.find(tab => tab.id === 'categories')?.data.length === 0 : data.length === 0) && (\r\n                                        <tr>\r\n                                            <td\r\n                                                colSpan={(activeTab === 'categories' ? categoryColumns : columns).length}\r\n                                                className=\"px-4 py-2 text-sm text-gray-500 text-center\"\r\n                                            >\r\n                                                No data available\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 border-t border-gray-200\">\r\n                        <div className=\"text-sm text-gray-700\">\r\n                            Showing {((currentPage - 1) * rowsPerPage) + 1} to {Math.min(currentPage * rowsPerPage, tabs.find(t => t.id === activeTab)?.data.length || 0)} of {tabs.find(t => t.id === activeTab)?.data.length || 0} entries\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                                disabled={currentPage === 1}\r\n                            >\r\n                                <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n                                Previous\r\n                            </Button>\r\n                            <div className=\"text-sm text-gray-700\">\r\n                                Page {currentPage} of {totalPages}\r\n                            </div>\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                                disabled={currentPage === totalPages}\r\n                            >\r\n                                Next\r\n                                <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    );\r\n};      ","import { Table, TableBody, TableCell, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nexport const TableSkeleton = () => (\r\n    <Table className=\"text-center min-w-full\">\r\n      <TableHeader className=\"bg-gray-200 sticky top-0 z-10\">\r\n        <TableRow>\r\n          {Array(8).fill(0).map((_, index) => (\r\n            <TableCell key={index} className=\"font-bold px-4 text-black min-w-[150px]\">\r\n              <Skeleton className=\"h-6 w-full\" />\r\n            </TableCell>\r\n          ))}\r\n        </TableRow>\r\n      </TableHeader>\r\n      <TableBody>\r\n        {Array(10).fill(0).map((_, rowIndex) => (\r\n          <TableRow key={rowIndex}>\r\n            {Array(8).fill(0).map((_, cellIndex) => (\r\n              <TableCell key={cellIndex} className=\"px-4 py-2 max-w-[200px]\">\r\n                <Skeleton className=\"h-6 w-full\" />\r\n              </TableCell>\r\n            ))}\r\n          </TableRow>\r\n        ))}\r\n      </TableBody>\r\n    </Table>\r\n  )","import { GoogleLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport axios from 'axios'\r\nimport { useParams } from \"react-router-dom\";\r\nimport { ChevronLeft, ChevronRight, Search, Filter, RefreshCw, Zap, DollarSign, Percent, MousePointer, CreditCard, TrendingUp, Target, Users, Megaphone, ArrowUp, ArrowDown, ArrowUpDown } from 'lucide-react';\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { format } from \"date-fns\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\n\r\ninterface SearchTerm {\r\n  id: string;\r\n  searchTerm: string\r\n  matchType: string\r\n  status: string\r\n  campaignName: string\r\n  adGroup: string\r\n  impressions: number\r\n  clicks: number\r\n  ctr: string\r\n  cost: string\r\n  performance: string\r\n}\r\n\r\ninterface CampaignAdGroupPair {\r\n  campaignName: string;\r\n  adGroups: string[];\r\n}\r\n\r\nexport default function SearchTermTable() {\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n  const { brandId } = useParams();\r\n  const [searchTerms, setSearchTerms] = useState<SearchTerm[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [hasMoreData, setHasMoreData] = useState(true);\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [campaignAdGroupPairs, setCampaignAdGroupPairs] = useState<CampaignAdGroupPair[]>([]);\r\n  const [selectedCampaign, setSelectedCampaign] = useState<string>('all');\r\n  const [statusOptions, setStatusOptions] = useState<[]>([]);\r\n  const [selectedAdGroup, setSelectedAdGroup] = useState<string>('all');\r\n  const [selectedStatus, setSelectedStatus] = useState<string>('all');\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const rowsPerPage = 100;\r\n\r\n  const columns = [\r\n    { id: 'searchTerm', header: 'Search Term', icon: <Search className=\"w-4 h-4\" /> },\r\n    { id: 'matchType', header: 'Match Type', icon: <Zap className=\"w-4 h-4\" /> },\r\n    { id: 'status', header: 'Status', icon: <Filter className=\"w-4 h-4\" /> },\r\n    { id: 'campaignName', header: 'Campaign Name', icon: <Megaphone className=\"w-4 h-4\" /> },\r\n    { id: 'adGroupName', header: 'Ad Group', icon: <Users className=\"w-4 h-4\" /> },\r\n    { id: 'cost', header: 'Cost', icon: <DollarSign className=\"w-4 h-4\" /> },\r\n    { id: 'conversions', header: 'Conversions', icon: <Target className=\"w-4 h-4\" /> },\r\n    { id: 'conversionsValue', header: 'Conv. Value', icon: <TrendingUp className=\"w-4 h-4\" /> },\r\n    { id: 'conversionsRate', header: 'Conv. Rate', icon: <Percent className=\"w-4 h-4\" /> },\r\n    { id: 'clicks', header: 'Clicks', icon: <MousePointer className=\"w-4 h-4\" /> },\r\n    { id: 'ctr', header: 'CTR', icon: <Percent className=\"w-4 h-4\" /> },\r\n    { id: 'avg_cpc', header: 'Avg. CPC', icon: <CreditCard className=\"w-4 h-4\" /> },\r\n  ]\r\n\r\n  const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n\r\n  const handleSort = (column: string) => {\r\n    if (sortColumn === column) {\r\n      setSortOrder(prevOrder => prevOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortColumn(column);\r\n      setSortOrder('asc');\r\n    }\r\n  };\r\n\r\n  const sortedSearchTerms = useMemo(() => {\r\n    if (!sortColumn) return searchTerms;\r\n\r\n    return [...searchTerms].sort((a, b) => {\r\n      const aValue = a[sortColumn as keyof SearchTerm];\r\n      const bValue = b[sortColumn as keyof SearchTerm];\r\n\r\n      // Handle numeric comparisons\r\n      if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n        return sortOrder === 'asc' \r\n          ? aValue - bValue \r\n          : bValue - aValue;\r\n      }\r\n\r\n      // String comparison (case-insensitive)\r\n      const stringA = String(aValue).toLowerCase();\r\n      const stringB = String(bValue).toLowerCase();\r\n\r\n      if (stringA < stringB) return sortOrder === 'asc' ? -1 : 1;\r\n      if (stringA > stringB) return sortOrder === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n  }, [searchTerms, sortColumn, sortOrder]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Prepare request body\r\n      const requestBody = {\r\n        limit: rowsPerPage,\r\n        page: currentPage,\r\n        startDate,\r\n        endDate,\r\n        ...(selectedCampaign && selectedCampaign !== 'all' && { campaign: selectedCampaign }),\r\n        ...(selectedAdGroup && selectedAdGroup !== 'all' && { adGroup: selectedAdGroup }),\r\n        ...(selectedStatus && selectedStatus !== 'all' && { status: selectedStatus }),\r\n      };\r\n\r\n      // Make API request\r\n      const { data: response } = await axios.post(\r\n        `${baseURL}/api/segment/searchTermMetrics/${brandId}`,\r\n        requestBody,\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.success) {\r\n        // Set data in state\r\n        setSearchTerms(response.data);\r\n        setTotalRecords(response.totalRecords);\r\n        setTotalPages(response.totalPages);\r\n        setHasMoreData(currentPage * rowsPerPage < response.totalRecords);\r\n        setCampaignAdGroupPairs(response.campaignAdGroupPairs);\r\n        setStatusOptions(response.statusOptions)\r\n      } else {\r\n        console.error('Failed to fetch search term metrics:', response.message);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching search term metrics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [\r\n    baseURL,\r\n    brandId,\r\n    currentPage,\r\n    rowsPerPage,\r\n    selectedCampaign,\r\n    selectedAdGroup,\r\n    selectedStatus,\r\n    startDate,\r\n    endDate\r\n  ]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 300000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  const handleCampaignChange = (value: string) => {\r\n    setSelectedCampaign(value);\r\n    setSelectedAdGroup('all');\r\n    setCurrentPage(1)\r\n  };\r\n\r\n  const handleAdGroupChange = (value: string) => {\r\n    setSelectedAdGroup(value);\r\n    setCurrentPage(1)\r\n  };\r\n\r\n  const handleStatusChange = (value: string) => {\r\n    setSelectedStatus(value);\r\n    setCurrentPage(1)\r\n  };\r\n\r\n  const filteredAdGroups = selectedCampaign !== 'all'\r\n    ? campaignAdGroupPairs?.find(pair => pair.campaignName === selectedCampaign)?.adGroups || []\r\n    : [];\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex flex-row gap-2 items-center mb-4\">\r\n        <GoogleLogo />\r\n        <h1 className=\"text-xl font-bold text-gray-800\">Google Ads Search Term Insights</h1>\r\n      </div>\r\n      <div className=\"bg-white rounded-xl overflow-hidden border border-gray-200 shadow-md\">\r\n        <div className=\"p-4\">\r\n          <div className=\"flex justify-between mb-4\">\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" className=\"bg-white border-gray-300 hover:bg-gray-50 transition-colors duration-200\">\r\n                  <Filter className=\"w-4 h-4 mr-2\" />\r\n                  Filter\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-80\">\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <h3 className=\"font-medium mb-2\">Status</h3>\r\n                    <Select onValueChange={handleStatusChange} value={selectedStatus}>\r\n                      <SelectTrigger className=\"w-full\">\r\n                        <SelectValue placeholder=\"Select Status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Status</SelectItem>\r\n                        {statusOptions.map((status) => (\r\n                          <SelectItem key={status} value={status}>{status}</SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-medium mb-2\">Campaign</h3>\r\n                    <Select onValueChange={handleCampaignChange} value={selectedCampaign}>\r\n                      <SelectTrigger className=\"w-full\">\r\n                        <SelectValue placeholder=\"Select Campaign\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Campaigns</SelectItem>\r\n                        {campaignAdGroupPairs.map((pair) => (\r\n                          <SelectItem key={pair.campaignName} value={pair.campaignName}>{pair.campaignName}</SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  {selectedCampaign !== 'all' && (\r\n                    <div>\r\n                      <h3 className=\"font-medium mb-2\">Ad Group</h3>\r\n                      <Select\r\n                        disabled={selectedCampaign === 'all'}\r\n                        onValueChange={handleAdGroupChange}\r\n                        value={selectedAdGroup}\r\n                      >\r\n                        <SelectTrigger className=\"w-full\">\r\n                          <SelectValue placeholder=\"Select Ad Group\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          <SelectItem value=\"all\">All Ad Groups</SelectItem>\r\n                          {filteredAdGroups.map((adGroup) => (\r\n                            <SelectItem key={adGroup} value={adGroup}>{adGroup}</SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </PopoverContent>\r\n            </Popover>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <DatePickerWithRange\r\n              \r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100\"\r\n                onClick={fetchData}\r\n              >\r\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\r\n                Refresh\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"rounded-md border border-gray-200 overflow-hidden\">\r\n            <div className=\"max-h-[380px] overflow-auto rounded-lg\">\r\n              {loading ? (\r\n                <TableSkeleton />\r\n              ) : (\r\n                <table className=\"w-full text-center\">\r\n                  <thead className=\"sticky top-0 z-10 bg-[#4A628A] rounded-t-lg\">\r\n                    <tr>\r\n                      {columns.map((column) => (\r\n                        <th\r\n                          key={column.id}\r\n                          className=\"px-4 py-3 text-xs font-medium text-gray-50 uppercase tracking-wider min-w-[200px] cursor-pointer\"\r\n                          onClick={() => handleSort(column.id)}\r\n                        >\r\n                          <div className=\"flex items-center justify-center gap-1\">\r\n                            {column.icon}\r\n                            {column.header}\r\n                            {sortColumn === column.id ? (\r\n                              sortOrder === 'asc' ? <ArrowUp className=\"ml-1 w-4 h-6 text-[#ffffff]\" /> : <ArrowDown className=\"ml-1 w-4 h-6 text-[#ffffff]\" />\r\n                            ) : (\r\n                              <ArrowUpDown className=\"ml-1 w-4 h-6 text-gray-300\" />\r\n                            )}\r\n                          </div>\r\n                        </th>\r\n                      ))}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {sortedSearchTerms.map((row, i) => (\r\n                      <tr key={i} className=\"hover:bg-gray-50 transition-colors duration-150\">\r\n                        {columns.map((column) => {\r\n                          const value = row[column.id as keyof SearchTerm];\r\n                          const isStatusColumn = column.id === 'status';\r\n                          const isSearchTermColumn = column.id === 'searchTerm'\r\n\r\n                          const renderCell = () => {\r\n                            if (isStatusColumn) {\r\n                              const statusValue = value ? String(value) : '';\r\n                              const getStatusColor = (status: string) => {\r\n                                switch (status.trim().toUpperCase()) {\r\n                                  case 'ADDED':\r\n                                    return 'bg-green-100 text-green-800';\r\n                                  case 'NONE':\r\n                                    return 'bg-yellow-100 text-yellow-800';\r\n                                  default:\r\n                                    return 'bg-gray-100 text-gray-800';\r\n                                }\r\n                              };\r\n                              const colorClass = getStatusColor(statusValue);\r\n\r\n                              return (\r\n                                <div className={`px-2 py-1 rounded-full text-xs font-medium ${colorClass}`}>\r\n                                  {statusValue}\r\n                                </div>\r\n                              );\r\n                            }\r\n\r\n                            if (isSearchTermColumn) {\r\n                              const searchTermValue = value ? String(value) : '';\r\n                              const performance = row.performance;\r\n                              const isPerformingWell = performance === 'Best Performing Keyword';\r\n\r\n                              return (\r\n                                <div className=\"px-2 py-1 rounded-full font-medium flex flex-col items-center\">\r\n                                  <span className={`text-xs ${isPerformingWell ? 'text-green-600' : 'text-red-600'}`}>\r\n                                    {performance}\r\n                                  </span>\r\n                                  <span className=\"text-sm mt-1\">{searchTermValue}</span>\r\n                                </div>\r\n                              );\r\n                            }\r\n\r\n                            return value;\r\n                          };\r\n\r\n                          return (\r\n                            <td\r\n                              key={column.id}\r\n                              className=\"px-4 py-2.5 text-sm min-w-[200px]\"\r\n                            >\r\n                              {renderCell()}\r\n                            </td>\r\n                          );\r\n                        })}\r\n                      </tr>\r\n                    ))}\r\n                    {searchTerms.length === 0 && (\r\n                      <tr>\r\n                        <td\r\n                          colSpan={columns.length}\r\n                          className=\"px-4 py-2 text-sm text-gray-500 text-center\"\r\n                        >\r\n                          No data available\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50\">\r\n              <div className=\"text-sm text-gray-600\">\r\n                Showing {((currentPage - 1) * rowsPerPage) + 1} to{' '}\r\n                {Math.min(currentPage * rowsPerPage, totalRecords || 0)} of{' '}\r\n                {totalRecords || 0} entries\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\r\n                  disabled={currentPage === 1}\r\n                  className=\"text-gray-600 border-gray-200 hover:bg-gray-50\"\r\n                >\r\n                  <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n                  Previous\r\n                </Button>\r\n                <div className=\"text-sm text-gray-600\">\r\n                  Page {currentPage} of {totalPages}\r\n                </div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((prev) => prev + 1)}\r\n                  disabled={!hasMoreData}\r\n                  className=\"text-gray-600 border-gray-200 hover:bg-gray-50\"\r\n                >\r\n                  Next\r\n                  <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport { ChevronLeft, ChevronRight, RefreshCw, Package, Layers, ArrowUp, ArrowDown, ArrowUpDown, Filter } from 'lucide-react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Button } from '@/components/ui/button';\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip as RechartsTooltip, Legend } from 'recharts';\r\nimport { format } from \"date-fns\";\r\nimport { GoogleLogo } from '@/pages/AnalyticsDashboard/AdAccountsMetricsCard';\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\n\r\ntype TabConfig = {\r\n    id: string;\r\n    label: string;\r\n    apiEndpoint: string;\r\n    columns: ColumnDef[];\r\n    data: any[];\r\n    lastUpdated: number | null;\r\n    totalPages?: number;\r\n    currentPage?: number;\r\n    campaignAdGroupPairs?: CampaignAdGroupPair[];\r\n};\r\n\r\ntype CampaignAdGroupPair = {\r\n    campaignName: string;\r\n    adGroups: string[];\r\n};\r\n\r\ntype ColumnDef = {  \r\n    id: string;\r\n    header: string;\r\n    accessorKey: string;\r\n    cell: (value: any) => React.ReactNode;\r\n};\r\n\r\ntype MetricKey = keyof typeof metricLabels;\r\n\r\ntype FilterState = {\r\n    status: string;\r\n    campaign: string;\r\n    adGroup: string;\r\n    ageRange?: string;\r\n    gender?: string;\r\n    campaignStatus: string;\r\n};\r\n\r\nconst metricLabels = {\r\n    totalConversions: 'Total Conversions',\r\n    totalClicks: 'Total Clicks',\r\n    totalCost: 'Total Cost',\r\n    totalCTR: 'Total C T R'\r\n};\r\n\r\n// Define rows per page constant\r\nconst ROWS_PER_PAGE = 100;\r\n\r\nexport default function AgeAndGenderMetrics() {\r\n    const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n    const { brandId } = useParams();\r\n\r\n    if (!brandId) {\r\n        return <div>Error: Brand ID is missing</div>;\r\n    }\r\n\r\n    // State for filters\r\n    const [filters, setFilters] = useState<FilterState>({\r\n        campaign: 'all',\r\n        adGroup: 'all',\r\n        ageRange: 'all',\r\n        gender: 'all',\r\n        status: 'all', \r\n        campaignStatus: 'all' \r\n    });\r\n\r\n\r\n    const [filterOptions, setFilterOptions] = useState<{\r\n        campaigns: string[];\r\n        adGroups: string[];\r\n        ageRanges: string[];\r\n        genders: string[];\r\n        campaignAdGroupMap?: Record<string, string[]>;\r\n        statusOptions: string[]; \r\n    }>({\r\n        campaigns: [],\r\n        adGroups: [],\r\n        ageRanges: [],\r\n        genders: [],\r\n        campaignAdGroupMap: {},\r\n        statusOptions: ['REMOVED', 'PAUSED', 'ENABLED'], \r\n    });\r\n\r\n    const [data, setData] = useState<any[]>([]);\r\n    const [tabs, setTabs] = useState<TabConfig[]>([\r\n        { \r\n            id: 'age', \r\n            label: 'Age', \r\n            apiEndpoint: `${baseURL}/api/segment/ageMetrics/${brandId}`, \r\n            columns: [], \r\n            data: [], \r\n            lastUpdated: null,\r\n            totalPages: 1,\r\n            currentPage: 1\r\n        },\r\n        { \r\n            id: 'gender', \r\n            label: 'Gender', \r\n            apiEndpoint: `${baseURL}/api/segment/genderMetrics/${brandId}`, \r\n            columns: [], \r\n            data: [], \r\n            lastUpdated: null,\r\n            totalPages: 1,\r\n            currentPage: 1\r\n        },\r\n    ]);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n    const [totalRecords, setTotalRecords] = useState(0);\r\n    const [hasMoreData, setHasMoreData] = useState(true);\r\n    const [activeTab, setActiveTab] = useState(tabs[0].id);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showGraph, setShowGraph] = useState(false);\r\n    const [graphData, setGraphData] = useState<any>(null);\r\n    const [selectedMetrics, setSelectedMetrics] = useState<MetricKey[]>(['totalClicks', 'totalCost']);\r\n\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n\r\n    // Add handleMetricChange function\r\n    const handleMetricChange = (metric: MetricKey) => {\r\n        setSelectedMetrics(prev => \r\n            prev.includes(metric) \r\n                ? prev.filter(m => m !== metric)\r\n                : [...prev, metric]\r\n        );\r\n    };\r\n\r\n    // State variables for caching filter options\r\n    const [cachedAgeRanges, setCachedAgeRanges] = useState<string[]>([]);\r\n    const [cachedGenders, setCachedGenders] = useState<string[]>([]);\r\n    \r\n    const fetchData = async (\r\n        tabId: string, \r\n        requestData?: {\r\n            startDate: string;\r\n            endDate: string;\r\n            page: number;\r\n            limit: number;\r\n            status?: string; // Ensure status is included here\r\n            campaign?: string;\r\n            adGroup?: string;\r\n            agerange?: string;\r\n            gender?: string;\r\n        }, \r\n        _forceRefresh?: boolean\r\n    ) => {\r\n        try {\r\n            setLoading(true);\r\n            const apiEndpoint = tabId === 'gender' \r\n                ? `${baseURL}/api/segment/genderMetrics/${brandId}`\r\n                : `${baseURL}/api/segment/ageMetrics/${brandId}`;\r\n    \r\n            // Prepare the request body with all possible filters\r\n            const requestBody = {\r\n                startDate: requestData?.startDate || (date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\"),\r\n                endDate: requestData?.endDate || (date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\"),\r\n                page: requestData?.page || currentPage,\r\n                limit: requestData?.limit || ROWS_PER_PAGE,\r\n                ...(requestData?.status && { status: requestData.status }), // Ensure this line is present\r\n                ...(requestData?.campaign && requestData.campaign !== 'all' && { campaign: requestData.campaign }),\r\n                ...(requestData?.adGroup && requestData.adGroup !== 'all' && { adGroup: requestData.adGroup }),\r\n                ...(activeTab === 'age' && requestData?.agerange && requestData.agerange !== 'all' && { agerange: requestData.agerange }),\r\n                ...(activeTab === 'gender' && requestData?.gender && requestData.gender !== 'all' && { gender: requestData.gender })\r\n            };\r\n    \r\n            console.log(\"Fetch Request Body:\", requestBody); // Debug logging\r\n    \r\n            const response = await axios.post(apiEndpoint, requestBody, { withCredentials: true });\r\n            const genderCampaignNames: string[] = response.data.genderCampaignAdGroupPairs?.map((pair: { campaignName: string }) => pair.campaignName) || [];\r\n            if (response.data.success) {\r\n                // Combine campaign names and ad groups from both age and gender metrics\r\n                const campaignNames: string[] = [\r\n                    ...(response.data.campaignAdGroupPairs?.map((pair: { campaignName: string }) => pair.campaignName) || []),\r\n                    ...(response.data.campaignAdGroupPairs?.map((pair: { campaignName: string }) => pair.campaignName) || []),\r\n                    ...genderCampaignNames\r\n                ];\r\n                \r\n                // Initialize and update campaignAdGroupMap\r\n                const campaignAdGroupMap: Record<string, string[]> = {};\r\n                const campaignAdGroupPairs = [\r\n                    ...(response.data.campaignAdGroupPairs || []),\r\n                    ...(response.data.genderCampaignAdGroupPairs || [])\r\n                ];\r\n            \r\n                campaignAdGroupPairs.forEach((pair: CampaignAdGroupPair) => {\r\n                    campaignAdGroupMap[pair.campaignName] = pair.adGroups || [];\r\n                });\r\n            \r\n                // Get unique ad groups\r\n                const adGroups = Array.from(new Set(\r\n                    campaignAdGroupPairs.flatMap((pair: CampaignAdGroupPair) => pair.adGroups || [])\r\n                ));\r\n            \r\n                setFilterOptions(prevOptions => ({\r\n                    ...prevOptions,\r\n                    campaigns: Array.from(new Set(campaignNames)),\r\n                    adGroups: adGroups,\r\n                    campaignAdGroupMap: campaignAdGroupMap\r\n                }));\r\n            \r\n            \r\n                const data = tabId === 'gender' ? response.data.genderData || [] : response.data.ageData || [];\r\n            \r\n                if (tabId === 'age') {\r\n                    const ageRanges = new Set(data.map((item: any) => item.ageRange));\r\n            \r\n                    if (cachedAgeRanges.length === 0) {\r\n                        setCachedAgeRanges(Array.from(ageRanges) as string[]);\r\n                    }\r\n            \r\n                    setFilterOptions(prevOptions => ({\r\n                        ...prevOptions,\r\n                        ageRanges: cachedAgeRanges.length > 0 ? cachedAgeRanges : Array.from(ageRanges) as string[],\r\n                        genders: prevOptions.genders\r\n                    }));\r\n                } else {\r\n                    const genders = new Set(data.map((item: any) => \r\n                        item.gender === 'MALE' ? 'MALE' : \r\n                        item.gender === 'FEMALE' ? 'FEMALE' : \r\n                        item.gender\r\n                    ));\r\n            \r\n                    if (cachedGenders.length === 0) {\r\n                        setCachedGenders(Array.from(genders) as string[]);\r\n                    }\r\n            \r\n                    setFilterOptions(prevOptions => ({\r\n                        ...prevOptions,\r\n                        campaigns: [...new Set([...campaignNames, ...genderCampaignNames])], // Combine both sets of campaign names\r\n                        genders: cachedGenders.length > 0 ? cachedGenders : Array.from(genders) as string[]\r\n                    }));\r\n                }\r\n            \r\n                setData(data);\r\n    \r\n                const columns: ColumnDef[] = data.length > 0\r\n                    ? Object.keys(data[0] || {})\r\n                        .filter(key => key !== 'adGroupStatus')\r\n                        .map(key => ({\r\n                            id: key,\r\n                            header: key === 'campaignStatus' \r\n                                ? 'Campaign Status' \r\n                                : key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase()),\r\n                            accessorKey: key,\r\n                            cell: (value: any) => {\r\n                                if (key === 'cost') {\r\n                                    return `$${Number(value).toFixed(2)}`;\r\n                                }\r\n                                if (['roas', 'conversionsRate', 'ctr'].includes(key)) {\r\n                                    return `${(Number(value) * 100).toFixed(2)}%`;\r\n                                }\r\n                                if (key === 'campaignStatus') {\r\n                                    // Capitalize and style campaign status\r\n                                    const statusColor = {\r\n                                        'REMOVED': 'text-red-600',\r\n                                        'PAUSED': 'text-yellow-600',\r\n                                        'ENABLED': 'text-green-600'\r\n                                    }[value as string] || '';\r\n                                    return (\r\n                                        <span className={`font-medium ${statusColor}`}>\r\n                                            {value === 'REMOVED' ? 'Removed' : \r\n                                             value === 'PAUSED' ? 'Paused' : \r\n                                             value === 'ENABLED' ? 'Enabled' : value}\r\n                                        </span>\r\n                                    );\r\n                                }\r\n                                return String(value);\r\n                            }\r\n                        }))\r\n                    : [];\r\n                \r\n                setTabs(prevTabs =>\r\n                    prevTabs.map(t =>\r\n                        t.id === tabId\r\n                            ? { ...t, columns, data, lastUpdated: Date.now() }\r\n                            : t\r\n                    )\r\n                );\r\n                \r\n                const aggregatedData = tabId === 'gender' \r\n                    ? response.data.aggregatedRecords \r\n                    : response.data.ageRangeAggregatedMetrics;\r\n                console.log(\"Aggregated Data:\", aggregatedData);\r\n                console.log(\"Response Data afterfilter test:\", response.data);\r\n                const processedGraphData = Object.entries(aggregatedData || {}).map(([key, metrics]) => {\r\n                    const displayKey = tabId === 'gender' \r\n                        ? (key === 'MALE' ? 'Male' : key === 'FEMALE' ? 'Female' : key)\r\n                        : key;\r\n                        \r\n                    const baseEntry = {\r\n                        [tabId === 'gender' ? 'gender' : 'ageRange']: displayKey\r\n                    };\r\n                    \r\n                    if (metrics && typeof metrics === 'object' && !Array.isArray(metrics)) {\r\n                        const typedMetrics = metrics as Record<string, number>;\r\n                        return {\r\n                            ...baseEntry,\r\n                            totalConversions: typedMetrics.totalConversions || 0,\r\n                            totalClicks: typedMetrics.totalClicks || 0,\r\n                            totalCost: typedMetrics.totalCost || 0,\r\n                            totalCTR: typedMetrics.totalCTR || 0\r\n                        };\r\n                    }\r\n                    return baseEntry;\r\n                });\r\n                console.log(\"Processed Graph Data:\", processedGraphData);\r\n                setGraphData(processedGraphData);\r\n                setTotalRecords(response.data.totalRecords || 0);\r\n                setTotalPages(response.data.totalPages || 1);\r\n                setHasMoreData(currentPage * ROWS_PER_PAGE < response.data.totalRecords);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error(`Error fetching data:`, error);\r\n            setGraphData(null);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const handleFilterChange = (filterKey: keyof FilterState, value: string) => {\r\n        setFilters(prev => {\r\n            const updatedFilters = {\r\n                ...prev,\r\n                [filterKey]: value\r\n            };\r\n    \r\n            // Reset dependent filters when certain filters change\r\n            if (filterKey === 'campaign') {\r\n                updatedFilters.adGroup = 'all';\r\n            }\r\n    \r\n            return updatedFilters;\r\n        });\r\n    \r\n        // Prepare request body with updated filters\r\n        const requestBody = {\r\n            startDate: date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\",\r\n            endDate: date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\",\r\n            page: 1,\r\n            limit: ROWS_PER_PAGE,\r\n            status: filters.status === 'all' ? undefined : filters.status,\r\n            campaign: filters.campaign === 'all' ? undefined : filters.campaign,\r\n            adGroup: filters.adGroup === 'all' ? undefined : filters.adGroup,\r\n            ...(activeTab === 'age' && filters.ageRange !== 'all' && { agerange: filters.ageRange }),\r\n            ...(activeTab === 'gender' && filters.gender !== 'all' && { gender: filters.gender })\r\n        };\r\n    \r\n        // Reset graph data before fetching\r\n        setGraphData(null);\r\n    \r\n        // Force data refresh with new filters\r\n        fetchData(activeTab, requestBody, true);\r\n    };\r\n    useEffect(() => {\r\n        const requestBody = {\r\n            startDate: date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\",\r\n            endDate: date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\",\r\n            page: currentPage,\r\n            limit: ROWS_PER_PAGE,\r\n            status: filters.status === 'all' ? undefined : filters.status,\r\n            campaign: filters.campaign === 'all' ? undefined : filters.campaign,\r\n            adGroup: filters.adGroup === 'all' ? undefined : filters.adGroup,\r\n            \r\n            // Conditional filters based on active tab\r\n            ...(activeTab === 'age' && filters.ageRange !== 'all' && { \r\n                agerange: filters.ageRange \r\n            }),\r\n            ...(activeTab === 'gender' && filters.gender !== 'all' && { \r\n                gender: filters.gender \r\n            })\r\n        };\r\n    \r\n        // Reset graph data before fetching\r\n        setGraphData(null);\r\n        \r\n        console.log('UseEffect Fetch Request:', { \r\n            activeTab, \r\n            filters, \r\n            requestBody \r\n        });\r\n        \r\n        fetchData(activeTab, requestBody);\r\n    \r\n        const intervalId = setInterval(() => {\r\n            fetchData(activeTab, requestBody);\r\n        }, 300000); // 5 minutes\r\n    \r\n        return () => clearInterval(intervalId);\r\n    }, [\r\n        activeTab, \r\n        date, \r\n        currentPage, \r\n        filters.campaign,\r\n        filters.adGroup,\r\n        filters.ageRange,\r\n        filters.gender,\r\n        filters.status\r\n    ]);\r\n    const handleTabChange = (newTabId: string) => {\r\n        setActiveTab(newTabId);\r\n        setCurrentPage(1);\r\n        const requestBody = {\r\n            startDate: date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\",\r\n            endDate: date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\",\r\n            page: 1,\r\n            limit: ROWS_PER_PAGE\r\n        };\r\n        fetchData(newTabId, requestBody);\r\n    };\r\n\r\n    const sortableColumns = [\r\n        'campaignName',\r\n        'adGroupName',\r\n        'campaignStatus',\r\n        'ageRange',\r\n        'conversionsValue',\r\n        'conversionsRate',\r\n        'avg_cpc', \r\n        'cost',\r\n        'roas',\r\n        'conversions',\r\n        'clicks',\r\n        'ctr'\r\n    ];\r\n\r\n    const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n    const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n\r\n    const handleSort = (column: string) => {\r\n        if (sortColumn === column) {\r\n            setSortOrder(prevOrder => prevOrder === 'asc' ? 'desc' : 'asc');\r\n        } else {\r\n            setSortColumn(column);\r\n            setSortOrder('asc');\r\n        }\r\n    };\r\n\r\n    const { columns } = (() => {\r\n        const currentTab = tabs.find(tab => tab.id === activeTab);\r\n        if (!currentTab) return { columns: [] };\r\n        return {\r\n            columns: currentTab.columns,\r\n        };\r\n    })();\r\n\r\n    const sortedData = useMemo(() => {\r\n        if (!sortColumn) return data;\r\n\r\n        return [...data].sort((a, b) => {\r\n            const aValue = a[sortColumn];\r\n            const bValue = b[sortColumn];\r\n\r\n            if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n                return sortOrder === 'asc' ? aValue - bValue : bValue - aValue;\r\n            }\r\n\r\n            const stringA = String(aValue || '').toLowerCase();\r\n            const stringB = String(bValue || '').toLowerCase();\r\n\r\n            if (stringA < stringB) return sortOrder === 'asc' ? -1 : 1;\r\n            if (stringA > stringB) return sortOrder === 'asc' ? 1 : -1;\r\n            return 0;\r\n        });\r\n    }, [data, sortColumn, sortOrder]);\r\n\r\n   // Handle page change\r\n    const handlePageChange = (newPage: number) => {\r\n        const validPage = Math.min(Math.max(1, newPage), totalPages);\r\n        setCurrentPage(validPage);\r\n        // Fetch data for the new page\r\n        const requestBody = {\r\n            startDate: date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\",\r\n            endDate: date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\",\r\n            page: validPage,\r\n            limit: ROWS_PER_PAGE\r\n        };\r\n        fetchData(activeTab, requestBody);\r\n    };\r\n\r\n    const colorPalette = ['#8884d8', '#82ca9d', '#ffc658', '#ff7300'];\r\n\r\n    return (\r\n        <div className='w-full'>\r\n            <div className='flex flex-row gap-2 items-center mb-4'>\r\n                <GoogleLogo />\r\n                <h1 className='text-xl font-bold text-gray-800'>Age and Gender Metrics</h1>\r\n            </div>\r\n            <div className='bg-white p-6 rounded-xl shadow-lg border border-gray-200'>\r\n                <div className=\"flex items-center justify-between border-b border-gray-200 pb-2 mb-2\">\r\n                    <div className=\"flex space-x-2\" role=\"tablist\">\r\n                        {tabs.map(tab => (\r\n                            <Button\r\n                                key={tab.id}\r\n                                variant={activeTab === tab.id ? \"default\" : \"ghost\"}\r\n                                onClick={() => handleTabChange(tab.id)}\r\n                                className=\"relative\"\r\n                            >\r\n                                {tab.id === 'age' ? <Package className=\"w-4 h-4 mr-2\" /> : <Layers className=\"w-4 h-4 mr-2\" />}\r\n                                {tab.label}\r\n                                {activeTab === tab.id && (\r\n                                    <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600\" />\r\n                                )}\r\n                            </Button>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <DatePickerWithRange\r\n                            \r\n                        />\r\n                        {showGraph && (\r\n                            <div className=\"flex gap-2\">\r\n                                {Object.keys(metricLabels).map(metric => (\r\n                                    <label key={metric} className=\"flex items-center space-x-2\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={selectedMetrics.includes(metric as MetricKey)}\r\n                                            onChange={() => handleMetricChange(metric as MetricKey)}\r\n                                        />\r\n                                        <span className=\"text-sm text-gray-700\">{metricLabels[metric as MetricKey]}</span>\r\n                                    </label>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        <Button \r\n                            variant=\"outline\" \r\n                            size=\"icon\" \r\n                            onClick={() => {\r\n                                const requestBody = {\r\n                                    startDate: date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\",\r\n                                    endDate: date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\",\r\n                                    page: 1,\r\n                                    limit: 1000\r\n                                };\r\n                                fetchData(activeTab, requestBody, true);\r\n                            }}\r\n                            disabled={loading}\r\n                        >\r\n                            <RefreshCw className={`h-4 w-4 ${loading ? '' : ''}`} />\r\n                        </Button>\r\n                        <Button \r\n                            variant=\"outline\" \r\n                            onClick={() => setShowGraph(!showGraph)}\r\n                        >\r\n                            {showGraph ? \"Show Table\" : \"Show Graph\"}\r\n                        </Button>\r\n                        <Popover>\r\n                            <PopoverTrigger asChild>\r\n                                <Button variant=\"outline\" className=\"bg-white border-gray-300 hover:bg-gray-50 transition-colors duration-200\">\r\n                                    <Filter className=\"w-4 h-4 mr-2\" />\r\n                                    Filter\r\n                                </Button>\r\n                            </PopoverTrigger>\r\n                            <PopoverContent className=\"w-80\">\r\n                                <div className=\"space-y-4\">\r\n                                    <div>\r\n                                        <h3 className=\"font-medium mb-2\">Campaign</h3>\r\n                                        <Select \r\n                                            onValueChange={(value) => handleFilterChange('campaign', value)} \r\n                                            value={filters.campaign}\r\n                                        >\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select campaign\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                <SelectItem value=\"all\">All</SelectItem>\r\n                                                {filterOptions.campaigns.map(campaign => (\r\n                                                    <SelectItem key={campaign} value={campaign}>\r\n                                                        {campaign}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                    {filters.campaign !== 'all' && (\r\n                                        <div>\r\n                                            <h3 className=\"font-medium mb-2\">Ad Group</h3>\r\n                                            <Select \r\n                                                onValueChange={(value) => handleFilterChange('adGroup', value)} \r\n                                                value={filters.adGroup}\r\n                                            >\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select ad group\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"all\">All Ad Groups</SelectItem>\r\n                                                    {(\r\n                                                        filterOptions.campaignAdGroupMap?.[filters.campaign] || \r\n                                                        (activeTab === 'gender' \r\n                                                            ? filterOptions.adGroups.filter(() => {\r\n                                                                if (filterOptions && filterOptions.campaignAdGroupMap) {\r\n                                                                    const campaign = Object.keys(filterOptions.campaignAdGroupMap).find(() => \r\n                                                                        filterOptions.campaignAdGroupMap?.[filters.campaign]?.some(ag => \r\n                                                                            filterOptions.campaignAdGroupMap?.[filters.campaign]?.includes(ag)\r\n                                                                        )\r\n                                                                    );\r\n                                                                    return campaign && filterOptions.campaigns.includes(campaign);\r\n                                                                }\r\n                                                                return false;\r\n                                                            })\r\n                                                            : filterOptions.adGroups)\r\n                                                    )?.map(adGroup => (\r\n                                                        <SelectItem key={adGroup} value={adGroup}>\r\n                                                            {adGroup}\r\n                                                        </SelectItem>\r\n                                                    ))}\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                    )}\r\n                                    <div>\r\n                                        <h3 className=\"font-medium mb-2\">Status</h3>\r\n                                        <Select \r\n                                            onValueChange={(value) => handleFilterChange('status', value)} \r\n                                            value={filters.status}\r\n                                        >\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select status\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                <SelectItem value=\"all\">All</SelectItem>\r\n                                                {filterOptions.statusOptions.map((status) => (\r\n                                                    <SelectItem key={status} value={status}>\r\n                                                        {status}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                    {activeTab === 'age' && (\r\n                                        <div>\r\n                                            <h3 className=\"font-medium mb-2\">Age Range</h3>\r\n                                            <Select \r\n                                                onValueChange={(value) => handleFilterChange('ageRange', value)} \r\n                                                value={filters.ageRange}\r\n                                            >\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select age range\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"all\">All</SelectItem>\r\n                                                    {filterOptions.ageRanges.map((range) => (\r\n                                                        <SelectItem key={range} value={range}>\r\n                                                            {range.replace('AGE_RANGE_', '').replace(/_/g, '-')}\r\n                                                        </SelectItem>\r\n                                                    ))}\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                    )}\r\n                                    {activeTab === 'gender' && (\r\n                                        <div>\r\n                                            <h3 className=\"font-medium mb-2\">Gender</h3>\r\n                                            <Select \r\n                                                onValueChange={(value) => handleFilterChange('gender', value)} \r\n                                                value={filters.gender}\r\n                                            >\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select gender\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"all\">All</SelectItem>\r\n                                                    {filterOptions.genders.map((gender) => (\r\n                                                        <SelectItem key={gender} value={gender}>\r\n                                                            {gender === 'MALE' ? 'Male' : gender === 'FEMALE' ? 'Female' : gender}\r\n                                                        </SelectItem>\r\n                                                    ))}\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </PopoverContent>\r\n                        </Popover>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    {loading ? (\r\n                        <div className=\"flex justify-center items-center h-64\">\r\n                            <div className=\"animate-spin rounded-full h-10 w-10 border-t-2 border-blue-500\"></div>\r\n                        </div>\r\n                    ) : showGraph ? (\r\n                        activeTab === 'age' && graphData ? (\r\n                            <ResponsiveContainer width=\"100%\" height={300}>\r\n                                <BarChart data={graphData}>\r\n                                    <CartesianGrid strokeDasharray=\"3 3\" />\r\n                                    <XAxis dataKey=\"ageRange\" />\r\n                                    <YAxis />\r\n                                    <RechartsTooltip />\r\n                                    <Legend />\r\n                                    {selectedMetrics.map((metric, index) => (\r\n                                        <Bar key={metric} dataKey={metric} fill={colorPalette[index % colorPalette.length]} name={metricLabels[metric as MetricKey]} />\r\n                                    ))}\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        ) : (\r\n                            activeTab === 'gender' && graphData ? (\r\n                                <ResponsiveContainer width=\"100%\" height={300}>\r\n                                    <BarChart data={graphData}>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" />\r\n                                        <XAxis dataKey=\"gender\" />\r\n                                        <YAxis />\r\n                                        <RechartsTooltip />\r\n                                        <Legend />\r\n                                        {selectedMetrics.map((metric, index) => (\r\n                                            <Bar key={metric} dataKey={metric} fill={colorPalette[index % colorPalette.length]} name={metricLabels[metric as MetricKey]} />\r\n                                        ))}\r\n                                    </BarChart>\r\n                                </ResponsiveContainer>\r\n                            ) : null\r\n                        )\r\n                    ) : (\r\n                        <div className=\"rounded-md border border-gray-200 overflow-hidden\">\r\n                            <div className=\"max-h-[350px] overflow-auto\">\r\n                                <table className=\"w-full\">\r\n                                    <thead className=\"sticky top-0 z-10 bg-[#4A628A]\">\r\n                                        <tr>\r\n                                            {columns.map(column => (\r\n                                                <th \r\n                                                    key={column.id} \r\n                                                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-50 uppercase tracking-wider min-w-[150px] cursor-pointer\"\r\n                                                    onClick={() => sortableColumns.includes(column.id) && handleSort(column.id)}\r\n                                                >\r\n                                                    <div className=\"flex items-center gap-1\">\r\n                                                        {column.header}\r\n                                                        {sortableColumns.includes(column.id) && (\r\n                                                            sortColumn === column.id ? (\r\n                                                                sortOrder === 'asc' ? <ArrowUp className=\"ml-1 w-4 h-6 text-[#ffffff]\" /> : <ArrowDown className=\"ml-1 w-4 h-6 text-[#ffffff]\" />\r\n                                                            ) : (\r\n                                                                <ArrowUpDown className=\"ml-1 w-4 h-6 text-gray-300\" />\r\n                                                            )\r\n                                                        )}\r\n                                                    </div>\r\n                                                </th>\r\n                                            ))}\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                        {sortedData.map((row, rowIndex) => (\r\n                                            <tr \r\n                                                key={rowIndex} \r\n                                                className=\"hover:bg-gray-50\"\r\n                                            >\r\n                                                {columns.map((column) => (\r\n                                                    <td \r\n                                                        key={column.id} \r\n                                                        className=\"px-4 py-2.5 text-sm whitespace-nowrap min-w-[150px]\"\r\n                                                    >\r\n                                                        {column.cell(row[column.accessorKey])}\r\n                                                    </td>\r\n                                                ))}\r\n                                            </tr>\r\n                                        ))}\r\n                                        {sortedData.length === 0 && (\r\n                                            <tr>\r\n                                                <td \r\n                                                    colSpan={columns.length} \r\n                                                    className=\"px-4 py-4 text-center text-gray-500\"\r\n                                                >\r\n                                                    No data available\r\n                                                </td>\r\n                                            </tr>\r\n                                        )}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200\">\r\n                                <div className=\"text-sm text-gray-700\">\r\n                                    {sortedData.length > 0 ? (\r\n                                        `Showing ${((currentPage - 1) * ROWS_PER_PAGE) + 1} to ${Math.min(currentPage * ROWS_PER_PAGE, totalRecords)} of ${totalRecords} entries`\r\n                                    ) : (\r\n                                        'Showing 0 entries'\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"flex items-center space-x-2\">\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => handlePageChange(currentPage - 1)}\r\n                                        disabled={currentPage === 1}\r\n                                    >\r\n                                        <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n                                        Previous\r\n                                    </Button>\r\n                                    <div className=\"text-sm text-gray-700\">\r\n                                        Page {currentPage} of {totalPages}\r\n                                    </div>\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => handlePageChange(currentPage + 1)}\r\n                                        disabled={!hasMoreData}\r\n                                    >\r\n                                        Next\r\n                                        <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>  \r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { CheckIcon, ChevronRightIcon, DotFilledIcon } from \"@radix-ui/react-icons\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRightIcon className=\"ml-auto\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <CheckIcon className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <DotFilledIcon className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","import React, { useState, useMemo, useRef, useEffect } from 'react';\r\nimport { ArrowUp, ArrowDown, ArrowUpDown, ThumbsDown, Award, ChevronsLeft, ChevronRight, ChevronsRight, ChevronLeft } from 'lucide-react';\r\nimport { PageMetric } from '@/pages/ReportPage/component/LandingPageSession';\r\nimport { Button } from '@/components/ui/button';\r\n\r\ninterface TableProps {\r\n  columns: string[];\r\n  data: any[];\r\n  allTimeData?: PageMetric[];\r\n  isFullScreen?: boolean;\r\n}\r\n\r\nconst getConditionalColors = (value: number, average: number) => {\r\n  const epsilon = 0.0001; // Small tolerance for floating-point comparisons\r\n\r\n  if (value > average) return 'bg-green-100 text-green-800';\r\n  if (value < average) return 'bg-red-50 text-red-800';\r\n  if (Math.abs(value - average) < epsilon) return 'bg-yellow-100 text-yellow-700'; // Handles approximate equality\r\n\r\n  return 'bg-yellow-100 text-yellow-700';\r\n};\r\n\r\n\r\nconst ReportTable: React.FC<TableProps> = ({\r\n  columns = [],\r\n  data = [],\r\n  allTimeData = [],\r\n  isFullScreen,\r\n}) => {\r\n  const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\r\n  const [filterLabel, setFilterLabel] = useState<string | null>(null);\r\n  const [filterType, setFilterType] = useState<string | null>(null);\r\n  const [columnWidths, setColumnWidths] = useState<number[]>([]);\r\n  const [isResizing, setIsResizing] = useState<number | null>(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [loadedRows, setLoadedRows] = useState<any[]>([]);\r\n  const rowsPerChunk = 30;\r\n  const rowsPerPage = 10;\r\n  const isDateTable = columns[0] === 'Date';\r\n\r\n  const tableRef = useRef<HTMLTableElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const initializationRef = useRef(false);\r\n  const dataRef = useRef(data);\r\n  const filteredDataRef = useRef<any[]>([]);\r\n\r\n  const comparisonColumns = ['Add To Cart Rate', 'Checkout Rate', 'Purchase Rate', 'Sessions'];\r\n\r\n  const parsePercentage = (value: string): number => {\r\n    return parseFloat(value?.replace('%', '').trim()) || 0;\r\n  };\r\n\r\n  // Initialize column widths only once after initial render\r\n  useEffect(() => {\r\n    if (!initializationRef.current && tableRef.current && containerRef.current) {\r\n      const headerCells = tableRef.current.querySelectorAll('thead th');\r\n      const widths = Array.from(headerCells).map(cell => {\r\n        return Math.max(100, cell.clientWidth);\r\n      });\r\n      setColumnWidths(widths);\r\n      initializationRef.current = true;\r\n    }\r\n  }, []);\r\n\r\n  // Handle window resize\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      if (tableRef.current && containerRef.current && initializationRef.current) {\r\n        const headerCells = tableRef.current.querySelectorAll('thead th');\r\n        const widths = Array.from(headerCells).map((cell, index) => {\r\n          return Math.max(100, columnWidths[index] || cell.clientWidth);\r\n        });\r\n        setColumnWidths(widths);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [columnWidths]);\r\n\r\n  const averageValues = useMemo(() => {\r\n    const averages: Record<string, number> = {};\r\n    comparisonColumns.forEach((key) => {\r\n      const validData = data.filter(item => item[key] !== undefined && !isNaN(parsePercentage(item[key] || '0')));\r\n      const average = validData.length > 0\r\n        ? validData.reduce((sum, item) => sum + parsePercentage(item[key] || '0'), 0) / validData.length\r\n        : 0;\r\n\r\n      // Convert \"Sessions\" to an integer, others remain as decimals\r\n      averages[key] = key === 'Sessions' ? Math.round(average) : parseFloat(average.toFixed(2));\r\n    });\r\n    return averages;\r\n  }, [data]);\r\n\r\n\r\n\r\n  const allTimeAverageValues = useMemo(() => {\r\n    const averages: Record<string, number> = {};\r\n    comparisonColumns.forEach((key) => {\r\n      if (allTimeData) {\r\n        const validAllTimeData = allTimeData.filter(item => item[key] !== undefined && !isNaN(parsePercentage(item[key] || '0')));\r\n        averages[key] = validAllTimeData.length > 0 ?\r\n          validAllTimeData.reduce((sum, item) => sum + parsePercentage(item[key] || '0'), 0) / validAllTimeData.length : 0;\r\n      } else {\r\n        averages[key] = 0;\r\n      }\r\n    });\r\n    return averages;\r\n  }, [allTimeData]);\r\n\r\n  const rowPerformanceLabels = useMemo(() => {\r\n    if (columns[0] === 'Date') return data.map(() => ({ currentLabel: null, allTimeLabel: null }));\r\n\r\n    return data.map((item) => {\r\n      if (!item || !comparisonColumns.every(column => item[column] !== undefined)) {\r\n        return { currentLabel: null, allTimeLabel: null };\r\n      }\r\n\r\n      const currentPerformance = comparisonColumns.some((column) => {\r\n        const value = parsePercentage(item[column] || '0');\r\n        const average = averageValues[column];\r\n        return value > average;\r\n      });\r\n\r\n      const isWorstPerformingCurrent = comparisonColumns.every((column) => {\r\n        const value = parsePercentage(item[column] || '0');\r\n        const average = averageValues[column];\r\n        return value < average;\r\n      });\r\n\r\n      const currentLabel = currentPerformance ? 'Current Top' : isWorstPerformingCurrent ? 'Current Worst' : '';\r\n\r\n      const allTimePerformance = comparisonColumns.some((column) => {\r\n        const value = parsePercentage(item[column] || '0');\r\n        const allTimeAverage = allTimeAverageValues[column];\r\n        return value > allTimeAverage;\r\n      });\r\n\r\n      const isWorstPerformingAllTime = comparisonColumns.every((column) => {\r\n        const value = parsePercentage(item[column] || '0');\r\n        const allTimeAverage = allTimeAverageValues[column];\r\n        return value < allTimeAverage;\r\n      });\r\n\r\n      const allTimeLabel = allTimePerformance ? 'All Time Top' : isWorstPerformingAllTime ? 'All Time Worst' : '';\r\n\r\n      return {\r\n        currentLabel,\r\n        allTimeLabel,\r\n      };\r\n    });\r\n  }, [data, allTimeData, averageValues, allTimeAverageValues, columns]);\r\n\r\n  const handleMouseDown = (index: number, event: React.MouseEvent) => {\r\n    setIsResizing(index);\r\n    const startX = event.pageX;\r\n    const startWidth = columnWidths[index];\r\n\r\n    const handleMouseMove = (moveEvent: MouseEvent) => {\r\n      const delta = moveEvent.pageX - startX;\r\n      const newWidth = Math.max(100, startWidth + delta);\r\n      const newWidths = [...columnWidths];\r\n      newWidths[index] = newWidth;\r\n      setColumnWidths(newWidths);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setIsResizing(null);\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n  };\r\n\r\n  const parsedData = useMemo(() =>\r\n    data.map((item, index) => ({\r\n      ...item,\r\n      currentPerformanceLabel: !isDateTable ? rowPerformanceLabels[index]?.currentLabel || null : null,\r\n      allTimePerformanceLabel: !isDateTable ? rowPerformanceLabels[index]?.allTimeLabel || null : null,\r\n      Sessions: Number(item?.Sessions || 0),\r\n      'Add To Cart Rate': parsePercentage(item?.['Add To Cart Rate'] || '0'),\r\n      'Checkout Rate': parsePercentage(item?.['Checkout Rate'] || '0'),\r\n      'Purchase Rate': parsePercentage(item?.['Purchase Rate'] || '0'),\r\n    })), [data, rowPerformanceLabels, isDateTable]);\r\n\r\n    const sortedData = useMemo(() => {\r\n      if (!sortColumn) return parsedData;\r\n    \r\n      return [...parsedData].sort((a, b) => {\r\n        const aValue = a[sortColumn];\r\n        const bValue = b[sortColumn];\r\n    \r\n        // Handle Date sorting\r\n        if (sortColumn === 'Date') {\r\n          return sortDirection === 'asc'\r\n            ? new Date(aValue).getTime() - new Date(bValue).getTime()\r\n            : new Date(bValue).getTime() - new Date(aValue).getTime();\r\n        }\r\n    \r\n        // Handle Numeric sorting\r\n        const aNum = typeof aValue === 'number'\r\n          ? aValue\r\n          : parseFloat((aValue || '0').toString().replace('%', '').trim());\r\n        const bNum = typeof bValue === 'number'\r\n          ? bValue\r\n          : parseFloat((bValue || '0').toString().replace('%', '').trim());\r\n    \r\n        if (aNum < bNum) return sortDirection === 'asc' ? -1 : 1;\r\n        if (aNum > bNum) return sortDirection === 'asc' ? 1 : -1;\r\n        return 0;\r\n      });\r\n    }, [parsedData, sortColumn, sortDirection]);\r\n    \r\n\r\n\r\n  const isNumericColumn = (column: string) => {\r\n    return [\r\n      'Date',\r\n      'Add To Cart',\r\n      'Checkouts',\r\n      'Sessions',\r\n      'Purchases',\r\n      'Visitors',\r\n      ...comparisonColumns,\r\n    ].includes(column);\r\n  };\r\n  const handleSort = (column: string) => {\r\n    if (!isNumericColumn(column)) return;\r\n  \r\n    if (sortColumn === column) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortColumn(column);\r\n      setSortDirection('asc');\r\n    } \r\n  };\r\n\r\n  const handleClickLabel = (label: string, type: string) => {\r\n    if (filterLabel === label && filterType === type) {\r\n      setFilterLabel(null);\r\n      setFilterType(null);\r\n    } else {\r\n      setFilterLabel(label);\r\n      setFilterType(type);\r\n    }\r\n  };\r\n\r\n  const filteredData = useMemo(() => {\r\n    const result = isDateTable\r\n      ? sortedData\r\n      : filterLabel\r\n        ? sortedData.filter((item) => {\r\n          if (filterType === 'current') {\r\n            return item.currentPerformanceLabel === filterLabel;\r\n          }\r\n          if (filterType === 'allTime') {\r\n            return item.allTimePerformanceLabel === filterLabel;\r\n          }\r\n          return false;\r\n        })\r\n        : sortedData;\r\n\r\n    filteredDataRef.current = result;\r\n    return result;\r\n  }, [sortedData, filterLabel, filterType, isDateTable]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (isFullScreen) {\r\n      setLoadedRows(filteredDataRef.current.slice(0, rowsPerChunk));\r\n    }\r\n  }, [isFullScreen]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isFullScreen &&\r\n      (dataRef.current !== data ||\r\n        filterLabel !== null ||\r\n        sortColumn !== null ||\r\n        sortDirection)  // Add sortDirection to trigger updates\r\n    ) {\r\n      setLoadedRows(filteredDataRef.current.slice(0, rowsPerChunk));\r\n      dataRef.current = data;\r\n    }\r\n  }, [data, filterLabel, sortColumn, sortDirection, isFullScreen]);\r\n\r\n  const loadMoreRows = () => {\r\n    if (isFullScreen && loadedRows.length < filteredDataRef.current.length) {\r\n      const nextChunk = filteredDataRef.current.slice(\r\n        loadedRows.length,\r\n        loadedRows.length + rowsPerChunk\r\n      );\r\n      setLoadedRows(prev => [...prev, ...nextChunk]);\r\n    }\r\n  };\r\n\r\n  const handleScroll = (event: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n    const target = event.currentTarget;\r\n    if (\r\n      target.scrollHeight - target.scrollTop <= target.clientHeight + 100\r\n    ) {\r\n      loadMoreRows();\r\n    }\r\n  };\r\n\r\n  const displayRows = useMemo(() => {\r\n    if (isFullScreen) {\r\n      return loadedRows;\r\n    }\r\n    return filteredData.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage);\r\n  }, [isFullScreen, loadedRows, filteredData, currentPage, rowsPerPage]);\r\n\r\n  const pageCount = Math.ceil(filteredData.length / rowsPerPage);\r\n\r\n  const goToPage = (page: number) => {\r\n    const pageNumber = Math.max(1, Math.min(page, pageCount));\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  const columnPairs = {\r\n    'Add To Cart': 'Add To Cart Rate',\r\n    'Checkouts': 'Checkout Rate',\r\n    'Purchases': 'Purchase Rate'\r\n  };\r\n  \r\n\r\n  return (\r\n    <>\r\n      <div\r\n        ref={containerRef}\r\n        className=\"rounded-md overflow-x-auto relative border\"\r\n        style={{\r\n          width: '100%',\r\n          maxHeight: isFullScreen ? 'calc(100vh - 105px)' : 'calc(100vh - 200px)',\r\n          overflowX: 'auto',\r\n        }}\r\n        onScroll={isFullScreen ? handleScroll : undefined}\r\n      >\r\n        <table\r\n          ref={tableRef}\r\n          className=\"w-full text-center shadow-lg rounded-lg border border-gray-200\"\r\n          style={{\r\n            tableLayout: 'fixed',\r\n            width: '100%',\r\n            borderCollapse: 'collapse',\r\n          }}\r\n        >\r\n          <thead className=\"bg-gray-100\">\r\n            <tr>\r\n              {columns[0] !== 'Date' && allTimeData && (\r\n                <th\r\n                  className=\"font-bold p-1 text-gray-800 text-sm border-b-2 sticky left-0 bg-gray-100 z-30 border-r border-gray-300\"\r\n                  style={{\r\n                    width: `${columnWidths[0]}px`,\r\n                    minWidth: '200px',\r\n                    position: 'sticky',\r\n                    left: 0,\r\n                    top: 0,\r\n                  }}\r\n                >\r\n                  Performance Label\r\n                  <div\r\n                    onMouseDown={(e) => handleMouseDown(0, e)}\r\n                    className={`absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-blue-200 ${isResizing === 0 ? 'bg-blue-300' : ''}`}\r\n                  />\r\n                </th>\r\n              )}\r\n              {columns.map((column, colIndex) => {\r\n                const isFirstColumn = colIndex === 0;\r\n                const needsLeftSticky = isFirstColumn && columns[0] === 'Date';\r\n                const isComparisonCol = comparisonColumns.includes(column);\r\n\r\n                return (\r\n                  <th\r\n                    key={column}\r\n                    className={`\r\n            font-bold p-1 text-gray-800 text-sm border-b-2 \r\n            capitalize sticky top-0 bg-gray-100 \r\n            border-r border-gray-300 \r\n            ${isNumericColumn(column) ? 'cursor-pointer' : ''}\r\n            ${needsLeftSticky ? 'sticky left-0 z-30' : 'z-20'}\r\n            ${isFirstColumn && columns[0] !== 'Date' && allTimeData ? 'sticky left-[150px]' : ''}\r\n          `}\r\n                    style={{\r\n                      width: `${columnWidths[colIndex] + 1}px`,\r\n                      minWidth: '200px',\r\n                      ...(isFirstColumn && {\r\n                        left: needsLeftSticky\r\n                          ? 0\r\n                          : (columns[0] !== 'Date' && allTimeData ? columnWidths[0] : 0)\r\n                      }),\r\n                      ...(needsLeftSticky && {\r\n                        backgroundColor: 'rgb(243 244 246)', // bg-gray-100\r\n                        zIndex: 30,\r\n                      })\r\n                    }}\r\n                    onClick={() => handleSort(column)}\r\n                  >\r\n                    <div className=\"flex flex-col items-center\">\r\n                      <div className=\"flex items-center justify-center mb-1\">\r\n                        <span>{column}</span>\r\n                        {isNumericColumn(column) && (\r\n                          <span className=\"ml-2\">\r\n                            {sortColumn === column ? (\r\n                              sortDirection === 'asc' ? (\r\n                                <ArrowUp className=\"w-4 h-4 text-blue-600\" />\r\n                              ) : (\r\n                                <ArrowDown className=\"w-4 h-4 text-blue-600\" />\r\n                              )\r\n                            ) : (\r\n                              <ArrowUpDown className=\"w-4 h-4 text-gray-500\" />\r\n                            )}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      {isComparisonCol && averageValues[column] !== undefined && (\r\n                        <span className=\"text-xs text-gray-500\">\r\n                          avg: {column === 'Sessions'\r\n                            ? Math.round(averageValues[column])\r\n                            : averageValues[column]?.toFixed(2)}\r\n                          {column !== 'Sessions' ? '%' : ''}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div\r\n                      onMouseDown={(e) => handleMouseDown(colIndex, e)}\r\n                      className={`absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-blue-200 ${isResizing === colIndex ? 'bg-blue-300' : ''\r\n                        }`}\r\n                    />\r\n                  </th>\r\n                );\r\n              })}\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {displayRows.map((item, index) => (\r\n              <tr\r\n                key={index}\r\n                className={`${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\r\n                  } hover:bg-gray-100 transition-colors duration-200 rounded-md`}\r\n              >\r\n                {columns[0] !== 'Date' && allTimeData && (\r\n                  <td\r\n                    className=\"p-3 text-sm font-normal sticky left-0 bg-white z-20 shadow-[2px_0_0_0_rgba(0,0,0,0.1)] border-r border-gray-300\"\r\n                    style={{\r\n                      overflow: 'hidden',\r\n                      textOverflow: 'ellipsis',\r\n                      whiteSpace: 'nowrap',\r\n                    }}\r\n                  >\r\n                    <div className=\"flex items-center gap-1 min-w-[150px]\">\r\n                      {item.currentPerformanceLabel && (\r\n                        <span\r\n                          onClick={() => handleClickLabel(item.currentPerformanceLabel, 'current')}\r\n                          className={`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${item.currentPerformanceLabel === 'Current Top'\r\n                            ? 'bg-green-100 text-green-800'\r\n                            : 'bg-red-100 text-red-800'\r\n                            } ${filterLabel === item.currentPerformanceLabel && filterType === 'current'\r\n                              ? 'ring-2 ring-offset-1 ring-opacity-60'\r\n                              : ''\r\n                            } cursor-pointer`}\r\n                        >\r\n                          {item.currentPerformanceLabel === 'Current Top' ? (\r\n                            <ArrowUp size={12} className=\"mr-1\" />\r\n                          ) : (\r\n                            <ArrowDown size={12} className=\"mr-1\" />\r\n                          )}\r\n                          {item.currentPerformanceLabel.split(' ')[1]}\r\n                        </span>\r\n                      )}\r\n                      {item.allTimePerformanceLabel && (\r\n                        <span\r\n                          onClick={() => handleClickLabel(item.allTimePerformanceLabel, 'allTime')}\r\n                          className={`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${item.allTimePerformanceLabel === 'All Time Top'\r\n                            ? 'bg-blue-100 text-blue-800'\r\n                            : 'bg-orange-100 text-orange-800'\r\n                            } ${filterLabel === item.allTimePerformanceLabel && filterType === 'allTime'\r\n                              ? 'ring-2 ring-offset-1 ring-opacity-60'\r\n                              : ''\r\n                            } cursor-pointer`}\r\n                        >\r\n                          {item.allTimePerformanceLabel === 'All Time Top' ? (\r\n                            <Award size={12} className=\"mr-1\" />\r\n                          ) : (\r\n                            <ThumbsDown size={12} className=\"mr-1\" />\r\n                          )}\r\n                          All-time\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                )}\r\n                <td\r\n                  className=\"p-3 text-sm font-normal sticky left-[150px] bg-white z-20 shadow-[2px_0_0_0_rgba(0,0,0,0.1)] border-r border-gray-300\"\r\n                  style={{\r\n                    overflow: 'hidden',\r\n                    textOverflow: 'ellipsis',\r\n                    whiteSpace: 'nowrap',\r\n                    left: `${columns[0] !== 'Date' ? columnWidths[0] : 0}px`,\r\n                  }}\r\n                >\r\n                  {item[columns[0]]}\r\n                </td>\r\n                {columns.slice(1).map((column) => {\r\n                  const cellValue = item[column as keyof typeof item];\r\n                  const isComparisonColumn = comparisonColumns.includes(column);\r\n                  const isPairedColumn = column in columnPairs;\r\n\r\n                  let colorClass = 'text-gray-800';\r\n                  if (isComparisonColumn) {\r\n                    colorClass = getConditionalColors(cellValue as number, averageValues[column]);\r\n                  } else if (isPairedColumn) {\r\n                    const rateColumn = columnPairs[column as keyof typeof columnPairs];\r\n                    const rateValue = item[rateColumn] as number;\r\n                    colorClass = getConditionalColors(rateValue, averageValues[rateColumn]);\r\n                  }\r\n                  return (\r\n                    <td\r\n                      key={column}\r\n                      className={`p-3 text-sm font-normal border-r border-gray-300 ${colorClass}`}\r\n                      style={{\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis',\r\n                        whiteSpace: 'nowrap',\r\n                      }}\r\n                    >\r\n                      <div className=\"flex items-center justify-center gap-2\">\r\n                        {column.includes('Rate')\r\n                          ? `${(cellValue as number).toFixed(2)}%`\r\n                          : cellValue}\r\n                      </div>\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {!isFullScreen && (\r\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-between gap-4\">\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Showing {((currentPage - 1) * rowsPerPage) + 1} to {Math.min(currentPage * rowsPerPage, filteredData.length)} of {filteredData.length} entries\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\r\n              onClick={() => goToPage(1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronsLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0\"\r\n              onClick={() => goToPage(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div className=\"flex items-center justify-center text-sm font-medium\">\r\n              Page {currentPage} of {pageCount}\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0\"\r\n              onClick={() => goToPage(currentPage + 1)}\r\n              disabled={currentPage === pageCount}\r\n            >\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\r\n              onClick={() => goToPage(pageCount)}\r\n              disabled={currentPage === pageCount}\r\n            >\r\n              <ChevronsRight className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(ReportTable);","import { useState, useEffect } from 'react'\r\nimport { Filter } from 'lucide-react'\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuTrigger\r\n} from \"@/components/ui/dropdown-menu\"\r\n\r\nexport interface FilterItem {\r\n  column: string\r\n  operator: '>' | '<' | '=' \r\n  value: string\r\n}\r\n\r\ninterface FilterComponentProps {\r\n  columns: string[],\r\n  filters: FilterItem[];\r\n  setFilters: (filters: FilterItem[]) => void;\r\n  onFiltersChange: (filters: FilterItem[]) => void\r\n}\r\n\r\nexport function FilterComponent({ columns, onFiltersChange,filters,setFilters }: FilterComponentProps) {\r\n  const [filterColumn, setFilterColumn] = useState<string>('')\r\n  const [filterOperator, setFilterOperator] = useState<FilterItem['operator']>('>')\r\n  const [filterValue, setFilterValue] = useState<string>('')\r\n\r\n  useEffect(() => {\r\n    onFiltersChange(filters)\r\n  }, [filters, onFiltersChange])\r\n\r\n  const addFilter = () => {\r\n    if (filterColumn && filterValue) {\r\n      setFilters([...filters, { column: filterColumn, operator: filterOperator, value: filterValue }])\r\n      setFilterColumn('')\r\n      setFilterValue('')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button variant=\"outline\" size={\"icon\"}>\r\n            <Filter className=\"h-4 w-4\" />\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent className=\"w-80 p-4\">\r\n          <div className=\"flex flex-col gap-4\">\r\n            <Select value={filterColumn} onValueChange={(value) => {\r\n              setFilterColumn(value)\r\n            }}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Select column\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {columns.map((column) => (\r\n                  <SelectItem key={column} value={column}>{column}</SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n            <Select value={filterOperator} onValueChange={(value) => setFilterOperator(value as FilterItem['operator'])}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Select operator\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n\r\n                    <SelectItem value=\">\">Greater than</SelectItem>\r\n                    <SelectItem value=\"<\">Less than</SelectItem>\r\n                    <SelectItem value=\"=\">Equal to</SelectItem>\r\n            \r\n            \r\n              </SelectContent>\r\n            </Select>\r\n            <Input\r\n              type=\"text\"\r\n              placeholder=\"Enter filter value\"\r\n              value={filterValue}\r\n              onChange={(e) => setFilterValue(e.target.value)}\r\n            />\r\n            <Button onClick={addFilter}>Add Filter</Button>\r\n          </div>\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n    </div>\r\n  )\r\n}","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { ChevronDown, Columns, RefreshCw, X, Maximize, Minimize } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport ReportTable from \"@/pages/ReportPage/component/ReportTable\";\r\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\";\r\nimport { Ga4Logo } from \"../../GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\n\r\n\r\ninterface CityMetric {\r\n  \"city\": string;\r\n  \"country\": string;\r\n  \"region\": string;\r\n  \"Add To Carts\": string;\r\n  \"Add To Cart Rate\": string;\r\n  \"Checkouts\": string;\r\n  \"Checkout Rate\": string;\r\n  \"Purchases\": string;\r\n  \"Purchase Rate\": string;\r\n  [key: string]: string;\r\n}\r\n\r\ninterface CitySessionProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst CitySessionPage: React.FC<CitySessionProps> = ({ dateRange: propDateRange }) => {\r\n  const [date, setDate] = useState<DateRange | undefined>(propDateRange);\r\n  const [allTimeData, setAllTimeData]= useState<CityMetric[]>([]);\r\n  const [filteredData, setFilteredData] = useState<CityMetric[]>([]);\r\n  const [data, setData] = useState<CityMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  \r\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\r\n  const [rowsToShow, setRowsToShow] = useState<string>('50');\r\n  const [filters, setFilters] = useState<FilterItem[]>([]);\r\n  const [removedColumns, setRemovedColumns] = useState<string[]>([]);\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  const {user} = useUser();\r\n\r\n\r\n  const allColumns = ['city', 'country', 'region', 'Visitors', 'Sessions', 'Add To Cart', 'Add To Cart Rate', 'Checkouts', 'Checkout Rate', 'Purchases', 'Purchase Rate'];\r\n\r\n  const toggleColumnSelection = (column: string) => {\r\n    setSelectedColumns(prev => {\r\n      const newColumns = prev.includes(column)\r\n        ? prev.filter(col => col !== column) // Remove column from selected\r\n        : [...prev, column]; // Add column to selected\r\n\r\n      setRemovedColumns(prevRemoved => {\r\n        // Add or remove from removedColumns only if column is 'city', 'region', or 'country'\r\n        if (['city', 'region', 'country'].includes(column)) {\r\n          if (newColumns.includes(column)) {\r\n            // If re-selected, remove from removedColumns\r\n            return prevRemoved.filter(col => col !== column);\r\n          } else {\r\n            // If deselected, add to removedColumns\r\n            return [...prevRemoved, column];\r\n          }\r\n        }\r\n        // For other columns, keep removedColumns unchanged\r\n        return prevRemoved;\r\n      });\r\n\r\n      return allColumns.filter(col => newColumns.includes(col));\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSelectedColumns(allColumns);\r\n  }, []);\r\n\r\n  // Update date state when prop changes\r\n  useEffect(() => {\r\n    setDate(propDateRange);\r\n  }, [propDateRange]);\r\n\r\n  const fetchMetrics = useCallback(async () => { \r\n    setIsLoading(true);\r\n    try {\r\n      // Ensure startDate and endDate are derived from the date state\r\n      const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n      const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n      // Fetch all-time and date-specific metrics in parallel\r\n      const [analyticsResponse, allTimeResponse] = await Promise.all([\r\n        axiosInstance.post(\r\n          `/api/analytics/locationReport/${brandId}`,\r\n          {\r\n            startDate: startDate || \"\",\r\n            endDate: endDate || \"\",\r\n            userId:user?.id,limit: rowsToShow,\r\n            ...(removedColumns.length > 0\r\n              ? { filters: { location: removedColumns } }\r\n              : {}),\r\n          },\r\n          { withCredentials: true }\r\n        ),\r\n        axiosInstance.post(\r\n          `/api/analytics/locationReport/${brandId}`,\r\n          { startDate: \"\", endDate: \"\",userId:user?.id,limit: rowsToShow, ...(removedColumns.length > 0\r\n            ? { filters: { location: removedColumns } }\r\n            : {}) },\r\n          { withCredentials: true }\r\n        ),\r\n      ]);\r\n\r\n      // Process the responses\r\n      const fetchedData = analyticsResponse.data.data || [];\r\n      const fetchedAllTimeData = allTimeResponse.data.data || [];\r\n\r\n      setData(fetchedData);\r\n      setFilteredData(fetchedData);\r\n      setAllTimeData(fetchedAllTimeData);\r\n\r\n      // Ensure selected columns match fetched data\r\n      if (fetchedData.length > 0) {\r\n        const newColumns = Object.keys(fetchedData[0]);\r\n        setSelectedColumns((prevSelected) =>\r\n          prevSelected.length === 0\r\n            ? newColumns\r\n            : prevSelected.filter((col) => newColumns.includes(col))\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching metrics:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [brandId, removedColumns, date,rowsToShow]);\r\n\r\n  // Use fetchMetrics in useEffect\r\n  useEffect(() => {\r\n    fetchMetrics();\r\n    const intervalId = setInterval(fetchMetrics, 5 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchMetrics]);\r\n\r\n  // Manual refresh handler\r\n  const handleManualRefresh = () => {\r\n    fetchMetrics();\r\n  };\r\n\r\n  \r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const sortedSelectedColumns = useMemo(() => {\r\n    return allColumns.filter((col) => selectedColumns.includes(col));\r\n  }, [allColumns, selectedColumns]);\r\n\r\n  const applyFilters = useCallback((filters: FilterItem[]) => {\r\n    let result = [...data];\r\n    \r\n    filters.forEach(filter => {\r\n      result = result.filter(item => {\r\n        const value = item[filter.column as keyof CityMetric] as string;\r\n        if (['>', '<', '='].includes(filter.operator)) {\r\n          const numValue = parseFloat(value);\r\n          const filterValue = parseFloat(filter.value);\r\n          switch (filter.operator) {\r\n            case '>': return numValue > filterValue;\r\n            case '<': return numValue < filterValue;\r\n            case '=': return numValue === filterValue;\r\n            default: return true;\r\n          }\r\n        }\r\n        return true; // Default case\r\n      });\r\n    });\r\n\r\n    setFilteredData(result); // Update filtered data\r\n  }, [data]);\r\n\r\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\r\n\r\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\r\n  const removeFilter = (index: number) => {\r\n    setFilters(filters.filter((_, i) => i !== index));\r\n  };\r\n\r\n  return (\r\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n    <CardContent className=\"mt-4\">\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Location Analytics</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n            <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button variant=\"outline\" size={\"icon\"}>\r\n                  <Columns className=\"h-4 w-4\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent className=\"w-56\">\r\n                {allColumns.map((column) => (\r\n                  <DropdownMenuItem key={column} className=\"flex items-center space-x-2\">\r\n                    <Checkbox\r\n                      id={`column-${column}`}\r\n                      checked={selectedColumns.includes(column)}\r\n                      onCheckedChange={() => toggleColumnSelection(column)}\r\n                    />\r\n                    <label htmlFor={`column-${column}`} className=\"flex-1 cursor-pointer\">\r\n                      {column}\r\n                    </label>\r\n                  </DropdownMenuItem>\r\n                ))}\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n            <FilterComponent\r\n              columns={numericColumns}\r\n              onFiltersChange={applyFilters}\r\n              filters={filters}\r\n              setFilters={setFilters}\r\n            />\r\n             <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n             <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button variant=\"outline\">\r\n                  Show {rowsToShow === '10000' ? 'all' : rowsToShow} rows\r\n                  <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent>\r\n                <DropdownMenuItem onSelect={() => setRowsToShow('50')}>Show 50 rows</DropdownMenuItem>\r\n                <DropdownMenuItem onSelect={() => setRowsToShow('100')}>Show 100 rows</DropdownMenuItem>\r\n                <DropdownMenuItem onSelect={() => setRowsToShow('10000')}>Show all rows</DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          </div>\r\n        </div>\r\n\r\n        {filters.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {filters.map((filter, index) => (\r\n              <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n                <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\r\n                <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\r\n                  <X className=\"h-3 w-3\" />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {isLoading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <ReportTable columns={sortedSelectedColumns} data={memoizedFilteredData}  allTimeData={allTimeData} isFullScreen={isFullScreen} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </CardContent>\r\n  </Card>\r\n  );\r\n};\r\n\r\nexport default CitySessionPage;","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { ChevronDown, Columns, RefreshCw, X, Maximize, Minimize } from 'lucide-react';\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport ReportTable from \"@/pages/ReportPage/component/ReportTable\";\r\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\";\r\nimport { Ga4Logo } from \"../../GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { Card, CardContent} from \"@/components/ui/card\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\n\r\nexport interface PageMetric {\r\n  \"Add To Carts\": string;\r\n  \"Add To Cart Rate\": string;\r\n  \"Checkouts\": string;\r\n  \"Checkout Rate\": string;\r\n  \"Purchases\": string;\r\n  \"Purchase Rate\": string;\r\n  [key: string]: string;\r\n}\r\n\r\ninterface LandingPageSessionProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst LandingPageSession: React.FC<LandingPageSessionProps> = ({ dateRange: propDateRange }) => {\r\n  const [date, setDate] = useState<DateRange | undefined>(propDateRange);\r\n  const [allTimeData, setAllTimeData] = useState<PageMetric[]>([]);\r\n  const [filteredData, setFilteredData] = useState<PageMetric[]>([]);\r\n  const [filters, setFilters] = useState<FilterItem[]>([]); \r\n  const [data, setData] = useState<PageMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\r\n  const [rowsToShow, setRowsToShow] = useState<string>('50');\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n\r\n  const { user } = useUser();\r\n\r\n\r\n  useEffect(() => {\r\n    setDate(propDateRange);\r\n  }, [propDateRange]);\r\n\r\n  const toggleColumnSelection = (column: string) => {\r\n    setSelectedColumns(prev => {\r\n      const newColumns = prev.includes(column)\r\n        ? prev.filter(col => col !== column)\r\n        : [...prev, column];\r\n\r\n      return allColumns.filter(col => newColumns.includes(col));\r\n    });\r\n  };\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n\r\n      // Fetch all-time and date-specific metrics\r\n      const [analyticsResponse, allTimeResponse] = await Promise.all([\r\n        axiosInstance.post(`/api/analytics/landingpageReport/${brandId}`, {\r\n          startDate: startDate || \"\",\r\n          endDate: endDate || \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true }),\r\n        axiosInstance.post(`/api/analytics/landingpageReport/${brandId}`, {\r\n          startDate: \"\",\r\n          endDate: \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true })\r\n      ]);\r\n\r\n      const fetchedData = analyticsResponse.data.data || [];\r\n      const fetchedAllTimeData = allTimeResponse.data.data || [];\r\n\r\n      setData(fetchedData);\r\n      setFilteredData(fetchedData);\r\n      setAllTimeData(fetchedAllTimeData);\r\n\r\n      if (fetchedData.length > 0) {\r\n        const allColumns = Object.keys(fetchedData[0]);\r\n        setSelectedColumns((prevSelected) =>\r\n          prevSelected.length === 0\r\n            ? allColumns\r\n            : prevSelected.filter((col) => allColumns.includes(col))\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    \r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, rowsToShow]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  const allColumns = data.length > 0 ? Object.keys(data[0]) : [];\r\n  const sortedSelectedColumns = allColumns.filter(col => selectedColumns.includes(col));\r\n\r\n  const applyFilters = useCallback((filters: FilterItem[]) => {\r\n    let result = [...data];\r\n\r\n    filters.forEach(filter => {\r\n      result = result.filter(item => {\r\n        const value = item[filter.column as keyof PageMetric] as string;\r\n        if (['>', '<', '='].includes(filter.operator)) {\r\n          const numValue = parseFloat(value);\r\n          const filterValue = parseFloat(filter.value);\r\n          switch (filter.operator) {\r\n            case '>': return numValue > filterValue;\r\n            case '<': return numValue < filterValue;\r\n            case '=': return numValue === filterValue;\r\n            default: return true;\r\n          }\r\n        }\r\n        return true; // Default case\r\n      });\r\n    });\r\n\r\n    setFilteredData(result); // Update filtered data\r\n  }, [data]);\r\n\r\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\r\n\r\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\r\n  const removeFilter = (index: number) => {\r\n    setFilters(filters.filter((_, i) => i !== index)); // Fixed filter reference\r\n  };\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen); // Toggle full-screen state\r\n  };\r\n\r\n  return (\r\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent className=\"mt-4\">\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <h2 className=\"text-lg font-medium\">Landing Page Analytics</h2>\r\n              <Ga4Logo />\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-3\">\r\n              <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n                <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n              </Button>\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\" size={\"icon\"}>\r\n                    <Columns className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent className=\"w-56\">\r\n                  {allColumns.map((column) => (\r\n                    <DropdownMenuItem key={column} className=\"flex items-center space-x-2\">\r\n                      <Checkbox\r\n                        id={`column-${column}`}\r\n                        checked={selectedColumns.includes(column)}\r\n                        onCheckedChange={() => toggleColumnSelection(column)}\r\n                      />\r\n                      <label htmlFor={`column-${column}`} className=\"flex-1 cursor-pointer\">\r\n                        {column}\r\n                      </label>\r\n                    </DropdownMenuItem>\r\n                  ))}\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n              <FilterComponent\r\n                columns={numericColumns}\r\n                onFiltersChange={applyFilters}\r\n                filters={filters}\r\n                setFilters={setFilters}\r\n              />\r\n               <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n              </Button>\r\n               <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\">\r\n                    Show {rowsToShow === '10000' ? 'all' : rowsToShow} rows\r\n                    <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('50')}>Show 50 rows</DropdownMenuItem>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('100')}>Show 100 rows</DropdownMenuItem>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('10000')}>Show all rows</DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            </div>\r\n          </div>\r\n\r\n          {filters.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {filters.map((filter, index) => (\r\n                <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n                  <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\r\n                  <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\r\n                    <X className=\"h-3 w-3\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"rounded-md overflow-hidden\">\r\n            {isLoading ? (\r\n              <TableSkeleton />\r\n            ) : (\r\n              <ReportTable columns={sortedSelectedColumns} data={memoizedFilteredData}  allTimeData={allTimeData} isFullScreen={isFullScreen} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default LandingPageSession;","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { ChevronDown, Columns, RefreshCw, X, Maximize, Minimize } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport ReportTable from \"@/pages/ReportPage/component/ReportTable\";\r\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { useUser } from \"@/context/UserContext\"\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\n\r\ninterface AgeMetric {\r\n  \"Add To Carts\": string;\r\n  \"Add To Cart Rate\": string;\r\n  \"Checkouts\": string;\r\n  \"Checkout Rate\": string;\r\n  \"Purchases\": string;\r\n  \"Purchase Rate\": string;\r\n  [key: string]: string;\r\n}\r\n\r\ninterface AgeBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst AgeReportPage: React.FC<AgeBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const [date, setDate] = useState<DateRange | undefined>(propDateRange);\r\n  const [filteredData, setFilteredData] = useState<AgeMetric[]>([]);\r\n  const [allTimeData, setAllTimeData] = useState<AgeMetric[]>([]);\r\n  const [filters, setFilters] = useState<FilterItem[]>([]);\r\n  const [data, setData] = useState<AgeMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  // Use optional chaining to safely access date properties\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\r\n  const [isFullScreen, setIsFullScreen]= useState<boolean>(false);\r\n  const [rowsToShow, setRowsToShow] = useState<string>('50')\r\n  const {user} = useUser();\r\n\r\n  // Update date state when prop changes\r\n  useEffect(() => {\r\n    setDate(propDateRange);\r\n  }, [propDateRange]);\r\n\r\n\r\n  const toggleColumnSelection = (column: string) => {\r\n    setSelectedColumns(prev => {\r\n      const newColumns = prev.includes(column)\r\n        ? prev.filter(col => col !== column)\r\n        : [...prev, column];\r\n\r\n      return allColumns.filter(col => newColumns.includes(col));\r\n    });\r\n  };\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n\r\n      // Fetch all-time and date-specific metrics\r\n      const [analyticsResponse, allTimeResponse] = await Promise.all([\r\n        axiosInstance.post(`/api/analytics/agereport/${brandId}`, {\r\n          startDate: startDate || \"\",\r\n          endDate: endDate || \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true }),\r\n        axiosInstance.post(`/api/analytics/agereport/${brandId}`, {\r\n          startDate: \"\",\r\n          endDate: \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true })\r\n      ]);\r\n\r\n      const fetchedData = analyticsResponse.data.data || [];\r\n      const fetchedAllTimeData = allTimeResponse.data.data || [];\r\n\r\n      setData(fetchedData);\r\n      setFilteredData(fetchedData);\r\n      setAllTimeData(fetchedAllTimeData);\r\n\r\n      if (fetchedData.length > 0) {\r\n        const allColumns = Object.keys(fetchedData[0]);\r\n        setSelectedColumns((prevSelected) =>\r\n          prevSelected.length === 0\r\n            ? allColumns\r\n            : prevSelected.filter((col) => allColumns.includes(col))\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n      \r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, rowsToShow]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  const allColumns = data.length > 0 ? Object.keys(data[0]) : [];\r\n  const sortedSelectedColumns = allColumns.filter(col => selectedColumns.includes(col));\r\n\r\n  const applyFilters = useCallback((filters: FilterItem[]) => {\r\n    let result = [...data];\r\n\r\n    filters.forEach(filter => {\r\n      result = result.filter(item => {\r\n        const value = item[filter.column as keyof AgeMetric] as string;\r\n        if (['>', '<', '='].includes(filter.operator)) {\r\n          const numValue = parseFloat(value);\r\n          const filterValue = parseFloat(filter.value);\r\n          switch (filter.operator) {\r\n            case '>': return numValue > filterValue;\r\n            case '<': return numValue < filterValue;\r\n            case '=': return numValue === filterValue;\r\n            default: return true;\r\n          }\r\n        }\r\n        return true; // Default case\r\n      });\r\n    });\r\n\r\n    setFilteredData(result); // Update filtered data\r\n  }, [data]);\r\n\r\n  const removeFilter = (index: number) => {\r\n    setFilters(filters.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\r\n\r\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  return (\r\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent className=\"mt-4\">\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <h2 className=\"text-lg font-medium\">Age Analytics</h2>\r\n              <Ga4Logo />\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-3\">\r\n              <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n                <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n              </Button>\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\" size={\"icon\"}>\r\n                    <Columns className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent className=\"w-56\">\r\n                  {allColumns.map((column) => (\r\n                    <DropdownMenuItem key={column} className=\"flex items-center space-x-2\">\r\n                      <Checkbox\r\n                        id={`column-${column}`}\r\n                        checked={selectedColumns.includes(column)}\r\n                        onCheckedChange={() => toggleColumnSelection(column)}\r\n                      />\r\n                      <label htmlFor={`column-${column}`} className=\"flex-1 cursor-pointer\">\r\n                        {column}\r\n                      </label>\r\n                    </DropdownMenuItem>\r\n                  ))}\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n              <FilterComponent\r\n                columns={numericColumns}\r\n                onFiltersChange={applyFilters}\r\n                filters={filters}\r\n                setFilters={setFilters}\r\n              />\r\n              <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n              </Button>\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\">\r\n                    Show {rowsToShow === '10000' ? 'all' : rowsToShow} rows\r\n                    <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('50')}>Show 50 rows</DropdownMenuItem>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('100')}>Show 100 rows</DropdownMenuItem>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('10000')}>Show all rows</DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            </div>\r\n          </div>\r\n\r\n          {filters.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {filters.map((filter, index) => (\r\n                <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n                  <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\r\n                  <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\r\n                    <X className=\"h-3 w-3\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"rounded-md overflow-hidden\">\r\n            {isLoading ? (\r\n              <TableSkeleton />\r\n            ) : (\r\n              <ReportTable columns={sortedSelectedColumns} data={memoizedFilteredData} allTimeData={allTimeData} isFullScreen={isFullScreen} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default AgeReportPage;","import { useState, useCallback, useEffect, useMemo } from \"react\"\r\nimport { useParams } from 'react-router-dom'\r\nimport { format } from \"date-fns\"\r\nimport { ChevronDown, Columns, RefreshCw, X, Maximize, Minimize } from \"lucide-react\"\r\nimport { DateRange } from \"react-day-picker\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger\r\n} from \"@/components/ui/dropdown-menu\"\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\"\r\nimport ReportTable from \"@/pages/ReportPage/component/ReportTable\"\r\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\"\r\nimport { Ga4Logo } from \"../../GeneralisedDashboard/components/OtherPlatformModalContent\"\r\nimport { useUser } from \"@/context/UserContext\"\r\nimport { Card, CardContent } from \"@/components/ui/card\"\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\"\r\n\r\n\r\ninterface GenderMetric {\r\n  \"Add To Carts\": string;\r\n  \"Add To Cart Rate\": string;\r\n  \"Checkouts\": string;\r\n  \"Checkout Rate\": string;\r\n  \"Purchases\": string;\r\n  \"Purchase Rate\": string;\r\n  [key: string]: string;\r\n}\r\n\r\ninterface GenderBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst GenderReportPage: React.FC<GenderBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const [date, setDate] = useState<DateRange | undefined>(propDateRange);\r\n  const [filteredData, setFilteredData] = useState<GenderMetric[]>([])\r\n  const [allTimeData, setAllTimeData] = useState<GenderMetric[]>([])\r\n  const [filters, setFilters] = useState<FilterItem[]>([])\r\n  const [data, setData] = useState<GenderMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n  const {user} = useUser();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  \r\n  // Use optional chaining to safely access date properties\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  \r\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\r\n  const [rowsToShow, setRowsToShow] = useState<string>('50')\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n\r\n  // Update date state when prop changes\r\n  useEffect(() => {\r\n    setDate(propDateRange);\r\n  }, [propDateRange]);\r\n\r\n  const toggleColumnSelection = (column: string) => {\r\n    setSelectedColumns(prev => {\r\n      const newColumns = prev.includes(column)\r\n        ? prev.filter(col => col !== column)\r\n        : [...prev, column];\r\n\r\n      return allColumns.filter(col => newColumns.includes(col));\r\n    });\r\n  };\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n\r\n      // Fetch all-time and date-specific metrics\r\n      const [analyticsResponse, allTimeResponse] = await Promise.all([\r\n        axiosInstance.post(`/api/analytics/genderReport/${brandId}`, {\r\n          startDate: startDate || \"\",\r\n          endDate: endDate || \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true }),\r\n        axiosInstance.post(`/api/analytics/genderReport/${brandId}`, {\r\n          startDate: \"\",\r\n          endDate: \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true })\r\n      ]);\r\n  \r\n      const fetchedData = analyticsResponse.data.data || [];\r\n      const fetchedAllTimeData = allTimeResponse.data.data || [];\r\n  \r\n      setData(fetchedData);\r\n      setFilteredData(fetchedData);\r\n      setAllTimeData(fetchedAllTimeData);\r\n  \r\n      if (fetchedData.length > 0) {\r\n        const allColumns = Object.keys(fetchedData[0]);\r\n        setSelectedColumns((prevSelected) =>\r\n          prevSelected.length === 0\r\n            ? allColumns\r\n            : prevSelected.filter((col) => allColumns.includes(col))\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, rowsToShow]);\r\n  \r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n  \r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  const allColumns = data.length > 0 ? Object.keys(data[0]) : [];\r\n  const sortedSelectedColumns = allColumns.filter(col => selectedColumns.includes(col));\r\n\r\n  const applyFilters = useCallback((filters: FilterItem[]) => {\r\n    let result = [...data];\r\n\r\n    filters.forEach(filter => {\r\n      result = result.filter(item => {\r\n        const value = item[filter.column as keyof GenderMetric] as string;\r\n        if (['>', '<', '='].includes(filter.operator)) {\r\n          const numValue = parseFloat(value);\r\n          const filterValue = parseFloat(filter.value);\r\n          switch (filter.operator) {\r\n            case '>': return numValue > filterValue;\r\n            case '<': return numValue < filterValue;\r\n            case '=': return numValue === filterValue;\r\n            default: return true;\r\n          }\r\n        }\r\n        return true; // Default case\r\n      });\r\n    });\r\n\r\n    setFilteredData(result); // Update filtered data\r\n  }, [data]);\r\n\r\n  const removeFilter = (index: number) => {\r\n    setFilters(filters.filter((_, i) => i !== index))\r\n  }\r\n\r\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\r\n\r\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate']\r\n  \r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  return (\r\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n    <CardContent className=\"mt-4\">\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Gender Analytics</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n            <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button variant=\"outline\" size={\"icon\"}>\r\n                  <Columns className=\"h-4 w-4\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent className=\"w-56\">\r\n                {allColumns.map((column) => (\r\n                  <DropdownMenuItem key={column} className=\"flex items-center space-x-2\">\r\n                    <Checkbox\r\n                      id={`column-${column}`}\r\n                      checked={selectedColumns.includes(column)}\r\n                      onCheckedChange={() => toggleColumnSelection(column)}\r\n                    />\r\n                    <label htmlFor={`column-${column}`} className=\"flex-1 cursor-pointer\">\r\n                      {column}\r\n                    </label>\r\n                  </DropdownMenuItem>\r\n                ))}\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n            <FilterComponent\r\n              columns={numericColumns}\r\n              onFiltersChange={applyFilters}\r\n              filters={filters}\r\n              setFilters={setFilters}\r\n            />\r\n             <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n             <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button variant=\"outline\">\r\n                  Show {rowsToShow === '10000' ? 'all' : rowsToShow} rows\r\n                  <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent>\r\n                <DropdownMenuItem onSelect={() => setRowsToShow('50')}>Show 50 rows</DropdownMenuItem>\r\n                <DropdownMenuItem onSelect={() => setRowsToShow('100')}>Show 100 rows</DropdownMenuItem>\r\n                <DropdownMenuItem onSelect={() => setRowsToShow('10000')}>Show all rows</DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          </div>\r\n        </div>\r\n\r\n        {filters.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {filters.map((filter, index) => (\r\n              <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n                <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\r\n                <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\r\n                  <X className=\"h-3 w-3\" />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {isLoading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <ReportTable columns={sortedSelectedColumns} data={memoizedFilteredData} allTimeData={allTimeData} isFullScreen={isFullScreen} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </CardContent>\r\n  </Card>\r\n  )\r\n}\r\n\r\nexport default GenderReportPage;","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { ChevronDown, Columns, RefreshCw, X, Maximize, Minimize } from 'lucide-react';\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport ReportTable from \"@/pages/ReportPage/component/ReportTable\";\r\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { Card, CardContent} from \"@/components/ui/card\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\n\r\ninterface ChannelMetric {\r\n  \"Add To Carts\": string;\r\n  \"Add To Cart Rate\": string;\r\n  \"Checkouts\": string;\r\n  \"Checkout Rate\": string;\r\n  \"Purchases\": string;\r\n  \"Purchase Rate\": string;\r\n  [key: string]: string;\r\n}\r\n\r\nconst ChannelSessionPage: React.FC<{ dateRange?: DateRange }> = ({ dateRange }) => {\r\n  const [date, setDate] = useState<DateRange | undefined>(dateRange);\r\n  const [filteredData, setFilteredData] = useState<ChannelMetric[]>([]);\r\n  const [allTimeData, setAllTimeData] = useState<ChannelMetric[]>([]);\r\n  const [filters, setFilters] = useState<FilterItem[]>([]);\r\n  const [data, setData] = useState<ChannelMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\r\n  const [rowsToShow, setRowsToShow] = useState<string>('50');\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  const { user } = useUser();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  // Update date state when dateRange changes\r\n  useEffect(() => {\r\n    setDate(dateRange);\r\n  }, [dateRange]);\r\n\r\n  const toggleColumnSelection = (column: string) => {\r\n    setSelectedColumns(prev => {\r\n      const newColumns = prev.includes(column)\r\n        ? prev.filter(col => col !== column)\r\n        : [...prev, column];\r\n\r\n      return allColumns.filter(col => newColumns.includes(col));\r\n    });\r\n  };\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n\r\n      const [analyticsResponse, allTimeResponse] = await Promise.all([\r\n        axiosInstance.post(`/api/analytics/channelReport/${brandId}`, {\r\n          startDate: startDate || \"\",\r\n          endDate: endDate || \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true }),\r\n        axiosInstance.post(`/api/analytics/channelReport/${brandId}`, {\r\n          startDate: \"\",\r\n          endDate: \"\",\r\n          userId: user?.id,\r\n          limit: rowsToShow\r\n        }, { withCredentials: true })\r\n      ]);\r\n\r\n      const fetchedData = analyticsResponse.data.data || [];\r\n      const fetchedAllTimeData = allTimeResponse.data.data || [];\r\n\r\n      setData(fetchedData);\r\n      setFilteredData(fetchedData);\r\n      setAllTimeData(fetchedAllTimeData);\r\n\r\n      if (fetchedData.length > 0) {\r\n        const allColumns = Object.keys(fetchedData[0]);\r\n        setSelectedColumns((prevSelected) =>\r\n          prevSelected.length === 0\r\n            ? allColumns\r\n            : prevSelected.filter((col) => allColumns.includes(col))\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n      \r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, rowsToShow]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  const allColumns = data.length > 0 ? Object.keys(data[0]) : [];\r\n  const sortedSelectedColumns = allColumns.filter(col => selectedColumns.includes(col));\r\n\r\n  const applyFilters = useCallback((filters: FilterItem[]) => {\r\n    let result = [...data];\r\n\r\n    filters.forEach(filter => {\r\n      result = result.filter(item => {\r\n        const value = item[filter.column as keyof ChannelMetric] as string;\r\n        if (['>', '<', '='].includes(filter.operator)) {\r\n          const numValue = parseFloat(value);\r\n          const filterValue = parseFloat(filter.value);\r\n          switch (filter.operator) {\r\n            case '>': return numValue > filterValue;\r\n            case '<': return numValue < filterValue;\r\n            case '=': return numValue === filterValue;\r\n            default: return true;\r\n          }\r\n        }\r\n        return true; // Default case\r\n      });\r\n    });\r\n\r\n    setFilteredData(result); // Update filtered data\r\n  }, [data]);\r\n\r\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\r\n\r\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\r\n  const removeFilter = (index: number) => {\r\n    setFilters(filters.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const toggleFullScreen = () => {\r\n    if (!isFullScreen) {\r\n      document.documentElement.requestFullscreen();\r\n    } else {\r\n      document.exitFullscreen();\r\n    }\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fullScreenChangeHandler = () => {\r\n      setIsFullScreen(!!document.fullscreenElement);\r\n    };\r\n\r\n    document.addEventListener('fullscreenchange', fullScreenChangeHandler);\r\n\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', fullScreenChangeHandler);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent className=\"mt-4\">\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <h2 className=\"text-lg font-medium\">Referring Channel Analytics</h2>\r\n              <Ga4Logo />\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-3\">\r\n              <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n                <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n              </Button>\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\" size={\"icon\"}>\r\n                    <Columns className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent className=\"w-56\">\r\n                  {allColumns.map((column) => (\r\n                    <DropdownMenuItem key={column} className=\"flex items-center space-x-2\">\r\n                      <Checkbox\r\n                        id={`column-${column}`}\r\n                        checked={selectedColumns.includes(column)}\r\n                        onCheckedChange={() => toggleColumnSelection(column)}\r\n                      />\r\n                      <label htmlFor={`column-${column}`} className=\"flex-1 cursor-pointer\">\r\n                        {column}\r\n                      </label>\r\n                    </DropdownMenuItem>\r\n                  ))}\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n              <FilterComponent\r\n                columns={numericColumns}\r\n                onFiltersChange={applyFilters}\r\n                filters={filters}\r\n                setFilters={setFilters}\r\n              />\r\n              <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n              </Button>\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\">\r\n                    Show {rowsToShow === '10000' ? 'all' : rowsToShow} rows\r\n                    <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('50')}>Show 50 rows</DropdownMenuItem>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('100')}>Show 100 rows</DropdownMenuItem>\r\n                  <DropdownMenuItem onSelect={() => setRowsToShow('10000')}>Show all rows</DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            </div>\r\n          </div>\r\n\r\n          {filters.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {filters.map((filter, index) => (\r\n                <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n                  <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\r\n                  <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\r\n                    <X className=\"h-3 w-3\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"rounded-md overflow-hidden\">\r\n            {isLoading ? (\r\n              <TableSkeleton />\r\n            ) : (\r\n              <ReportTable columns={sortedSelectedColumns} data={memoizedFilteredData}  allTimeData={allTimeData} isFullScreen={isFullScreen} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ChannelSessionPage;\r\n\r\n","import ProductTab from \"./component/ProductTab\";\r\nimport SearchTermTable from \"./component/SearchTermTable\";\r\nimport { useParams } from 'react-router-dom'\r\nimport AgeGenderMetrics from \"./component/AgeGenderMetrics\";\r\nimport CityBasedReports from '@/pages/ReportPage/component/CitySessionPage';\r\nimport LandingPageSession from \"../ReportPage/component/LandingPageSession\";\r\nimport AgeReportPage from \"../ReportPage/component/AgeReportPage\";\r\nimport GenderBasedReports from '@/pages/ReportPage/component/GenderReportPage';\r\nimport ChannelSessionPage from \"../ReportPage/component/RefferingChannelPage\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useMemo } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\n\r\nexport default function Dashboard() {\r\n  const { brandId } = useParams()\r\n    if (!brandId) {\r\n        console.error(\"Brand ID is not defined\");\r\n        return <div>Error: Brand ID is missing</div>;\r\n    }\r\n\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n\r\n    const dateRange={\r\n      from: date.from ? new Date(date.from) : undefined,\r\n      to: date.to ? new Date(date.to) : undefined \r\n    }\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen overflow-hidden\">\r\n       <nav className=\"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\r\n          <h1 className=\"text-2xl font-bold\">Segment Dashboard</h1>\r\n      \r\n        <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                  \r\n                    \r\n                  />\r\n                </div>\r\n                </div>\r\n      </nav>\r\n      <div className=\"flex flex-col p-6 gap-6 overflow-auto\">\r\n      <ProductTab />\r\n      <SearchTermTable />\r\n      <AgeGenderMetrics />\r\n      <section className=\"mb-6\">\r\n                  <CityBasedReports dateRange={dateRange} />\r\n                </section>\r\n                <section className=\"mb-6\">\r\n                  <LandingPageSession dateRange={dateRange} />\r\n                </section>\r\n                <section className=\"mb-6\">\r\n                  <ChannelSessionPage dateRange={dateRange} />\r\n                </section>\r\n                <section className=\"mb-6\">\r\n                  <AgeReportPage dateRange={dateRange} />\r\n                </section>\r\n                <section className=\"mb-6\">\r\n                  <GenderBasedReports dateRange={dateRange} />\r\n                </section>\r\n      </div>\r\n  \r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport Dashboard from \"./Dashboard\";\r\nimport CollapsibleSidebar from \"@/pages/Dashboard/CollapsibleSidebar\";\r\n const SegmentDashboard : React.FC=()=>{\r\n    return (\r\n        <div className=\"flex h-screen\"> \r\n        <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n       <Dashboard />\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\nexport default SegmentDashboard;","import { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useToast } from '../hooks/use-toast';\r\nimport { useDispatch} from 'react-redux';\r\nimport { setUser } from '@/store/slices/UserSlice'\r\n\r\n\r\nconst GoogleCallback = () => {\r\n    const navigate = useNavigate();\r\n    const { toast } = useToast();\r\n    const dispatch = useDispatch();\r\n    const baseURL = import.meta.env.PROD\r\n        ? import.meta.env.VITE_API_URL\r\n        : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n        useEffect(() => {\r\n            const handleOauthCallback = async () => {\r\n                try {\r\n                    const queryParams = new URLSearchParams(window.location.search);\r\n                    const googletoken = queryParams.get('token');\r\n                    const fbToken = queryParams.get('fbToken');\r\n                    const googleRefreshToken = queryParams.get('googleRefreshToken');\r\n                    const zohoRefreshToken = queryParams.get('zohoToken');\r\n        \r\n                    // Helper function for token update\r\n                    const updateToken = async (url: string, token: string, type: string) => {\r\n                        const response = await axios.get(`${baseURL}${url}?${type}=${token}`, { withCredentials: true });\r\n                        if (response.data.success) {\r\n                            console.log(`${type} token updated successfully, redirecting to /dashboard`);\r\n                            if (type === \"zohoToken\") {\r\n                                console.log(\"Zoho token updated, redirecting to /profile\");\r\n                                navigate('/profile');\r\n                            } else {\r\n                                console.log(`${type} token updated, redirecting to /dashboard`);\r\n                                navigate('/dashboard');\r\n                            }\r\n                            return true;\r\n                        } else {\r\n                            console.error(`Failed to update ${type} token`);\r\n                            toast({\r\n                                title: 'Update Failed',\r\n                                description: `Unable to update ${type} token.`,\r\n                                variant: 'destructive',\r\n                            });\r\n                            navigate('/');\r\n                            return false;\r\n                        }\r\n                    };\r\n        \r\n                    if (googletoken) {\r\n                        console.log('Token found, proceeding with login');\r\n                        const login = await axios.post(`${baseURL}/api/auth/login/oauth?auth_token=${googletoken}`, { email: null, password: null });\r\n                    \r\n                        if (login.data.success) {\r\n                            console.log('Login successful');\r\n                            const user = login.data.user;\r\n                    \r\n                            dispatch(setUser(user));\r\n                    \r\n                            if (!user.brands || user.brands.length === 0) {\r\n                                console.log('No brands found, redirecting to /brand-setup');\r\n                                navigate('/brand-setup');\r\n                            } else {\r\n                                console.log('Brands found, redirecting to /dashboard');\r\n                                navigate('/dashboard');\r\n                            }\r\n                            return;\r\n                        } else {\r\n                            console.log('Login failed, redirecting to /');\r\n                            toast({\r\n                                title: 'Login Failed',\r\n                                description: 'Unable to authenticate with Google.',\r\n                                variant: 'destructive',\r\n                            });\r\n                            navigate('/');\r\n                            return;\r\n                        }\r\n                    }\r\n                    \r\n        \r\n                    if (fbToken) {\r\n                        await updateToken('/api/auth/updateTokens/facebook', fbToken, 'fbToken');\r\n                        return;\r\n                    }\r\n        \r\n                    if (googleRefreshToken) {\r\n                        await updateToken('/api/auth/updateTokens/google', googleRefreshToken, 'googleRefreshToken');\r\n                        return;\r\n                    }\r\n                    if (zohoRefreshToken) {\r\n                        await updateToken('/api/auth/updateTokens/zoho', zohoRefreshToken, 'zohoToken');\r\n                        return;\r\n                    }\r\n        \r\n                    console.log('No token present, redirecting to /');\r\n                    navigate('/');\r\n        \r\n                } catch (error) {\r\n                    console.error('Error during OAuth callback:', error);\r\n                    toast({\r\n                        title: 'Error',\r\n                        description: 'An error occurred while handling the login callback.',\r\n                        variant: 'destructive',\r\n                    });\r\n                    navigate('/');\r\n                }\r\n            };\r\n        \r\n            handleOauthCallback();\r\n        }, [navigate, setUser, toast, baseURL]);\r\n        \r\n\r\n    return null;\r\n};\r\n\r\nexport default GoogleCallback;","import React, { useState, useMemo, useRef, useEffect } from 'react';\r\nimport { ArrowUp, ArrowDown, ChevronsLeft, ChevronRight, ChevronsRight, ChevronLeft, GripVertical } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\n\r\ninterface TableProps {\r\n  columns: string[];\r\n  data: any[];\r\n  isFullScreen?: boolean;\r\n}\r\n\r\nconst getConditionalColors = (value: number, average: number) => {\r\n  const epsilon = 0.0001;\r\n\r\n  if (value > average) return 'bg-green-100 text-green-800';\r\n  if (value < average) return 'bg-red-50 text-red-800';\r\n  if (Math.abs(value - average) < epsilon) return 'bg-yellow-100 text-yellow-700';\r\n\r\n  return 'bg-yellow-100 text-yellow-700';\r\n};\r\n\r\nconst NewReportTable: React.FC<TableProps> = ({\r\n  columns = [],\r\n  data = [],\r\n  isFullScreen,\r\n}) => {\r\n    const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n    const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\r\n    const [columnWidths, setColumnWidths] = useState<number[]>([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [loadedRows, setLoadedRows] = useState<any[]>([]);\r\n    const [columnOrder, setColumnOrder] = useState<string[]>(columns);\r\n    const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\r\n    \r\n  \r\n    const rowsPerChunk = 30;\r\n    const rowsPerPage = 9;\r\n    const minColumnWidth = isFullScreen ? 100 : 150;\r\n  \r\n    const tableRef = useRef<HTMLTableElement>(null);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const widthsRef = useRef<number[]>([]);\r\n  \r\n    const comparisonColumns = ['Add To Cart Rate', 'Checkout Rate', 'Purchase Rate', 'Sessions'];\r\n\r\n    useEffect(() => {\r\n      setColumnOrder(columns);\r\n    }, [columns]);\r\n  \r\n    const handleDragStart = (e: React.DragEvent, column: string) => {\r\n      setDraggedColumn(column);\r\n      e.dataTransfer.effectAllowed = 'move';\r\n    };\r\n  \r\n    const handleDragOver = (e: React.DragEvent) => {\r\n      e.preventDefault();\r\n      e.dataTransfer.dropEffect = 'move';\r\n    };\r\n  \r\n    const handleDrop = (e: React.DragEvent, targetColumn: string) => {\r\n      e.preventDefault();\r\n      if (!draggedColumn || draggedColumn === targetColumn) return;\r\n  \r\n      const newOrder = [...columnOrder];\r\n      const draggedIdx = newOrder.indexOf(draggedColumn);\r\n      const targetIdx = newOrder.indexOf(targetColumn);\r\n  \r\n      newOrder.splice(draggedIdx, 1);\r\n      newOrder.splice(targetIdx, 0, draggedColumn);\r\n  \r\n      setColumnOrder(newOrder);\r\n      setDraggedColumn(null);\r\n    };\r\n\r\n    const parsePercentage = (value: string | number): number => {\r\n        // If value is already a number, return it\r\n        if (typeof value === 'number') return value;\r\n        \r\n        // If value is undefined or null, return 0\r\n        if (!value) return 0;\r\n        \r\n        // If value is string, remove % and convert to number\r\n        return parseFloat(value.replace('%', '').trim()) || 0;\r\n      };\r\n\r\n  useEffect(() => {\r\n    if (containerRef.current) {\r\n      const containerWidth = containerRef.current.clientWidth;\r\n      const totalColumns = columns.length;\r\n      \r\n      let initialWidths: number[];\r\n      if (isFullScreen) {\r\n        const equalWidth = Math.max(minColumnWidth, Math.floor(containerWidth / totalColumns));\r\n        initialWidths = columns.map(() => equalWidth);\r\n      } else {\r\n        initialWidths = columns.map((_, index) => \r\n          index === 0 ? 160 : 150\r\n        );\r\n      }\r\n      \r\n      setColumnWidths(initialWidths);\r\n      widthsRef.current = initialWidths;\r\n    }\r\n  }, [columns.length, isFullScreen]);\r\n\r\n \r\n\r\n\r\n\r\n  const averageValues = useMemo(() => {\r\n    const averages: Record<string, number> = {};\r\n    comparisonColumns.forEach((key) => {\r\n      const validData = data.filter(item => item[key] !== undefined && !isNaN(parsePercentage(item[key] || '0')));\r\n      const average = validData.length > 0\r\n        ? validData.reduce((sum, item) => sum + parsePercentage(item[key] || '0'), 0) / validData.length\r\n        : 0;\r\n\r\n      averages[key] = key === 'Sessions' ? Math.round(average) : parseFloat(average.toFixed(2));\r\n    });\r\n    return averages;\r\n  }, [data]);\r\n\r\n\r\n\r\n  const parsedData = useMemo(() =>\r\n    data.map((item) => ({\r\n      ...item,\r\n      Sessions: Number(item?.Sessions || 0),\r\n      'Add To Cart Rate': parsePercentage(item?.['Add To Cart Rate'] || '0'),\r\n      'Checkout Rate': parsePercentage(item?.['Checkout Rate'] || '0'),\r\n      'Purchase Rate': parsePercentage(item?.['Purchase Rate'] || '0'),\r\n    })), [data]);\r\n\r\n    const sortedData = useMemo(() => {\r\n        if (!sortColumn) return parsedData;\r\n      \r\n        return [...parsedData].sort((a, b) => {\r\n          const aValue = a[sortColumn];\r\n          const bValue = b[sortColumn];\r\n      \r\n          if (sortColumn === 'Date') {\r\n            const parseDateString = (dateStr: string) => {\r\n              const [day, month, year] = dateStr.split('-');\r\n              return new Date(`${year}-${month}-${day}`);\r\n            };\r\n      \r\n            const aDate = parseDateString(aValue);\r\n            const bDate = parseDateString(bValue);\r\n      \r\n            return sortDirection === 'asc'\r\n              ? aDate.getTime() - bDate.getTime()\r\n              : bDate.getTime() - aDate.getTime();\r\n          }\r\n      \r\n          // Handle numeric sorting for other columns\r\n          const aNum = typeof aValue === 'number'\r\n            ? aValue\r\n            : parseFloat((aValue || '0').toString().replace('%', '').trim());\r\n          const bNum = typeof bValue === 'number'\r\n            ? bValue\r\n            : parseFloat((bValue || '0').toString().replace('%', '').trim());\r\n      \r\n          if (aNum < bNum) return sortDirection === 'asc' ? -1 : 1;\r\n          if (aNum > bNum) return sortDirection === 'asc' ? 1 : -1;\r\n          return 0;\r\n        });\r\n      }, [parsedData, sortColumn, sortDirection]);\r\n\r\n  const isNumericColumn = (column: string) => {\r\n    return [\r\n      'Date',\r\n\r\n    ].includes(column);\r\n  };\r\n\r\n  const handleSort = (column: string) => {\r\n    if (!isNumericColumn(column)) return;\r\n  \r\n    if (sortColumn === column) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortColumn(column);\r\n      setSortDirection('asc');\r\n    } \r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isFullScreen) {\r\n      setLoadedRows(sortedData.slice(0, rowsPerChunk));\r\n    }\r\n  }, [isFullScreen, sortedData, rowsPerChunk]);\r\n\r\n  const loadMoreRows = () => {\r\n    if (isFullScreen && loadedRows.length < sortedData.length) {\r\n      const nextChunk = sortedData.slice(\r\n        loadedRows.length,\r\n        loadedRows.length + rowsPerChunk\r\n      );\r\n      setLoadedRows(prev => [...prev, ...nextChunk]);\r\n    }\r\n  };\r\n\r\n  const handleScroll = (event: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n    const target = event.currentTarget;\r\n    if (target.scrollHeight - target.scrollTop <= target.clientHeight + 100) {\r\n      loadMoreRows();\r\n    }\r\n  };\r\n\r\n  const displayRows = useMemo(() => {\r\n    if (isFullScreen) {\r\n      return loadedRows;\r\n    }\r\n    return sortedData.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage);\r\n  }, [isFullScreen, loadedRows, sortedData, currentPage, rowsPerPage]);\r\n\r\n  const pageCount = Math.ceil(sortedData.length / rowsPerPage);\r\n\r\n  const goToPage = (page: number) => {\r\n    const pageNumber = Math.max(1, Math.min(page, pageCount));\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  const columnPairs = {\r\n    'Add To Cart': 'Add To Cart Rate',\r\n    'Checkouts': 'Checkout Rate',\r\n    'Purchases': 'Purchase Rate'\r\n  };\r\n  const renderHeader = (column: string, colIndex: number) => {\r\n    const isComparisonCol = comparisonColumns.includes(column);\r\n\r\n    return (\r\n      <th\r\n        key={column}\r\n        className={`\r\n          relative font-bold p-1 text-gray-800 text-sm border-b-2\r\n          capitalize border-r border-gray-300\r\n          ${isNumericColumn(column) ? 'cursor-pointer' : ''}\r\n          ${colIndex === 0 && !isFullScreen ? 'sticky left-0 z-30 bg-gray-100' : ''}\r\n          ${draggedColumn === column ? 'opacity-50' : ''}\r\n          hover:bg-gray-200 transition-colors duration-200\r\n        `}\r\n        style={{\r\n          width: colIndex === 0 ? '180px' : `${columnWidths[colIndex]}px`,\r\n        }}\r\n        draggable\r\n        onDragStart={(e) => handleDragStart(e, column)}\r\n        onDragOver={handleDragOver}\r\n        onDrop={(e) => handleDrop(e, column)}\r\n      >\r\n        <div onClick={() => handleSort(column)} className=\"flex flex-col items-center\">\r\n          <div  className=\"flex items-center justify-center gap-2 mb-1\">\r\n            <GripVertical className=\"w-4 h-4 text-gray-400 cursor-grab\" />\r\n            <span >{column}</span>\r\n            {isNumericColumn(column) && (\r\n              <span className=\"ml-2\">\r\n                {sortColumn === column ? (\r\n                  sortDirection === 'asc' ? (\r\n                    <ArrowUp className=\"w-4 h-4 text-blue-600\" />\r\n                  ) : (\r\n                    <ArrowDown className=\"w-4 h-4 text-blue-600\" />\r\n                  )\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </span>\r\n            )}\r\n          </div>\r\n          {isComparisonCol && averageValues[column] !== undefined && (\r\n            <span className=\"text-xs text-gray-500\">\r\n              avg: {column === 'Sessions'\r\n                ? Math.round(averageValues[column])\r\n                : averageValues[column]?.toFixed(2)}\r\n              {column !== 'Sessions' ? '%' : ''}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </th>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        ref={containerRef}\r\n        className=\"rounded-md overflow-x-auto relative border\"\r\n        style={{\r\n          width: '100%',\r\n          maxHeight: isFullScreen ? 'calc(100vh - 105px)' : 'calc(100vh - 200px)',\r\n          overflowX: isFullScreen ? 'hidden' : 'auto',\r\n        }}\r\n        onScroll={isFullScreen ? handleScroll : undefined}\r\n      >\r\n        <table\r\n          ref={tableRef}\r\n          className=\"w-full text-center shadow-lg rounded-lg border border-gray-200\"\r\n          style={{\r\n            tableLayout: 'fixed',\r\n            width: isFullScreen ? '100%' : 'auto',\r\n            borderCollapse: 'separate',\r\n            borderSpacing: 0,\r\n          }}\r\n        >\r\n          <thead className=\"bg-gray-100\">\r\n            <tr>\r\n              {columnOrder.map((column, index) => renderHeader(column, index))}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {displayRows.map((item, rowIndex) => (\r\n              <tr\r\n                key={rowIndex}\r\n                className={`${\r\n                  rowIndex % 2 === 0 ? 'bg-gray-50' : 'bg-white'\r\n                } hover:bg-gray-100 transition-colors duration-200`}\r\n              >\r\n                {columnOrder.map((column, colIndex) => {\r\n                  const cellValue = item[column];\r\n                  const isComparisonColumn = comparisonColumns.includes(column);\r\n                  const isPairedColumn = column in columnPairs;\r\n\r\n                  let colorClass = 'text-gray-800';\r\n                  if (isComparisonColumn) {\r\n                    colorClass = getConditionalColors(cellValue as number, averageValues[column]);\r\n                  } else if (isPairedColumn) {\r\n                    const rateColumn = columnPairs[column as keyof typeof columnPairs];\r\n                    const rateValue = item[rateColumn] as number;\r\n                    colorClass = getConditionalColors(rateValue, averageValues[rateColumn]);\r\n                  }\r\n\r\n                  return (\r\n                    <td\r\n                      key={`${rowIndex}-${column}`}\r\n                      className={`p-3 text-sm font-normal border-r border-gray-300 ${colorClass} ${\r\n                        colIndex === 0 && !isFullScreen\r\n                          ? 'sticky left-0 z-20 bg-inherit'\r\n                          : ''\r\n                      }`}\r\n                      style={{\r\n                        width: colIndex === 0 ? '150px' : `${columnWidths[colIndex]}px`,\r\n                      }}\r\n                    >\r\n                      <div className=\"flex items-center justify-center gap-2\">\r\n                        {column.includes('Rate')\r\n                          ? `${(cellValue as number).toFixed(2)}%`\r\n                          : cellValue}\r\n                      </div>\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      \r\n      {!isFullScreen && (\r\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-between gap-4\">\r\n          <div className=\"text-sm text-muted-foreground\">\r\n          Showing {((currentPage - 1) * rowsPerPage) + 1} to {Math.min(currentPage * rowsPerPage, sortedData.length)} of {sortedData.length} entries\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\r\n              onClick={() => goToPage(1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronsLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0\"\r\n              onClick={() => goToPage(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div className=\"flex items-center justify-center text-sm font-medium\">\r\n              Page {currentPage} of {pageCount}\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0\"\r\n              onClick={() => goToPage(currentPage + 1)}\r\n              disabled={currentPage === pageCount}\r\n            >\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\r\n              onClick={() => goToPage(pageCount)}\r\n              disabled={currentPage === pageCount}\r\n            >\r\n              <ChevronsRight className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(NewReportTable);","import * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <Cross2Icon className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","import React, { useState } from 'react';\r\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Search, Settings2, GripVertical, Pin, PinOff } from \"lucide-react\";\r\n\r\ninterface ColumnManagementSheetProps {\r\n  visibleColumns: string[];\r\n  columnOrder: string[];\r\n  frozenColumns?: string[];\r\n  onVisibilityChange: (columns: string[]) => void;\r\n  onOrderChange: (order: string[]) => void;\r\n  onFrozenChange?: (columns: string[]) => void;\r\n}\r\n\r\nconst ColumnManagementSheet: React.FC<ColumnManagementSheetProps> = ({ \r\n  visibleColumns, \r\n  columnOrder,\r\n  frozenColumns = [],\r\n  onVisibilityChange,\r\n  onOrderChange,\r\n  onFrozenChange\r\n}) => {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\r\n  const [dropTargetColumn, setDropTargetColumn] = useState<string | null>(null);\r\n\r\n  const filteredColumns = columnOrder.filter(column =>\r\n    column.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const handleDragStart = (column: string) => {\r\n    setDraggedColumn(column);\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent, column: string) => {\r\n    e.preventDefault();\r\n    if (column !== draggedColumn) {\r\n      setDropTargetColumn(column);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (targetColumn: string) => {\r\n    if (!draggedColumn || draggedColumn === targetColumn) return;\r\n\r\n    const newOrder = [...columnOrder];\r\n    const draggedIdx = newOrder.indexOf(draggedColumn);\r\n    const targetIdx = newOrder.indexOf(targetColumn);\r\n\r\n    newOrder.splice(draggedIdx, 1);\r\n    newOrder.splice(targetIdx, 0, draggedColumn);\r\n\r\n    onOrderChange(newOrder);\r\n    setDraggedColumn(null);\r\n    setDropTargetColumn(null);\r\n  };\r\n\r\n  const toggleColumnVisibility = (column: string) => {\r\n    const newVisibleColumns = visibleColumns.includes(column)\r\n      ? visibleColumns.filter(col => col !== column)\r\n      : [...visibleColumns, column];\r\n    onVisibilityChange(newVisibleColumns);\r\n  };\r\n\r\n  const toggleColumnFreeze = (column: string) => {\r\n    if (!onFrozenChange || column === 'Campaign') return; // Campaign column is always frozen\r\n    \r\n    const newFrozenColumns = frozenColumns.includes(column)\r\n      ? frozenColumns.filter(col => col !== column)\r\n      : [...frozenColumns, column];\r\n    onFrozenChange(newFrozenColumns);\r\n  };\r\n\r\n  return (\r\n    <Sheet>\r\n      <SheetTrigger asChild>\r\n        <Button variant=\"outline\" size=\"sm\" className=\"ml-2\">\r\n          <Settings2 className=\"w-4 h-4 mr-2\" />\r\n          Manage Columns\r\n        </Button>\r\n      </SheetTrigger>\r\n      <SheetContent className=\"w-[400px] sm:w-[540px]\">\r\n        <SheetHeader>\r\n          <SheetTitle>Column Management</SheetTitle>\r\n          <SheetDescription>\r\n            Select columns to display, drag to reorder, and pin columns to freeze them\r\n          </SheetDescription>\r\n        </SheetHeader>\r\n        \r\n        <div className=\"mt-4 space-y-4\">\r\n          <div className=\"flex items-center space-x-2 px-1\">\r\n            <Search className=\"w-4 h-4 text-slate-400\" />\r\n            <Input\r\n              placeholder=\"Search columns...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"h-8\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"max-h-[calc(100vh-200px)] overflow-y-auto\">\r\n            {filteredColumns.map(column => (\r\n              <div\r\n                key={column}\r\n                draggable\r\n                onDragStart={() => handleDragStart(column)}\r\n                onDragOver={(e) => handleDragOver(e, column)}\r\n                onDrop={() => handleDrop(column)}\r\n                className={`flex items-center space-x-3 p-3 border-b border-slate-200 hover:bg-slate-50 cursor-move\r\n                  ${dropTargetColumn === column ? 'bg-slate-100' : ''}`}\r\n              >\r\n                <GripVertical className=\"w-4 h-4 text-slate-400\" />\r\n                <Checkbox\r\n                  id={`col-${column}`}\r\n                  checked={visibleColumns.includes(column)}\r\n                  onCheckedChange={() => toggleColumnVisibility(column)}\r\n                />\r\n                <label\r\n                  htmlFor={`col-${column}`}\r\n                  className=\"flex-1 text-sm font-medium leading-none cursor-pointer\"\r\n                >\r\n                  {column}\r\n                </label>\r\n                {onFrozenChange && (\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className={`px-2 ${column === 'Campaign' ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                    onClick={() => toggleColumnFreeze(column)}\r\n                    disabled={column === 'Campaign'}\r\n                  >\r\n                    {frozenColumns.includes(column) || column === 'Campaign' ? (\r\n                      <Pin className=\"w-4 h-4 text-blue-500\" />\r\n                    ) : (\r\n                      <PinOff className=\"w-4 h-4\" />\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </SheetContent>\r\n    </Sheet>\r\n  );\r\n};\r\n\r\nexport default ColumnManagementSheet;\r\n","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { RefreshCw, X, Maximize, Minimize } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\"\r\nimport { Ga4Logo } from \"../../GeneralisedDashboard/components/OtherPlatformModalContent\"\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport NewReportTable from \"./NewReportTable\";\r\nimport ColumnManagementSheet from \"@/pages/META/Campaign/ColumnManagementSheet\";\r\n\r\ninterface EcommerceMetric {\r\n  \"Date\": string\r\n  \"Add To Carts\": string\r\n  \"Checkout\": string\r\n  \"Sessions\": string\r\n  \"Purchases\": string\r\n  \"Purchase Rate\": string\r\n  \"Add To Cart Rate\": string\r\n  \"Checkout Rate\": string\r\n}\r\n\r\ninterface EcommerceMetricsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst EcommerceMetricsPage: React.FC<EcommerceMetricsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const compareFrom = useSelector((state: RootState) => state.date.compareFrom);\r\n  const compareTo = useSelector((state: RootState) => state.date.compareTo);\r\n  \r\n  const [filteredData, setFilteredData] = useState<EcommerceMetric[]>([]);\r\n  const [data, setData] = useState<EcommerceMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const compareDate = useMemo(() => ({\r\n    from: compareFrom,\r\n    to: compareTo\r\n  }), [compareFrom, compareTo]);\r\n\r\n  const startDate = date?.from ? format(new Date(date.from), \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(new Date(date.to), \"yyyy-MM-dd\") : \"\";\r\n  const compareStartDate = compareDate?.from ? format(new Date(compareDate.from), \"yyyy-MM-dd\") : \"\";\r\n  const compareEndDate = compareDate?.to ? format(new Date(compareDate.to), \"yyyy-MM-dd\") : \"\";\r\n  \r\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\r\n  const [filters, setFilters] = useState<FilterItem[]>([]);\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n  const dispatch = useDispatch();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  // Consolidate date range effects\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\r\n      }));\r\n    }\r\n  }, [propDateRange, dispatch]);\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const fetchMetrics = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const dateRanges = [];\r\n\r\n      // Always add primary date range\r\n      if (startDate && endDate) {\r\n        dateRanges.push({ \r\n          startDate: startDate, \r\n          endDate: endDate \r\n        });\r\n      }\r\n\r\n      // Add comparison date range if available and compare is enabled\r\n      if (compareStartDate && compareEndDate) {\r\n        dateRanges.push({\r\n          startDate: compareStartDate,\r\n          endDate: compareEndDate\r\n        });\r\n      }\r\n\r\n      // Only fetch if we have at least one date range\r\n      if (dateRanges.length > 0) {\r\n        const DailyAnalyticsResponse = await axiosInstance.post(\r\n          `/api/analytics/atcreport/${brandId}`,\r\n          {\r\n            dateRanges: dateRanges,\r\n            userId: user?.id,\r\n          },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        const fetchedRanges = DailyAnalyticsResponse.data.ranges || [];\r\n    \r\n        // More flexible data handling\r\n        if (fetchedRanges.length > 0) {\r\n          // Check if the first range contains daily data or consolidated data\r\n          const isConsolidatedData = fetchedRanges[0].Date \r\n          \r\n          if (isConsolidatedData) {\r\n            // Consolidated data scenario\r\n            setData(fetchedRanges);\r\n            setFilteredData(fetchedRanges);\r\n          } else {\r\n            // Daily data scenario\r\n            setData(fetchedRanges[0]?.data || []);\r\n            setFilteredData(fetchedRanges[0]?.data || []);\r\n          }\r\n\r\n          // Update columns intelligently\r\n          const firstRangeData = isConsolidatedData ? fetchedRanges : (fetchedRanges[0]?.data || []);\r\n          if (firstRangeData.length > 0) {\r\n            const firstItem = firstRangeData[0];\r\n            const allColumns = Object.keys(firstItem);\r\n            \r\n            if (selectedColumns.length === 0) {\r\n              setSelectedColumns(allColumns);\r\n            } else {\r\n              setSelectedColumns((prevSelected) =>\r\n                prevSelected.filter((col) => allColumns.includes(col))\r\n              );\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching e-commerce metrics data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [startDate, endDate, compareStartDate, compareEndDate, brandId, user?.id]);\r\n\r\n  // Consolidate to single useEffect for fetching metrics\r\n  useEffect(() => {\r\n    fetchMetrics();\r\n    const intervalId = setInterval(fetchMetrics, 15 * 60 * 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchMetrics]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchMetrics();\r\n  };\r\n\r\n  const [visibleColumns, setVisibleColumns] = useState<string[]>(selectedColumns);\r\n  const [columnOrder, setColumnOrder] = useState<string[]>(selectedColumns);\r\n\r\n  const handleVisibilityChange = (columns: string[]) => {\r\n    setVisibleColumns(columns);\r\n  };\r\n  \r\n  const handleOrderChange = (newOrder: string[]) => {\r\n    setColumnOrder(newOrder);\r\n    setVisibleColumns(newOrder);\r\n  };\r\n  \r\n  useEffect(() => {\r\n    setVisibleColumns(selectedColumns);\r\n    setColumnOrder(selectedColumns);\r\n  }, [selectedColumns]);\r\n\r\n  const applyFilters = useCallback((filters: FilterItem[]) => {\r\n    let result = [...data];\r\n\r\n    filters.forEach(filter => {\r\n      result = result.filter(item => {\r\n        const value = item[filter.column as keyof EcommerceMetric] as string;\r\n        if (['>', '<', '='].includes(filter.operator)) {\r\n          const numValue = parseFloat(value);\r\n          const filterValue = parseFloat(filter.value);\r\n          switch (filter.operator) {\r\n            case '>': return numValue > filterValue;\r\n            case '<': return numValue < filterValue;\r\n            case '=': return numValue === filterValue;\r\n            default: return true;\r\n          }\r\n        }\r\n        return true; // Default case\r\n      });\r\n    });\r\n\r\n    setFilteredData(result);\r\n  }, [data]);\r\n\r\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\r\n\r\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\r\n  \r\n  const removeFilter = (index: number) => {\r\n    setFilters(filters.filter((_, i) => i !== index));\r\n  };\r\n\r\n  return (\r\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <h2 className=\"text-lg font-medium\">Daily E-Commerce Analytics</h2>\r\n              <Ga4Logo />\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-3\">\r\n              {isFullScreen && <DatePickerWithRange />}\r\n              <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n                <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n              </Button>\r\n              <ColumnManagementSheet\r\n                visibleColumns={visibleColumns}\r\n                columnOrder={columnOrder}\r\n                onVisibilityChange={handleVisibilityChange}\r\n                onOrderChange={handleOrderChange}\r\n              />\r\n              <FilterComponent\r\n                columns={numericColumns}\r\n                onFiltersChange={applyFilters}\r\n                filters={filters}\r\n                setFilters={setFilters}\r\n              />\r\n              <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {filters.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {filters.map((filter, index) => (\r\n                <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n                  <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\r\n                  <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\r\n                    <X className=\"h-3 w-3\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"rounded-md overflow-hidden\">\r\n            {isLoading ? (\r\n              <TableSkeleton />\r\n            ) : (\r\n              <NewReportTable columns={columnOrder} data={memoizedFilteredData} isFullScreen={isFullScreen} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default EcommerceMetricsPage;","\r\nimport { AlertCircle, Mail, ArrowRight } from 'lucide-react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport axios from 'axios';\r\nfunction NoGA4AcessPage() {\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n    const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n    const handleGoogleLogin = async () => {\r\n        try {\r\n    \r\n          const response = await axios.get(`${baseURL}/api/auth/google?context=brandSetup`, { withCredentials: true });\r\n          const { authUrl } = response.data;\r\n    \r\n          window.location.href = authUrl;\r\n        } catch (error) {\r\n          console.error('Error getting Google Auth URL:', error);\r\n        }\r\n      }\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4\">\r\n      <div className=\"max-w-md w-full bg-white rounded-2xl shadow-xl p-8\">\r\n        {/* Header Section */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <Mail className=\"w-8 h-8 text-red-600\" />\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n            No GA4 Access Found\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            The current Google account doesn't have access to any GA4 properties\r\n          </p>\r\n        </div>\r\n\r\n        {/* Current Account Info */}\r\n        <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <AlertCircle className=\"w-5 h-5 text-amber-500 mt-0.5\" />\r\n            <div>\r\n              <p className=\"text-sm text-gray-600\">Currently signed in as:</p>\r\n              <p className=\"font-medium text-gray-900\">{user?.email}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Section */}\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            Please sign in with a Google account that has access to GA4 properties to continue.\r\n          </p>\r\n          \r\n          <button \r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 group\"\r\n            onClick={handleGoogleLogin}\r\n          >\r\n            Sign in with a different account\r\n            <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NoGA4AcessPage;","import { useState, useEffect } from 'react';\r\nimport axios, { AxiosError } from 'axios';\r\nimport { Search, Check } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { FacebookLogo, GoogleLogo } from '@/pages/AnalyticsDashboard/AdAccountsMetricsCard';\r\nimport { Ga4Logo } from '@/pages/GeneralisedDashboard/components/OtherPlatformModalContent';\r\n\r\n\r\ninterface PlatformModalProps {\r\n  platform: string;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  brandId: string;\r\n  onSuccess?: (platform: string, accountName: string, accountId: string) => void;\r\n}\r\n\r\ninterface GoogleAdsAccount {\r\n  name: string;\r\n  clientId: string;\r\n  hidden?: boolean;\r\n}\r\n\r\ninterface GoogleAnalyticsAccount {\r\n  propertyName: string;\r\n  propertyId: string;\r\n}\r\n\r\ninterface FacebookAdsAccount {\r\n  adname: string;\r\n  id: string;\r\n}\r\n\r\nexport default function PlatformModal({\r\n  platform,\r\n  open,\r\n  onOpenChange,\r\n  brandId,\r\n  onSuccess\r\n}: PlatformModalProps) {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [googleAdsAccounts, setGoogleAdsAccounts] = useState<GoogleAdsAccount[]>([]);\r\n  const [googleAnalyticsAccounts, setGoogleAnalyticsAccounts] = useState<GoogleAnalyticsAccount[]>([]);\r\n  const [facebookAdsAccounts, setFacebookAdsAccounts] = useState<FacebookAdsAccount[]>([]);\r\n  const [showLoginButton, setShowLoginButton] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [connectedAccounts, setConnectedAccounts] = useState<string[]>([]);\r\n\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const userId = user?.id;\r\n  console.log(userId);\r\n\r\n  useEffect(() => {\r\n    const fetchConnectedAccounts = async () => {\r\n      try {\r\n        const response = await axios.get(`${baseURL}/api/brands/${brandId}`, {\r\n          withCredentials: true,\r\n        });\r\n        const brand = response.data;\r\n        \r\n        const connectedIds: string[] = [];\r\n        if (brand.fbAdAccounts?.length) connectedIds.push(...brand.fbAdAccounts);\r\n        if (brand.googleAdAccount) connectedIds.push(brand.googleAdAccount);\r\n        if (brand.ga4Account?.PropertyID) connectedIds.push(brand.ga4Account.PropertyID);\r\n     \r\n        setConnectedAccounts(connectedIds);\r\n      } catch (error) {\r\n        console.error('Error fetching connected accounts:', error);\r\n      }\r\n    };\r\n\r\n    if (open && brandId) {\r\n      fetchConnectedAccounts();\r\n    }\r\n  }, [brandId, open]);\r\n\r\n  useEffect(() => {\r\n    const fetchAccounts = async () => {\r\n      if (!open) return;\r\n      \r\n      setLoading(true);\r\n      try {\r\n        let endpoint = '';\r\n        let accountsSetter: any = null;\r\n\r\n        switch (platform.toLowerCase()) {\r\n          case 'google ads':\r\n            endpoint = '/api/setup/google-accounts';\r\n            accountsSetter = setGoogleAdsAccounts;\r\n            break;\r\n          case 'google analytics':\r\n            endpoint = '/api/setup/ga4-propertyIds';\r\n            accountsSetter = setGoogleAnalyticsAccounts;\r\n            break;\r\n          case 'facebook':\r\n            endpoint = '/api/setup/fb-ad-accounts';\r\n            accountsSetter = setFacebookAdsAccounts;\r\n            break;\r\n        }\r\n        console.log(`Calling API: ${baseURL}${endpoint} with userId: ${userId}`);\r\n\r\n        if (!endpoint) {\r\n          throw new Error('Invalid platform');\r\n        }\r\n        const response = await axios.post(\r\n          `${baseURL}${endpoint}`,\r\n          { userId },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.status === 200) {\r\n          setShowLoginButton(false);\r\n          if (platform.toLowerCase() === 'google ads') {\r\n            accountsSetter(response.data?.clientAccounts.filter((account: GoogleAdsAccount) => !account.hidden));\r\n          } else if (platform.toLowerCase() === 'google analytics') {\r\n            accountsSetter(response.data.propertiesList || []);\r\n          } else if (platform.toLowerCase() === 'facebook') {\r\n            accountsSetter(response.data.adAccounts || []);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        handleError(error as AxiosError, setShowLoginButton);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAccounts();\r\n  }, [platform, userId, open]);\r\n\r\n  const handleError = (error: unknown, setShowLoginButton: (value: boolean) => void) => {\r\n    const axiosError = error as AxiosError;\r\n\r\n    if (axiosError.response) {\r\n      const { status, data } = axiosError.response;\r\n      const code = axiosError.code;\r\n      if (status === 400) {\r\n        setShowLoginButton(true);\r\n      } else if (status === 403) {\r\n        setShowLoginButton(true);\r\n      } else if (status === 401 || code === 'TOKEN_EXPIRED') {\r\n        alert('Your Google session has expired. Please log in again.');\r\n        setShowLoginButton(true);\r\n      } else {\r\n        console.error('Unhandled Error Status:', status);\r\n        console.error('Error Message:', data);\r\n      }\r\n    } else if (axiosError.request) {\r\n      console.error('No response received:', axiosError.request);\r\n    } else {\r\n      console.error('Unexpected Error:', axiosError.message);\r\n    }\r\n  };\r\n\r\n  const updateBrandWithAccount = async (accountId: string, accountName: string) => {\r\n    try {\r\n      let updateData = {};\r\n      \r\n      switch (platform.toLowerCase()) {\r\n        case 'facebook':\r\n          updateData = { fbAdAccounts: [accountId] };\r\n          break;\r\n        case 'google ads':\r\n          updateData = { googleAdAccount: accountId };\r\n          break;\r\n        case 'google analytics':\r\n          updateData = { ga4Account: { PropertyID: accountId } };\r\n          break;\r\n      }\r\n\r\n      const response = await axios.patch(\r\n        `${baseURL}/api/brands/update/${brandId}`,\r\n        updateData,\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.status === 200) {\r\n        onSuccess?.(platform, accountName, accountId);\r\n        onOpenChange(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating brand:', error);\r\n    }\r\n  };\r\n\r\n  const handleConnect = async (account: GoogleAdsAccount | GoogleAnalyticsAccount | FacebookAdsAccount) => {\r\n    let accountId: string;\r\n    let displayName: string;\r\n\r\n    if ('clientId' in account) {\r\n      accountId = account.clientId;\r\n      displayName = `${account.name} (${accountId})`;\r\n    } else if ('propertyId' in account) {\r\n      accountId = account.propertyId;\r\n      displayName = `${account.propertyName} (${accountId})`;\r\n    } else if ('id' in account) {\r\n      accountId = account.id;\r\n      displayName = `${account.adname}`;\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    await updateBrandWithAccount(accountId, displayName);\r\n  };\r\n\r\n  const handleGoogleLogin = async () => {\r\n    try {\r\n      const response = await axios.get(`${baseURL}/api/auth/google?context=brandSetup`, { withCredentials: true });\r\n      const { authUrl } = response.data;\r\n      window.location.href = authUrl;\r\n    } catch (error) {\r\n      console.error('Error getting Google Auth URL:', error);\r\n    }\r\n  };\r\n\r\n  const handleFbLogin = async () => {\r\n    try {\r\n      const response = await axios.get(`${baseURL}/api/auth/facebook`, { withCredentials: true });\r\n      if (response.data.success) {\r\n        window.location.href = response.data.authURL;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting Facebook Auth URL:', error);\r\n    }\r\n  };\r\n\r\n  const filteredAccounts = () => {\r\n    let accounts: any[] = [];\r\n    \r\n    switch (platform.toLowerCase()) {\r\n      case 'google ads':\r\n        accounts = googleAdsAccounts;\r\n        break;\r\n      case 'google analytics':\r\n        accounts = googleAnalyticsAccounts;\r\n        break;\r\n      case 'facebook':\r\n        accounts = facebookAdsAccounts;\r\n        break;\r\n    }\r\n\r\n    return accounts.filter((account) => {\r\n      const searchField = 'clientId' in account ? account.name \r\n        : 'propertyName' in account ? account.propertyName \r\n        : account.adname;\r\n      return searchField.toLowerCase().includes(searchTerm.toLowerCase());\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[600px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Connect {platform} Account</DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <div className=\"space-y-4\">\r\n          {loading ? (\r\n            <div className=\"flex justify-center py-4\">Loading...</div>\r\n          ) : showLoginButton ? (\r\n            <Button\r\n              size=\"sm\"\r\n              onClick={platform.toLowerCase() === 'facebook' ? handleFbLogin : handleGoogleLogin}\r\n              className=\"flex items-center gap-2 bg-white text-black border border-green-800 hover:bg-green-50\"\r\n            >\r\n              {platform.toLowerCase() === 'google ads' && (\r\n                <>\r\n                  <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                  Connect to your Google Ads account\r\n                </>\r\n              )}\r\n              {platform.toLowerCase() === 'google analytics' && (\r\n                <>\r\n                  <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                  Connect to your GA4 account\r\n                </>\r\n              )}\r\n              {platform.toLowerCase() === 'facebook' && (\r\n                <>\r\n                  <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                  Connect to your Facebook account\r\n                </>\r\n              )}\r\n            </Button>\r\n          ) : (\r\n            <>\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n                <Input\r\n                  type=\"text\"\r\n                  placeholder=\"Search accounts...\"\r\n                  className=\"pl-10\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"max-h-[50vh] overflow-auto\">\r\n                {filteredAccounts()?.map((account) => {\r\n                  const isGoogleAds = platform.toLowerCase() === 'google ads';\r\n                  const isFacebook = platform.toLowerCase() === 'facebook';\r\n\r\n                  const accountId = isGoogleAds\r\n                    ? (account as GoogleAdsAccount).clientId\r\n                    : isFacebook\r\n                      ? (account as FacebookAdsAccount).id\r\n                      : (account as GoogleAnalyticsAccount).propertyId;\r\n\r\n                  const accountName = isGoogleAds\r\n                    ? (account as GoogleAdsAccount).name\r\n                    : isFacebook\r\n                      ? (account as FacebookAdsAccount).adname\r\n                      : (account as GoogleAnalyticsAccount).propertyName;\r\n\r\n                  const platformLogo = isGoogleAds ? (\r\n                    <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                  ) : isFacebook ? (\r\n                    <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                  ) : (\r\n                    <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                  );\r\n\r\n                  const isConnected = connectedAccounts.includes(accountId);\r\n\r\n                  return (\r\n                    <div\r\n                      key={accountId}\r\n                      className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\"\r\n                    >\r\n                      <span>\r\n                        <div className=\"flex flex-row items-center gap-3\">\r\n                          {platformLogo}\r\n                          {isFacebook\r\n                            ? `${accountName}`\r\n                            : `${accountName} (${accountId})`}\r\n                        </div>\r\n                      </span>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        onClick={() => handleConnect(account)}\r\n                        disabled={isConnected}\r\n                        className={isConnected ? \"bg-gray-400\" : \"bg-blue-600\"}\r\n                      >\r\n                        {isConnected && <Check className=\"h-4 w-4 mr-2\" />}\r\n                        {isConnected ? 'Connected' : 'Connect'}\r\n                      </Button>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import { useState } from 'react';\r\nimport { AlertTriangle, BarChart3, LineChart, TrendingUp, ArrowRight, Facebook, PieChart } from 'lucide-react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport PlatformModal from '@/components/dashboard_component/PlatformModal';\r\n\r\nconst platformConfigs = {\r\n  'google analytics': {\r\n    title: \"Google analytics\",\r\n    description: \"Unlock powerful insights for your store\",\r\n    icon: <PieChart className=\"h-16 w-16 text-blue-500 animate-bounce\" />,\r\n    benefits: [\r\n      {\r\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Real-time Analytics\",\r\n        description: \"Track visitor behavior as it happens\"\r\n      },\r\n      {\r\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Performance Metrics\",\r\n        description: \"Monitor your store's key metrics\"\r\n      },\r\n      {\r\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Growth Insights\",\r\n        description: \"Make data-driven decisions\"\r\n      }\r\n    ],\r\n    buttonText: \"Connect GA4 Now\",\r\n    guideText: \"Need help setting up GA4?\"\r\n  },\r\n  'google ads': {\r\n    title: \"Google Ads\",\r\n    description: \"Supercharge your advertising performance\",\r\n    icon: <AlertTriangle className=\"h-16 w-16 text-red-500 animate-bounce\" />,\r\n    benefits: [\r\n      {\r\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Campaign Tracking\",\r\n        description: \"Monitor ad performance in real-time\"\r\n      },\r\n      {\r\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Conversion Analytics\",\r\n        description: \"Track ROI and conversions\"\r\n      },\r\n      {\r\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Budget Optimization\",\r\n        description: \"Optimize spending across campaigns\"\r\n      }\r\n    ],\r\n    buttonText: \"Connect Google Ads\",\r\n    guideText: \"New to Google Ads?\"\r\n  },\r\n  facebook: {\r\n    title: \"Facebook Ads\",\r\n    description: \"Scale your social media advertising\",\r\n    icon: <Facebook className=\"h-16 w-16 text-blue-600 animate-bounce\" />,\r\n    benefits: [\r\n      {\r\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Audience Insights\",\r\n        description: \"Understand your target audience\"\r\n      },\r\n      {\r\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Ad Performance\",\r\n        description: \"Track engagement and reach\"\r\n      },\r\n      {\r\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\r\n        title: \"ROAS Tracking\",\r\n        description: \"Measure advertising return\"\r\n      }\r\n    ],\r\n    buttonText: \"Connect Facebook Ads\",\r\n    guideText: \"First time with Facebook Ads?\"\r\n  }\r\n};\r\n\r\ntype PlatformKeys = 'google analytics' | 'google ads' | 'facebook';\r\n\r\ninterface ConnectPlatformProps {\r\n  platform?: PlatformKeys;\r\n  brandId: string;\r\n  onSuccess?: (platform: string, accountName: string, accountId: string) => void;\r\n}\r\n\r\nconst ConnectPlatform: React.FC<ConnectPlatformProps> = ({ \r\n  platform = 'google analytics',\r\n  brandId,\r\n  onSuccess \r\n}) => {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const config = platformConfigs[platform];\r\n\r\n  const handleConnect = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex items-center justify-center p-4\">\r\n        <div className=\"max-w-3xl mx-auto w-full space-y-8\">\r\n          {/* Header Section */}\r\n          <div className=\"text-center space-y-4\">\r\n            <div className=\"flex justify-center\">\r\n              {config.icon}\r\n            </div>\r\n            <h1 className=\"text-4xl font-bold tracking-tight\">Connect {config.title}</h1>\r\n            <p className=\"text-xl text-muted-foreground\">\r\n              {config.description}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <Card className=\"p-6 bg-card/50 backdrop-blur-sm\">\r\n            <div className=\"space-y-6\">\r\n              <p className=\"text-lg text-center\">\r\n                You haven't connected {config.title} yet. You're missing out on valuable insights about your store's performance!\r\n              </p>\r\n\r\n              {/* Benefits Grid */}\r\n              <div className=\"grid md:grid-cols-3 gap-4 my-8\">\r\n                {config.benefits.map((benefit, index) => (\r\n                  <div key={index} className=\"flex flex-col items-center text-center p-4 space-y-2\">\r\n                    {benefit.icon}\r\n                    <h3 className=\"font-semibold\">{benefit.title}</h3>\r\n                    <p className=\"text-sm text-muted-foreground\">{benefit.description}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* CTA Button */}\r\n              <div className=\"flex justify-center\">\r\n                <Button \r\n                  size=\"lg\" \r\n                  className=\"group\"\r\n                  onClick={handleConnect}\r\n                >\r\n                  {config.buttonText}\r\n                  <ArrowRight className=\"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Footer Note */}\r\n          <p className=\"text-center text-sm text-muted-foreground\">\r\n            {config.guideText}{\" \"}\r\n            <a href=\"#\" className=\"text-primary hover:underline\">\r\n              Check out our guide\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <PlatformModal\r\n        platform={config.title}\r\n        open={isModalOpen}\r\n        onOpenChange={setIsModalOpen}\r\n        brandId={brandId}\r\n        onSuccess={onSuccess}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ConnectPlatform;","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport {  RefreshCw, X, Maximize, Minimize } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\"\r\nimport { Ga4Logo } from \"../../GeneralisedDashboard/components/OtherPlatformModalContent\"\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport NewReportTable from \"./NewReportTable\";\r\nimport ColumnManagementSheet from \"@/pages/META/Campaign/ColumnManagementSheet\";\r\n\r\ninterface DaywiseMetric {\r\n  \"Day\": string\r\n  \"Add To Carts\": string\r\n  \"Checkout\": string\r\n  \"Sessions\": string\r\n  \"Purchases\": string\r\n  \"Purchase Rate\": string\r\n  \"Add To Cart Rate\": string\r\n  \"Checkout Rate\": string\r\n}\r\n\r\n  \r\ninterface DaywiseMetricProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst DaywiseMetricsPage: React.FC<DaywiseMetricProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [filteredData, setFilteredData] = useState<DaywiseMetric[]>([]);\r\n  const [data, setData] = useState<DaywiseMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n\r\n  \r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\r\n  const [filters, setFilters] = useState<FilterItem[]>([]);\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n  const dispatch = useDispatch();\r\n  const axiosInstance = createAxiosInstance();\r\n \r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const [visibleColumns, setVisibleColumns] = useState<string[]>(selectedColumns);\r\n  const [columnOrder, setColumnOrder] = useState<string[]>(selectedColumns);\r\n\r\n  const handleVisibilityChange = (columns: string[]) => {\r\n    setVisibleColumns(columns);\r\n  };\r\n  \r\n  const handleOrderChange = (newOrder: string[]) => {\r\n    setColumnOrder(newOrder);\r\n    setVisibleColumns(newOrder); // Ensure visibleColumns is also updated\r\n  };\r\n  \r\n  useEffect(() => {\r\n    setVisibleColumns(selectedColumns);\r\n    setColumnOrder(selectedColumns);\r\n  }, [selectedColumns]);\r\n\r\n  const fetchMetrics = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n\r\n      const DailyAnalyticsResponse = await axiosInstance.post(\r\n        `/api/analytics/dayAtcReport/${brandId}`,\r\n        {\r\n          startDate: startDate,\r\n          endDate: endDate,\r\n          userId: user?.id,\r\n        },\r\n        { withCredentials: true }\r\n      );\r\n\r\n      const fetchedData = DailyAnalyticsResponse.data.data || [];\r\n      setData(fetchedData);\r\n      setFilteredData(fetchedData);\r\n\r\n      if (fetchedData.length > 0) {\r\n        if (selectedColumns.length === 0) {\r\n          const allColumns = Object.keys(fetchedData[0]);\r\n          setSelectedColumns(allColumns);\r\n        } else {\r\n          const newColumns = Object.keys(fetchedData[0]);\r\n          setSelectedColumns((prevSelected) =>\r\n            prevSelected.filter((col) => newColumns.includes(col))\r\n          );\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching day wise metrics data:', error);\r\n     \r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [startDate, endDate, brandId]);\r\n\r\n  useEffect(() => {\r\n    fetchMetrics();\r\n    const intervalId = setInterval(fetchMetrics, 15 * 60 * 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchMetrics]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchMetrics();\r\n  };\r\n\r\n\r\n  const applyFilters = useCallback((filters: FilterItem[]) => {\r\n    let result = [...data];\r\n    \r\n    filters.forEach(filter => {\r\n      result = result.filter(item => {\r\n        const value = item[filter.column as keyof DaywiseMetric] as string;\r\n        if (['>', '<', '='].includes(filter.operator)) {\r\n          const numValue = parseFloat(value);\r\n          const filterValue = parseFloat(filter.value);\r\n          switch (filter.operator) {\r\n            case '>': return numValue > filterValue;\r\n            case '<': return numValue < filterValue;\r\n            case '=': return numValue === filterValue;\r\n            default: return true;\r\n          }\r\n        }\r\n        return true; // Default case\r\n      });\r\n    });\r\n\r\n    setFilteredData(result); // Update filtered data\r\n  }, [data]);\r\n\r\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\r\n\r\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\r\n  const removeFilter = (index: number) => {\r\n    setFilters(filters.filter((_, i) => i !== index));\r\n  };\r\n\r\n  return (\r\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n    <CardContent >\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Day wise E-Commerce Analytics</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n            \r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                   \r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <ColumnManagementSheet\r\n                visibleColumns={visibleColumns}\r\n                columnOrder={columnOrder}\r\n                onVisibilityChange={handleVisibilityChange}\r\n                onOrderChange={handleOrderChange}\r\n              />\r\n            <FilterComponent\r\n              columns={numericColumns}\r\n              onFiltersChange={applyFilters}\r\n              filters={filters}\r\n              setFilters={setFilters}\r\n            />\r\n             <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        {filters.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {filters.map((filter, index) => (\r\n              <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n                <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\r\n                <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\r\n                  <X className=\"h-3 w-3\" />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {isLoading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <NewReportTable columns={columnOrder} data={memoizedFilteredData} isFullScreen={isFullScreen} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </CardContent>\r\n  </Card>\r\n  );\r\n};\r\n\r\nexport default DaywiseMetricsPage;","import React, { useMemo, useState } from 'react';\r\nimport DailyEcommerceMetrics from '@/pages/ReportPage/component/EcommerceMetricsPage';\r\nimport CollapsibleSidebar from '../Dashboard/CollapsibleSidebar';\r\nimport { TableSkeleton } from '@/components/dashboard_component/TableSkeleton';\r\nimport { useParams } from 'react-router-dom';\r\nimport {ShoppingCart } from 'lucide-react';\r\nimport { useTokenError } from '@/context/TokenErrorContext';\r\nimport NoGA4AcessPage from './NoGA4AccessPage.';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport ConnectPlatform from './ConnectPlatformPage';\r\nimport Header from '@/components/dashboard_component/Header';\r\nimport DaywiseMetricsPage from './component/DaywiseMetricsPage';\r\nimport { CustomTabs } from '../ConversionReportPage/components/CustomTabs';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\n\r\nconst ReportsPage: React.FC = () => {\r\n\r\n  const isLoading = false;\r\n  const { brandId } = useParams<{ brandId: string }>();\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasGA4Account = selectedBrand?.ga4Account ?? false;\r\n  const { tokenError } = useTokenError();\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const dateRange = {\r\n    from: date.from ? new Date(date.from) : undefined,\r\n    to: date.to ? new Date(date.to) : undefined\r\n  }\r\n  const [activeTab, setActiveTab] = useState('daily');\r\n\r\n  const tabs = [\r\n    { label: 'Daily Metrics', value: 'daily' },\r\n    { label: 'Day wise Metrics', value: 'day wise' },\r\n  ];\r\n\r\n\r\n  const handleTabChange = (value: string) => {\r\n    setActiveTab(value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        {tokenError ? (\r\n          <NoGA4AcessPage />\r\n        ) : !hasGA4Account ? (\r\n          <>\r\n            <ConnectPlatform\r\n              platform=\"google analytics\"\r\n              brandId={brandId ?? ''}\r\n              onSuccess={(platform, accountName, accountId) => {\r\n                console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n              }} /> </>\r\n        ) : (\r\n          <>\r\n            {/* Existing page content */}\r\n            <Header title='E-Commerce Insighhts' Icon={ShoppingCart} showDatePicker={true} />\r\n            <div className=\"bg-white px-6 sticky top-0 z-10\">\r\n              <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\r\n            </div>\r\n            {isLoading ? (\r\n              <TableSkeleton />\r\n            ) : (\r\n              <section className=\"my-3\">\r\n                {activeTab === 'daily' && (\r\n                  <DailyEcommerceMetrics dateRange={dateRange} />\r\n                )}\r\n                {activeTab === 'day wise' && (\r\n                  <DaywiseMetricsPage dateRange={dateRange} />\r\n                )}\r\n              </section>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n      <HelpDeskModal />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportsPage;","import { Button } from '@/components/ui/button';\r\nimport { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from 'lucide-react';\r\nimport { useMemo, useState, useEffect } from 'react';\r\n\r\nexport interface MonthlyData {\r\n  Month: string;\r\n  [key: string]: number | string;\r\n}\r\n\r\nexport interface RowData {\r\n  [key: string]: number | string | MonthlyData[];\r\n}\r\n\r\ninterface ConversionTableProps {\r\n  data: RowData[];\r\n  primaryColumn: string;\r\n  secondaryColumns?: string[];\r\n  monthlyDataKey: string;\r\n  monthlyMetrics: string[];\r\n  isFullScreen: boolean;\r\n  rows?: number;\r\n  isAdsTable?: boolean;\r\n}\r\n\r\nexport default function ConversionTable({\r\n  data,\r\n  primaryColumn,\r\n  secondaryColumns,\r\n  monthlyDataKey,\r\n  monthlyMetrics,\r\n  isFullScreen,\r\n  rows,\r\n  isAdsTable\r\n}: ConversionTableProps) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [loadedRows, setLoadedRows] = useState<Array<{ dataIndex: number; metricIndex: number }>>([]);\r\n  const rowsPerPage = rows ? rows : 8;\r\n  const rowsPerChunk = 30;\r\n\r\n  const getTableHeight = () => {\r\n    if (isFullScreen) {\r\n      if (isAdsTable) {\r\n        return 'max-h-[calc(100vh-90px)]';\r\n      }\r\n      return 'max-h-[calc(100vh-130px)]';\r\n    }\r\n    return 'max-h-[400px]';\r\n  };\r\n\r\n  const months = useMemo(() => {\r\n    if (!Array.isArray(data)) {\r\n      console.error(\"Data is not an array:\", data);\r\n      return [];\r\n    }\r\n\r\n    const getMonthName = (monthNumber: string): string => {\r\n      const months = [\r\n        'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\r\n        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\r\n      ];\r\n      return months[parseInt(monthNumber) - 1];\r\n    };\r\n\r\n\r\n    const allMonths = new Set<string>();\r\n    data.forEach((row) => {\r\n      const monthlyData = row[monthlyDataKey] as MonthlyData[] | undefined;\r\n      if (Array.isArray(monthlyData)) {\r\n        monthlyData.forEach((month) => {\r\n          if (month?.Month) {\r\n            const year = month.Month.slice(0, 4);\r\n            const monthNum = month.Month.slice(4);\r\n            allMonths.add(`${getMonthName(monthNum)}-${year}`);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return Array.from(allMonths).reverse();\r\n  }, [data, monthlyDataKey]);\r\n\r\n  const allRows = useMemo(() => {\r\n    const rows: Array<{ dataIndex: number; metricIndex: number }> = [];\r\n    data.forEach((_, dataIndex) => {\r\n      monthlyMetrics.forEach((_, metricIndex) => {\r\n        rows.push({ dataIndex, metricIndex });\r\n      });\r\n    });\r\n    return rows;\r\n  }, [data, monthlyMetrics]);\r\n\r\n  const loadMoreRows = () => {\r\n    setLoadedRows((prevRows) => [\r\n      ...prevRows,\r\n      ...allRows.slice(prevRows.length, prevRows.length + rowsPerChunk)\r\n    ]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isFullScreen) {\r\n      setLoadedRows(allRows.slice(0, rowsPerChunk));\r\n    }\r\n  }, [isFullScreen, allRows]);\r\n\r\n  const handleScroll = (event: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n    const { scrollTop, scrollHeight, clientHeight } = event.currentTarget;\r\n    if (scrollHeight - scrollTop <= clientHeight + 100) {\r\n      loadMoreRows();\r\n    }\r\n  };\r\n\r\n  const displayRows = useMemo(() => {\r\n    if (isFullScreen) {\r\n      return loadedRows;\r\n    }\r\n    return allRows.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage);\r\n  }, [isFullScreen, allRows, loadedRows, currentPage]);\r\n\r\n  const thresholds = useMemo(() => {\r\n    let totalSessions = 0, totalConvRate = 0, sessionCount = 0;\r\n    let totalSpend = 0, totalPurchaseROAS = 0, spendCount = 0;\r\n    let totalCost = 0, totalConvValuePerCost = 0, costCount = 0;\r\n\r\n    data.forEach(row => {\r\n      if (typeof row['Total Sessions'] === 'number' && typeof row['Avg Conv. Rate'] === 'number') {\r\n        totalSessions += Number(row['Total Sessions']);\r\n        totalConvRate += Number(row['Avg Conv. Rate']);\r\n        sessionCount++;\r\n      }\r\n\r\n      if (typeof row['Total Spend'] === 'number' && typeof row['Total Purchase ROAS'] === 'number') {\r\n        totalSpend += Number(row['Total Spend']);\r\n        totalPurchaseROAS += Number(row['Total Purchase ROAS']);\r\n        spendCount++;\r\n      }\r\n\r\n      if (typeof row['Total Cost'] === 'number' && typeof row['Conv. Value / Cost'] === 'number') {\r\n        totalCost += Number(row['Total Cost']);\r\n        totalConvValuePerCost += Number(row['Conv. Value / Cost']);\r\n        costCount++;\r\n      }\r\n    });\r\n\r\n    return {\r\n      avgSessions: sessionCount > 0 ? totalSessions / sessionCount : 0,\r\n      avgConvRate: sessionCount > 0 ? totalConvRate / sessionCount : 0,\r\n      avgSpend: spendCount > 0 ? totalSpend / spendCount : 0,\r\n      avgPurchaseROAS: spendCount > 0 ? totalPurchaseROAS / spendCount : 0,\r\n      avgCost: costCount > 0 ? totalCost / costCount : 0,\r\n      avgConvValuePerCost: costCount > 0 ? totalConvValuePerCost / costCount : 0,\r\n    };\r\n  }, [data]);\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      setCurrentPage(1);\r\n    }\r\n  }, [isFullScreen]);\r\n\r\n  const getMetricColor = ({\r\n    sessions,\r\n    convRate,\r\n    spend,\r\n    purchaseROAS,\r\n    cost,\r\n    convValuePerCost\r\n  }: {\r\n    sessions?: number;\r\n    convRate?: number;\r\n    spend?: number;\r\n    purchaseROAS?: number;\r\n    cost?: number;\r\n    convValuePerCost?: number\r\n  }) => {\r\n    const isHighSessions = sessions !== undefined && sessions >= thresholds.avgSessions;\r\n    const isGoodConversion = convRate !== undefined && convRate >= thresholds.avgConvRate;\r\n    const isHighSpent = spend !== undefined && spend >= thresholds.avgSpend;\r\n    const isGoodROAS = purchaseROAS !== undefined && purchaseROAS >= thresholds.avgPurchaseROAS;\r\n    const isHighCost = cost !== undefined && cost >= thresholds.avgCost;\r\n    const isGoodConvValuePerCost = convValuePerCost !== undefined && convValuePerCost >= thresholds.avgConvValuePerCost;\r\n\r\n    // Prioritizing Sessions & Conversion Rate\r\n    if (isHighSessions && isGoodConversion) return 'bg-green-100'; // Best case (high traffic & conversions)\r\n    if (isHighSessions && !isGoodConversion) return 'bg-[#E0F4FF]'; // High traffic, poor conversion\r\n    if (!isHighSessions && isGoodConversion) return 'bg-yellow-100'; // Low traffic, good conversion\r\n\r\n    // Prioritizing Spend & Purchase ROAS\r\n    if (isHighSpent && isGoodROAS) return 'bg-green-100'; // Profitable with high spend\r\n    if (isHighSpent && !isGoodROAS) return 'bg-[#E0F4FF]'; // High spend, poor ROAS\r\n    if (!isHighSpent && isGoodROAS) return 'bg-yellow-100'; // Low spend, good ROAS\r\n\r\n    // Prioritizing Spend & Purchase ROAS\r\n    if (isHighCost && isGoodConvValuePerCost) return 'bg-green-100'; // Profitable with high cost\r\n    if (isHighCost && !isGoodConvValuePerCost) return 'bg-[#E0F4FF]'; // High cost, poor ROAS\r\n    if (!isHighCost && isGoodConvValuePerCost) return 'bg-yellow-100'; // Low cost, good ROAS\r\n\r\n    return 'bg-red-50'; // Default case (poor metrics)\r\n  };\r\n\r\n\r\n\r\n  const renderCell = (value: number | string, type?: 'spend' | 'percentage' | 'default') => {\r\n    if (typeof value === \"number\") {\r\n      switch (type) {\r\n        case 'spend':\r\n          return Math.round(value).toLocaleString();\r\n        case 'percentage':\r\n          return `${value.toFixed(2)} %`;\r\n        default:\r\n          return value.toFixed(2);\r\n      }\r\n    }\r\n    return value;\r\n  };\r\n\r\n  const renderMonthCell = (monthData: MonthlyData | undefined, metric: string) => {\r\n    if (!monthData) {\r\n      return (\r\n        <td className=\"w-[100px] text-right whitespace-nowrap p-2 text-xs border-r border-slate-300 bg-background\">\r\n          -\r\n        </td>\r\n      );\r\n    }\r\n\r\n    const value = monthData[metric];\r\n    let bgColor = 'bg-background';\r\n\r\n    if (\r\n      (metric === 'Sessions' || metric === 'Conv. Rate') &&\r\n      typeof monthData['Sessions'] === 'number' &&\r\n      typeof monthData['Conv. Rate'] === 'number'\r\n    ) {\r\n      bgColor = getMetricColor({\r\n        sessions: Number(monthData['Sessions']),\r\n        convRate: Number(monthData['Conv. Rate']),\r\n      });\r\n    }\r\n\r\n    if (\r\n      (metric === 'Spend' || metric === 'Purchase ROAS') &&\r\n      typeof monthData['Spend'] === 'number' &&\r\n      typeof monthData['Purchase ROAS'] === 'number'\r\n    ) {\r\n      bgColor = getMetricColor({\r\n        spend: Number(monthData['Spend']),\r\n        purchaseROAS: Number(monthData['Purchase ROAS'])\r\n      });\r\n    }\r\n\r\n    if (\r\n      (metric === 'Cost' || metric === 'Conv. Value/ Cost') &&\r\n      typeof monthData['Cost'] === 'number' &&\r\n      typeof monthData['Conv. Value/ Cost'] === 'number'\r\n    ) {\r\n      bgColor = getMetricColor({\r\n        cost: Number(monthData['Cost']),\r\n        convValuePerCost: Number(monthData['Conv. Value/ Cost'])\r\n      });\r\n    }\r\n\r\n\r\n    return (\r\n      <td className={`w-[100px]  text-right whitespace-nowrap p-2 text-xs border-r border-slate-300 ${bgColor}`}>\r\n        {renderCell(\r\n          value,\r\n          metric.toLowerCase().includes('rate')\r\n            ? 'percentage'\r\n            : metric.toLowerCase().includes('spend') || metric.toLowerCase().includes('cost')\r\n              ? 'spend'\r\n              : 'default'\r\n        )}\r\n        {metric === 'Conv. Rate' && (\r\n          <div className=\"text-xs text-muted-foreground\">{`Purchases: ${monthData['Purchases'] ?? 0}`}</div>\r\n        )}\r\n        {metric === 'Cost' && (\r\n          <div className=\"text-xs text-muted-foreground\">{`clicks: ${monthData['Clicks'] ?? 0}`}</div>\r\n        )}\r\n        {metric === 'Conv. Value/ Cost' && (\r\n          <div className=\"text-xs text-muted-foreground\">{`conv. rate: ${Number(monthData['Conversion Rate']).toFixed(2) ?? 0} %`}</div>\r\n        )}\r\n        {metric === 'Purchase ROAS' && (\r\n          <div className=\"text-xs text-muted-foreground\">{`PCV: ${Number(monthData['Purchase Conversion Value']).toFixed(2) ?? 0}`}</div>\r\n        )}\r\n      </td>\r\n    );\r\n  };\r\n\r\n  const renderMetricValue = (\r\n    row: RowData,\r\n    column: string,\r\n    currentMetric: string,\r\n    columnIndex: number\r\n  ) => {\r\n    const value = row[column];\r\n\r\n    if (typeof value !== \"number\") {\r\n      return (\r\n        <td\r\n          className=\"sticky top-0 min-w-[130px] p-2 text-xs border-r border-slate-300 bg-background\"\r\n          style={{ left: `${130 + 100 + columnIndex * 130}px` }}\r\n        >\r\n          {\"\"}\r\n        </td>\r\n      );\r\n    }\r\n\r\n    let bgColor = \"bg-background\";\r\n\r\n    // Check if the current metric and column match specific conditions for color\r\n    if (currentMetric && column) {\r\n      if (column.includes(\"Sessions\") || column.includes(\"Rate\")) {\r\n        const sessions = row[\"Total Sessions\"] as number;\r\n        const convRate = row[\"Avg Conv. Rate\"] as number;\r\n        bgColor = getMetricColor({ sessions, convRate });\r\n      }\r\n    }\r\n\r\n    if (currentMetric && column) {\r\n      if (column.includes(\"Spend\") || column.includes(\"ROAS\")) {\r\n        const spend = row[\"Total Spend\"] as number;\r\n        const purchaseROAS = row[\"Total Purchase ROAS\"] as number;\r\n        bgColor = getMetricColor({ spend, purchaseROAS });\r\n      }\r\n    }\r\n\r\n    if (currentMetric && column) {\r\n      if (column.includes(\"Cost\") || column.includes(\"Conv. Value / Cost\")) {\r\n        const cost = row[\"Total Cost\"] as number;\r\n        const convValuePerCost = row[\"Conv. Value / Cost\"] as number;\r\n        bgColor = getMetricColor({ cost, convValuePerCost });\r\n      }\r\n    }\r\n\r\n    const totalPurchases = typeof row[\"Total Purchases\"] === \"number\"\r\n      ? row[\"Total Purchases\"].toLocaleString()\r\n      : null;\r\n    const totalConvValue = typeof row[\"Total Conv. Value\"] === \"number\"\r\n      ? row[\"Total Conv. Value\"].toFixed(2)\r\n      : null;\r\n    const totalPCV = typeof row[\"Total PCV\"] === \"number\"\r\n      ? row[\"Total PCV\"].toFixed(2)\r\n      : null;\r\n    return (\r\n      <td\r\n        className={`sticky top-0 min-w-[130px] p-2 text-xs border-r border-slate-300 ${bgColor}`}\r\n        style={{ left: `${130 + 100 + columnIndex * 130}px` }}\r\n      >\r\n        {/* Only show cost when currentMetric is \"Cost\" */}\r\n        {currentMetric.toLowerCase() === \"cost\" && column === \"Total Cost\" ? (\r\n          <div className=\"flex flex-col\">\r\n            <span>{renderCell(value, 'spend')}</span>\r\n          </div>\r\n        ) :\r\n          /* Only show conv value/cost when currentMetric is \"Conv. Value/Cost\" */\r\n          currentMetric.toLowerCase() === \"conv. value/ cost\" && column === \"Conv. Value / Cost\" ? (\r\n            <div className=\"flex flex-col\">\r\n              <span>{renderCell(value)}</span>\r\n              {totalConvValue && (\r\n                <span className=\"text-xs text-gray-500 mt-1\">\r\n                  Total Conv. Value: {totalConvValue}\r\n                </span>\r\n              )}\r\n            </div>\r\n          ) :\r\n            currentMetric.toLowerCase() === \"sessions\" && column.includes(\"Sessions\") ? (\r\n              renderCell(value)\r\n            ) :\r\n              currentMetric.toLowerCase() === \"conv. rate\" && column.includes(\"Rate\") ? (\r\n                <div className=\"flex flex-col\">\r\n                  <span>{renderCell(value, 'percentage')}</span>\r\n                  {totalPurchases && (\r\n                    <span className=\"text-xs text-gray-500 mt-1\">\r\n                      Total Purchases: {totalPurchases}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ) : currentMetric.toLowerCase() === \"spend\" && column.includes(\"Total Spend\") ? (\r\n                renderCell(value, 'spend')\r\n              ) : currentMetric.toLowerCase() == \"purchase roas\" && column.includes(\"Total Purchase ROAS\") ? (\r\n                <div className=\"flex flex-col\">\r\n                  <span>{renderCell(value)}</span>\r\n                  {totalPCV && (\r\n                    <span className=\"text-xs text-gray-500 mt-1\">\r\n                      Total PCV: {totalPCV}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n      </td>\r\n    );\r\n  };\r\n\r\n  const renderMetricRow = (row: RowData, metricIndex: number) => {\r\n    const metric = monthlyMetrics[metricIndex];\r\n    \r\n    // Determine the background color for both primary and metric columns\r\n    let bgColor = 'bg-background';\r\n    \r\n    if (secondaryColumns) {\r\n      const sessions = row[\"Total Sessions\"] as number;\r\n      const convRate = row[\"Avg Conv. Rate\"] as number;\r\n      const spend = row[\"Total Spend\"] as number;\r\n      const purchaseROAS = row[\"Total Purchase ROAS\"] as number;\r\n      const cost = row[\"Total Cost\"] as number;\r\n      const convValuePerCost = row[\"Conv. Value / Cost\"] as number;\r\n\r\n      if (metric === 'Sessions' || metric === 'Conv. Rate') {\r\n        bgColor = getMetricColor({ sessions, convRate });\r\n      } else if (metric === 'Spend' || metric === 'Purchase ROAS') {\r\n        bgColor = getMetricColor({ spend, purchaseROAS });\r\n      } else if (metric === 'Cost' || metric === 'Conv. Value/ Cost') {\r\n        bgColor = getMetricColor({ cost, convValuePerCost });\r\n      }\r\n    }\r\n\r\n    return (\r\n      <tr key={`${row[primaryColumn]}-${metric}`}>\r\n        <td className={`sticky left-0 min-w-[130px] max-w-[200px] p-2 text-xs border-r border-slate-300 ${bgColor}`}>\r\n          {metricIndex === 0\r\n            ? (typeof row[primaryColumn] === \"string\" || typeof row[primaryColumn] === \"number\"\r\n              ? renderCell(row[primaryColumn])\r\n              : \"\")\r\n            : \"\"}\r\n        </td>\r\n        <td className={`sticky left-[130px] min-w-[100px] whitespace-nowrap p-2 text-xs border-r border-slate-300 ${bgColor}`}>\r\n          {metric}\r\n        </td>\r\n        {secondaryColumns?.map((column, index) => renderMetricValue(row, column, metric, index))}\r\n        {months.map((month) => {\r\n          const getMonthNumber = (monthName: string): number => {\r\n            const months = [\r\n              'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\r\n              'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\r\n            ];\r\n            return months.indexOf(monthName) + 1;\r\n          };\r\n          const [monthName, year] = month.split('-'); \r\n          const monthNum = getMonthNumber(monthName); \r\n          const monthFormat = `${year}${monthNum.toString().padStart(2, '0')}`; \r\n\r\n          const monthData = (row[monthlyDataKey] as MonthlyData[]).find(\r\n            (m) => m.Month === monthFormat\r\n          );\r\n          return renderMonthCell(monthData, metric);\r\n        })}\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  const totalRows = allRows.length;\r\n  const totalPages = Math.ceil(totalRows / rowsPerPage);\r\n  const goToPage = (page: number) => {\r\n    const pageNumber = Math.max(1, Math.min(page, totalPages));\r\n    setCurrentPage(pageNumber);\r\n  };\r\n  const renderColumnHeader = (column: string, index: number) => {\r\n    let thresholdValue = '';\r\n    if (column === 'Total Sessions') {\r\n      thresholdValue = `(avg: ${Math.round(thresholds.avgSessions).toLocaleString()})`;\r\n    } else if (column === 'Avg Conv. Rate') {\r\n      thresholdValue = `(avg: ${thresholds.avgConvRate.toFixed(2)}%)`;\r\n    } else if (column === 'Total Spend') {\r\n      thresholdValue = `(avg: ${Math.round(thresholds.avgSpend).toLocaleString()})`;\r\n    } else if (column === 'Total Purchase ROAS') {\r\n      thresholdValue = `(avg: ${(thresholds.avgPurchaseROAS).toFixed(2)})`;\r\n    } else if (column === 'Total Cost') {\r\n      thresholdValue = `(avg: ${Math.round(thresholds.avgCost).toLocaleString()})`;\r\n    } else if (column === 'Conv. Value / Cost') {\r\n      thresholdValue = `(avg: ${Math.round(thresholds.avgConvValuePerCost).toFixed(2)})`;\r\n    }\r\n\r\n    return (\r\n      <th\r\n        key={column}\r\n        className=\"sticky top-0 min-w-[130px] w-[150px] z-20 px-2 py-2.5 text-left text-sm font-semibold text-black/70 border-r border-b border-slate-300 bg-slate-100\"\r\n        style={{ left: `${130 + 100 + index * 130}px` }}\r\n      >\r\n        <div className=\"flex flex-col\">\r\n          <span>{column}</span>\r\n          {thresholdValue && (\r\n            <span className=\"text-xs text-muted-foreground font-normal\">\r\n              {thresholdValue}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </th>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div id='age-report-table' className=\"w-full rounded-lg border flex flex-col\">\r\n      <div className={`relative overflow-x-auto ${getTableHeight()}`} onScroll={isFullScreen ? handleScroll : undefined}>\r\n        <table className=\"w-full\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"sticky left-0 top-0 min-w-[130px]  w-[150px] z-20 px-2 py-2.5 text-left text-sm font-semibold text-black/70 border-r border-b border-slate-300 bg-slate-100\">\r\n                {primaryColumn}\r\n              </th>\r\n              <th className=\"sticky left-[130px] top-0 min-w-[100px] w-[150px] z-20 px-2 py-2.5 text-left text-sm font-semibold text-black/70 border-r border-b border-slate-300 bg-slate-100\">\r\n                Metric\r\n              </th>\r\n              {secondaryColumns?.map((column, index) => renderColumnHeader(column, index))}\r\n              {months.map((month) => (\r\n                <th\r\n                  key={month}\r\n                  className=\"sticky top-0 min-w-[100px] z-10 px-2 py-2.5 text-right text-sm font-semibold text-black/70 whitespace-nowrap border-r border-b border-slate-300  bg-zinc-50\"\r\n                >\r\n                  {month}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-slate-300\">\r\n          {displayRows.map(({ dataIndex, metricIndex }) => \r\n              renderMetricRow(data[dataIndex], metricIndex)\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {!isFullScreen && (\r\n        <div className=\"border-t border-slate-300 p-2.5 flex items-center justify-between bg-background\">\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Showing {(currentPage - 1) * rowsPerPage + 1}-{Math.min(currentPage * rowsPerPage, totalRows)} of {totalRows} rows\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\r\n              onClick={() => goToPage(1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronsLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0\"\r\n              onClick={() => goToPage(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div className=\"flex items-center justify-center text-sm\">\r\n              Page {currentPage} of {totalPages}\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0\"\r\n              onClick={() => goToPage(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n            >\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\r\n              onClick={() => goToPage(totalPages)}\r\n              disabled={currentPage === totalPages}\r\n            >\r\n              <ChevronsRight className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}","// PerformanceSummary.tsx\r\n\r\nimport React, { useMemo, useState } from 'react';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\n\r\ninterface RowData {\r\n  [key: string]: any;\r\n}\r\n\r\ninterface MetricConfig {\r\n  primary: {\r\n    key: string;\r\n    name: string;\r\n  };\r\n  secondary: {\r\n    key: string;\r\n    name: string;\r\n  };\r\n}\r\n\r\ninterface CategoryData {\r\n  name: string;\r\n  color: string;\r\n  bgColor: string;\r\n  count: number;\r\n  items: (string | number)[];\r\n  description: string;\r\n}\r\n\r\ninterface PerformanceSummaryProps {\r\n  data: RowData[];\r\n  primaryColumn: string;\r\n  metricConfig: MetricConfig;\r\n}\r\n\r\nconst PerformanceSummary: React.FC<PerformanceSummaryProps> = ({\r\n  data,\r\n  primaryColumn,\r\n  metricConfig\r\n}) => {\r\n  const [expandedCategory, setExpandedCategory] = useState<string | null>(null);\r\n\r\n  const thresholds = useMemo(() => {\r\n    const metrics: Record<string, number> = {\r\n      [metricConfig.primary.key]: 0,\r\n      [metricConfig.secondary.key]: 0\r\n    };\r\n    let count = 0;\r\n\r\n    data.forEach(row => {\r\n      const primaryMetric = row[metricConfig.primary.key];\r\n      const secondaryMetric = row[metricConfig.secondary.key];\r\n\r\n      if (\r\n        typeof primaryMetric === 'number' &&\r\n        typeof secondaryMetric === 'number'\r\n      ) {\r\n        metrics[metricConfig.primary.key] += Number(primaryMetric);\r\n        metrics[metricConfig.secondary.key] += Number(secondaryMetric);\r\n        count++;\r\n      }\r\n    });\r\n\r\n    return {\r\n      [metricConfig.primary.key]: metrics[metricConfig.primary.key] / count,\r\n      [metricConfig.secondary.key]: metrics[metricConfig.secondary.key] / count\r\n    };\r\n  }, [data, metricConfig]);\r\n\r\n  const categories: CategoryData[] = useMemo(() => {\r\n    const categorizedItems: Record<string, (string | number)[]> = {\r\n      'Top Performers': [],\r\n      [`High ${metricConfig.primary.name}`]: [],\r\n      [`High ${metricConfig.secondary.name}`]: [],\r\n      'Underperformers': []\r\n    };\r\n\r\n    data.forEach(row => {\r\n      const primaryMetric = Number(row[metricConfig.primary.key]);\r\n      const secondaryMetric = Number(row[metricConfig.secondary.key]);\r\n      const primaryValue = String(row[primaryColumn]);\r\n\r\n      const isHighPrimary = primaryMetric >= thresholds[metricConfig.primary.key];\r\n      const isHighSecondary = secondaryMetric >= thresholds[metricConfig.secondary.key];\r\n\r\n      if (isHighPrimary && isHighSecondary) {\r\n        categorizedItems['Top Performers'].push(primaryValue);\r\n      } else if (isHighPrimary && !isHighSecondary) {\r\n        categorizedItems[`High ${metricConfig.primary.name}`].push(primaryValue);\r\n      } else if (!isHighPrimary && isHighSecondary) {\r\n        categorizedItems[`High ${metricConfig.secondary.name}`].push(primaryValue);\r\n      } else {\r\n        categorizedItems['Underperformers'].push(primaryValue);\r\n      }\r\n    });\r\n\r\n    return [\r\n      {\r\n        name: 'Top Performers',\r\n        color: 'text-green-700',\r\n        bgColor: 'bg-green-100',\r\n        count: categorizedItems['Top Performers'].length,\r\n        items: categorizedItems['Top Performers'],\r\n        description: `Above average in both ${metricConfig.primary.name} (>${thresholds[metricConfig.primary.key].toFixed(2)}) and ${metricConfig.secondary.name} (>${thresholds[metricConfig.secondary.key].toFixed(2)})`\r\n      },\r\n      {\r\n        name: `High ${metricConfig.primary.name}`,\r\n        color: 'text-blue-700',\r\n        bgColor: 'bg-[#E0F4FF]',\r\n        count: categorizedItems[`High ${metricConfig.primary.name}`].length,\r\n        items: categorizedItems[`High ${metricConfig.primary.name}`],\r\n        description: `High ${metricConfig.primary.name} (>${thresholds[metricConfig.primary.key].toFixed(2)}) but below average ${metricConfig.secondary.name} (<${thresholds[metricConfig.secondary.key].toFixed(2)})`\r\n      },\r\n      {\r\n        name: `High ${metricConfig.secondary.name}`,\r\n        color: 'text-yellow-700',\r\n        bgColor: 'bg-yellow-100',\r\n        count: categorizedItems[`High ${metricConfig.secondary.name}`].length,\r\n        items: categorizedItems[`High ${metricConfig.secondary.name}`],\r\n        description: `High ${metricConfig.secondary.name} (>${thresholds[metricConfig.secondary.key].toFixed(2)}) but below average ${metricConfig.primary.name} (<${thresholds[metricConfig.primary.key].toFixed(2)})`\r\n      },\r\n      {\r\n        name: 'Underperformers',\r\n        color: 'text-red-700',\r\n        bgColor: 'bg-red-50',\r\n        count: categorizedItems['Underperformers'].length,\r\n        items: categorizedItems['Underperformers'],\r\n        description: `Below average in both ${metricConfig.primary.name} (<${thresholds[metricConfig.primary.key].toFixed(2)}) and ${metricConfig.secondary.name} (<${thresholds[metricConfig.secondary.key].toFixed(2)})`\r\n      }\r\n    ];\r\n  }, [data, thresholds, primaryColumn, metricConfig]);\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div id=\"age-report-performance\" className=\"space-y-4 py-2.5\">\r\n        <div className=\"border border-gray-300 rounded-lg overflow-hidden\">\r\n          <div className=\"flex items-stretch h-9\">\r\n            {categories.map((category) => (\r\n              <Tooltip key={category.name}>\r\n                <TooltipTrigger asChild>\r\n                  <div\r\n                    className={`relative flex-grow ${category.bgColor} border-r last:border-r-0 border-gray-300 cursor-pointer transition-all duration-300 ease-in-out hover:opacity-90`}\r\n                    onClick={() => setExpandedCategory(expandedCategory === category.name ? null : category.name)}\r\n                  >\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                      <span className={`text-xs font-medium ${category.color} ${expandedCategory === category.name ? 'underline' : ''}`}>\r\n                        {category.name} ({category.count})\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </TooltipTrigger>\r\n                <TooltipContent className=\"max-w-xs p-4 bg-gray-900 text-white border-0 shadow-lg\">\r\n                  <div>\r\n                    \r\n                    {/* Category name and larger color sample */}\r\n                    <div  className=\"flex items-center gap-3 mb-3\">\r\n                      <div className={`w-8 h-8 rounded-lg ${category.bgColor} border border-white/20 flex items-center justify-center`}>\r\n                        <div className={`w-4 h-4 rounded-md ${category.color.replace('text-', 'bg-')}`} />\r\n                      </div>\r\n                      <p className=\"font-medium text-lg text-white\">\r\n                        {category.name}\r\n                      </p>\r\n                    </div>\r\n\r\n                    {/* Description */}\r\n                    <p className=\"text-sm text-gray-200\">{category.description}</p>\r\n                  </div>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            ))}\r\n          </div>\r\n          {expandedCategory && (\r\n            <div className=\"p-4 bg-white border-t border-gray-200\">\r\n              <h3 className={`text-lg font-semibold mb-2 flex items-center gap-2 ${categories.find(c => c.name === expandedCategory)?.color}`}>\r\n                {expandedCategory}\r\n                <span className={`w-3 h-3 rounded-lg ${categories.find(c => c.name === expandedCategory)?.bgColor} border border-gray-200`} />\r\n              </h3>\r\n              <ul className=\"grid grid-cols-4 list-disc pl-5 max-h-40 overflow-y-auto gap-4\">\r\n                {categories.find(c => c.name === expandedCategory)?.items.map((item, index) => (\r\n                  <li key={index} className=\"text-sm mb-1 break-words w-full\">\r\n                    {item}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\n// Example metric configurations\r\nexport const metricConfigs = {\r\n  sessionsAndConversion: {\r\n    primary: {\r\n      key: 'Total Sessions',\r\n      name: 'Sessions'\r\n    },\r\n    secondary: {\r\n      key: 'Avg Conv. Rate',\r\n      name: 'Conversion'\r\n    }\r\n  },\r\n  spendAndRoas: {\r\n    primary: {\r\n      key: 'Total Spend',\r\n      name: 'Spend'\r\n    },\r\n    secondary: {\r\n      key: 'Total Purchase ROAS',\r\n      name: 'Purchase ROAS'\r\n    }\r\n  }\r\n};\r\n\r\n\r\nexport default PerformanceSummary;","// ExcelDownload.tsx\r\nimport * as XLSX from 'xlsx-js-style';\r\nimport { Button } from '@/components/ui/button';\r\nimport { FileDown } from 'lucide-react';\r\n\r\nexport interface ExcelStyle {\r\n  patternType: string;\r\n  fgColor: { rgb: string };\r\n}\r\n\r\nexport interface ExcelStyles {\r\n  green: ExcelStyle;\r\n  blue: ExcelStyle;\r\n  yellow: ExcelStyle;\r\n  red: ExcelStyle;\r\n  header: ExcelStyle;\r\n}\r\n\r\nexport interface ExcelThresholds {\r\n  avgSessions: number;\r\n  avgConvRate: number;\r\n}\r\n\r\nexport interface MonthlyData {\r\n  Month: string;\r\n  [key: string]: number | string;\r\n}\r\n\r\nexport interface RowData {\r\n  [key: string]: number | string | MonthlyData[];\r\n}\r\n\r\ninterface ExcelDownloadProps {\r\n  data: RowData[];\r\n  fileName: string;\r\n  primaryColumn: string;\r\n  secondaryColumns: string[];\r\n  monthlyDataKey: string;\r\n  monthlyMetrics: string[];\r\n  buttonClassName?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst defaultStyles: ExcelStyles = {\r\n  green: { patternType: 'solid', fgColor: { rgb: \"DCFCE7\" } },\r\n  blue: { patternType: 'solid', fgColor: { rgb: \"DBEAFE\" } },\r\n  yellow: { patternType: 'solid', fgColor: { rgb: \"FEF9C3\" } },\r\n  red: { patternType: 'solid', fgColor: { rgb: \"FEF2F2\" } },\r\n  header: { patternType: 'solid', fgColor: { rgb: \"F1F5F9\" } }\r\n};\r\n\r\nexport const calculateThresholds = (data: RowData[]): ExcelThresholds => {\r\n  let totalSessions = 0;\r\n  let totalConvRate = 0;\r\n  let count = 0;\r\n\r\n  data.forEach(row => {\r\n    if (typeof row['Total Sessions'] === 'number' && typeof row['Avg Conv. Rate'] === 'number') {\r\n      totalSessions += Number(row['Total Sessions']);\r\n      totalConvRate += Number(row['Avg Conv. Rate']);\r\n      count++;\r\n    }\r\n  });\r\n\r\n  return {\r\n    avgSessions: totalSessions / count,\r\n    avgConvRate: totalConvRate / count\r\n  };\r\n};\r\n\r\nconst getCellStyle = (\r\n  metric: string,\r\n  sessions: number | undefined,\r\n  convRate: number | undefined,\r\n  thresholds: ExcelThresholds,\r\n  styles: ExcelStyles\r\n) => {\r\n  if (\r\n    (metric === 'Sessions' || metric === 'Conv. Rate') &&\r\n    typeof sessions === 'number' &&\r\n    typeof convRate === 'number'\r\n  ) {\r\n    const isHighSessions = sessions >= thresholds.avgSessions;\r\n    const isGoodConversion = convRate >= thresholds.avgConvRate;\r\n\r\n    if (isHighSessions && isGoodConversion) return styles.green;\r\n    if (isHighSessions && !isGoodConversion) return styles.blue;\r\n    if (!isHighSessions && isGoodConversion) return styles.yellow;\r\n    return styles.red;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst applyExcelStyles = (\r\n  worksheet: XLSX.WorkSheet,\r\n  data: RowData[],\r\n  months: string[],\r\n  secondaryColumns: string[],\r\n  monthlyDataKey: string,\r\n  monthlyMetrics: string[],\r\n  styles: ExcelStyles,\r\n  thresholds: ExcelThresholds\r\n) => {\r\n  const range = XLSX.utils.decode_range(worksheet['!ref'] || 'A1');\r\n\r\n  // Style header row\r\n  for (let C = range.s.c; C <= range.e.c; C++) {\r\n    const headerCell = XLSX.utils.encode_cell({ r: 0, c: C });\r\n    if (!worksheet[headerCell]) worksheet[headerCell] = { v: '' };\r\n    worksheet[headerCell].s = {\r\n      fill: styles.header,\r\n      font: { bold: true, color: { rgb: \"64748B\" } },\r\n      alignment: { horizontal: 'left' }\r\n    };\r\n  }\r\n\r\n  // Style data cells\r\n  data.forEach((row, dataIndex) => {\r\n    monthlyMetrics.forEach((metric, metricIndex) => {\r\n      const actualRow = dataIndex * monthlyMetrics.length + metricIndex + 2;\r\n\r\n      // Apply styles for each cell\r\n      const startCol = 2;\r\n      const endCol = months.length + secondaryColumns.length + 1;\r\n\r\n      for (let col = startCol; col <= endCol; col++) {\r\n        const cellRef = XLSX.utils.encode_cell({\r\n          r: actualRow - 1,\r\n          c: col\r\n        });\r\n\r\n        if (!worksheet[cellRef]) worksheet[cellRef] = { v: '' };\r\n\r\n        let cellStyle: any = {\r\n          font: { color: { rgb: \"000000\" } },\r\n          alignment: { horizontal: 'right' },\r\n          format: metric === 'Conv. Rate' ? '0.00%' : '#,##0'\r\n        };\r\n\r\n        let sessions: number | undefined;\r\n        let convRate: number | undefined;\r\n\r\n        if (col < startCol + secondaryColumns.length) {\r\n          sessions = row['Total Sessions'] as number;\r\n          convRate = row['Avg Conv. Rate'] as number;\r\n        } else {\r\n          const monthIndex = col - (startCol + secondaryColumns.length);\r\n          const monthKey = months[monthIndex];\r\n          const monthlyData = (row[monthlyDataKey] as MonthlyData[]).find(\r\n            m => `${m.Month.slice(0, 4)}-${m.Month.slice(4)}` === monthKey\r\n          );\r\n\r\n          if (monthlyData) {\r\n            sessions = monthlyData['Sessions'] as number;\r\n            convRate = monthlyData['Conv. Rate'] as number;\r\n          }\r\n        }\r\n\r\n        const fillStyle = getCellStyle(metric, sessions, convRate, thresholds, styles);\r\n        if (fillStyle) {\r\n          cellStyle.fill = fillStyle;\r\n        }\r\n\r\n        worksheet[cellRef].s = cellStyle;\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst ExcelDownload: React.FC<ExcelDownloadProps> = ({\r\n  data,\r\n  fileName,\r\n  primaryColumn,\r\n  secondaryColumns,\r\n  monthlyDataKey,\r\n  monthlyMetrics,\r\n  buttonClassName = '',\r\n  disabled = false,\r\n}) => {\r\n  const handleDownload = () => {\r\n    const workbook = XLSX.utils.book_new();\r\n    const sheetData: Array<Array<string | number | null>> = [];\r\n    const thresholds = calculateThresholds(data);\r\n\r\n    // Get all months\r\n    const months = Array.from(new Set(\r\n      data.flatMap(row => \r\n        (row[monthlyDataKey] as MonthlyData[]).map(m => \r\n          `${m.Month.slice(0, 4)}-${m.Month.slice(4)}`\r\n        )\r\n      )\r\n    )).sort().reverse();\r\n\r\n    // Create header row\r\n    const headerRow = [\r\n      primaryColumn,\r\n      'Metric',\r\n      ...secondaryColumns,\r\n      ...months,\r\n    ];\r\n    sheetData.push(headerRow);\r\n\r\n    // Create rows\r\n    data.forEach(row => {\r\n      monthlyMetrics.forEach(metric => {\r\n        const rowData: Array<string | number | null> = [];\r\n        \r\n        rowData.push(metric === monthlyMetrics[0] ? (row[primaryColumn] as string | number) : '');\r\n        rowData.push(metric);\r\n\r\n        secondaryColumns.forEach(column => {\r\n          const value = row[column] as number | string | undefined;\r\n          rowData.push(typeof value === 'number' ? Number(value.toFixed(2)) : null);\r\n        });\r\n\r\n        months.forEach(month => {\r\n          const monthData = (row[monthlyDataKey] as MonthlyData[]).find(\r\n            m => `${m.Month.slice(0, 4)}-${m.Month.slice(4)}` === month\r\n          );\r\n          const value = monthData ? monthData[metric] : null;\r\n          rowData.push(typeof value === 'number' ? Number(value.toFixed(2)) : null);\r\n        });\r\n\r\n        sheetData.push(rowData);\r\n      });\r\n    });\r\n\r\n    const worksheet = XLSX.utils.aoa_to_sheet(sheetData);\r\n    \r\n    // Apply styles\r\n    applyExcelStyles(\r\n      worksheet,\r\n      data,\r\n      months,\r\n      secondaryColumns,\r\n      monthlyDataKey,\r\n      monthlyMetrics,\r\n      defaultStyles,\r\n      thresholds\r\n    );\r\n\r\n    // Set column widths\r\n    const colWidths = [\r\n      { wch: 20 },\r\n      { wch: 12 },\r\n      ...secondaryColumns.map(() => ({ wch: 15 })),\r\n      ...months.map(() => ({ wch: 12 }))\r\n    ];\r\n    worksheet['!cols'] = colWidths;\r\n\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Conversion Data');\r\n    XLSX.writeFile(workbook, `${fileName}.xlsx`);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n    id='download-button'\r\n      onClick={handleDownload}\r\n      size=\"icon\"\r\n      variant=\"outline\"\r\n      className={buttonClassName}\r\n      disabled={disabled} \r\n    >\r\n      <FileDown className=\"h-4 w-4\" />\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default ExcelDownload;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface FilterValue {\r\n  value: number;\r\n  operator: string;\r\n}\r\n\r\ninterface ConversionFiltersState {\r\n  [componentId: string]: {\r\n    [key: string]: FilterValue | null;\r\n  };\r\n}\r\n\r\nconst initialState: ConversionFiltersState = {};\r\n\r\nconst conversionFiltersSlice = createSlice({\r\n  name: 'conversionFilters',\r\n  initialState,\r\n  reducers: {\r\n    setFilter: (\r\n      state,\r\n      action: PayloadAction<{\r\n        componentId: string;\r\n        column: string;\r\n        filter: FilterValue | null;\r\n      }>\r\n    ) => {\r\n      const { componentId, column, filter } = action.payload;\r\n      \r\n      // Only create new reference if needed\r\n      if (!state[componentId]) {\r\n        state[componentId] = {};\r\n      }\r\n      \r\n      // Only update if value actually changed\r\n      if (JSON.stringify(state[componentId][column]) !== JSON.stringify(filter)) {\r\n        state[componentId][column] = filter;\r\n      }\r\n    },\r\n    \r\n    clearFilters: (state, action: PayloadAction<string>) => {\r\n      const componentId = action.payload;\r\n      // Only delete if filters exist\r\n      if (Object.keys(state[componentId] || {}).length > 0) {\r\n        state[componentId] = {};\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setFilter, clearFilters } = conversionFiltersSlice.actions;\r\nexport default conversionFiltersSlice.reducer;","import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useState } from \"react\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\r\nimport { Filter } from \"lucide-react\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { clearFilters, setFilter } from \"@/store/slices/ConversionFilterSlice\";\r\n// Define all possible filterable columns\r\nconst FILTERABLE_COLUMNS = [\r\n  \"Total Sessions\", \r\n  \"Avg Conv Rate\", \r\n  \"Total Cost\", \r\n  \"Conv. Value / Cost\"\r\n] as const;\r\n\r\ntype FilterableColumn = typeof FILTERABLE_COLUMNS[number];\r\n\r\ninterface FilterValue {\r\n  value: number;\r\n  operator: string;\r\n}\r\n\r\ninterface FilterConversionsProps {\r\n  componentId: string;\r\n  availableColumns?: readonly FilterableColumn[];\r\n}\r\n\r\nexport default function FilterConversions({ \r\n  componentId, \r\n  availableColumns = FILTERABLE_COLUMNS \r\n}: FilterConversionsProps) {\r\n  const dispatch = useDispatch();\r\n  \r\n  // Dynamic filter retrieval\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {}\r\n  );\r\n\r\n  const [selectedColumn, setSelectedColumn] = useState<FilterableColumn>(availableColumns[0]);\r\n  const [operator, setOperator] = useState<string>(\">\");\r\n  const [value, setValue] = useState<number | undefined>(undefined);\r\n  const [dropdownOpen, setDropdownOpen] = useState<boolean>(false);\r\n\r\n  const handleAddFilter = () => {\r\n    if (value === undefined || isNaN(value)) {\r\n      alert(\"Please enter a valid value\");\r\n      return;\r\n    }\r\n\r\n    const filterValue = { value, operator };\r\n\r\n    // Dispatch a generic filter action\r\n    dispatch(setFilter({ \r\n      componentId, \r\n      column: selectedColumn, \r\n      filter: filterValue \r\n    }));\r\n\r\n    setDropdownOpen(false);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    dispatch(clearFilters(componentId));\r\n    setSelectedColumn(availableColumns[0]);\r\n    setOperator(\">\");\r\n    setValue(undefined);\r\n    setDropdownOpen(false);\r\n  };\r\n\r\n  // Check if any filter is applied\r\n  const isFilterApplied = Object.values(filters).some(filter => filter !== null);\r\n\r\n  // Generate tooltip text for applied filters\r\n  const filterTooltip = Object.entries(filters)\r\n    .filter(([_, filter]) => filter !== null)\r\n    .map(([column, filter]) => \r\n      `${column}: ${filter?.operator} ${filter?.value}`\r\n    )\r\n    .join(\", \");\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <Tooltip open={isFilterApplied}>\r\n        <DropdownMenu open={dropdownOpen} onOpenChange={setDropdownOpen}>\r\n          <DropdownMenuTrigger asChild>\r\n            <TooltipTrigger>\r\n              <Button variant=\"outline\" size=\"icon\">\r\n                <Filter className={`h-4 w-4 ${isFilterApplied ? 'text-blue-500' : ''}`} />\r\n              </Button>\r\n            </TooltipTrigger>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent className=\"w-80 p-4 flex flex-col gap-4\">\r\n            <Select \r\n              onValueChange={(value) => setSelectedColumn(value as FilterableColumn)} \r\n              value={selectedColumn}\r\n            >\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Select Column\" />\r\n              </SelectTrigger>\r\n              <SelectContent id=\"metric-dropdown\">\r\n                {availableColumns.map(column => (\r\n                  <SelectItem key={column} value={column}>\r\n                    {column}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            <Select onValueChange={setOperator} value={operator}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Select Operator\" />\r\n              </SelectTrigger>\r\n              <SelectContent  id=\"condition-dropdown\">\r\n                <SelectItem value=\">\">{'Greater Than ( > )'}</SelectItem>\r\n                <SelectItem value=\">=\">{'Greater Than or Equal To ( >= )'}</SelectItem>\r\n                <SelectItem value=\"<\">{'Less Than ( < )'}</SelectItem>\r\n                <SelectItem value=\"<=\">{'Less Than or Equal To ( <= )'}</SelectItem>\r\n                <SelectItem value=\"==\">{'Equal To ( == )'}</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            <Input\r\n            id=\"value-input\"\r\n              type=\"number\"\r\n              placeholder=\"Enter Value\"\r\n              value={value === undefined ? \"\" : value}\r\n              onChange={(e) => setValue(parseFloat(e.target.value))}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            <div id=\"Apply the Filter\" className=\"flex flex-row gap-2 items-center justify-center w-full\">\r\n              <Button onClick={handleAddFilter} className=\"w-full\">\r\n                Add Filter\r\n              </Button>\r\n              <Button id=\"clear-button\" variant=\"destructive\" className=\"w-full\" onClick={handleClearFilters}>\r\n                Clear\r\n              </Button>\r\n            </div>\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n\r\n        <TooltipContent>\r\n          {filterTooltip}\r\n        </TooltipContent>\r\n      </Tooltip>\r\n    </TooltipProvider>\r\n  );\r\n}\r\n\r\n// Export the types for potential use in other components\r\nexport type { FilterableColumn, FilterValue };","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;// eslint-disable-line\r\n    [key: string]: any;\r\n  }>;// eslint-disable-line\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst DeviceTypeConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'device-conversion'\r\n\r\n  const user = useSelector((state: RootState) => state.user.user, shallowEqual);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const axiosInstance = createAxiosInstance();\r\n  // Use optional chaining to safely access date properties\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n        const response = await axiosInstance.post(`/api/analytics/deviceTypeConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  \r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Device\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Device based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n              />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default DeviceTypeConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\n\r\nconst GenderConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'gender-conversion'\r\n\r\n  const user = useSelector((state: RootState)=>state.user.user , shallowEqual)\r\n  const { brandId } = useParams();\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n        const response = await axiosInstance.post(`/api/analytics/genderConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);;\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Gender\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Gender based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n              />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default GenderConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { metricConfigs } from \"./PerformanceSummary\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst AgeConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const dispatch = useDispatch();\r\n  const componentId = 'age-conversion';\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {}, shallowEqual\r\n  );\r\n  \r\n  const user = useSelector((state: RootState) => state.user.user, shallowEqual);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n   \r\n      const response = await axiosInstance.post(`/api/analytics/ageConversionReport/${brandId}`, {\r\n        userId: user?.id, \r\n        startDate: startDate, \r\n        endDate: endDate, \r\n        ...transformedFilters  \r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Age\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card id=\"age-report\" className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent >\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Age based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button id=\"refresh\" onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <div id=\"filters\">\r\n            <FilterConversions componentId={componentId} /> \r\n            </div>\r\n  \r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button id=\"expand-button\" onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n              />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default AgeConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst InterestConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'interest-conversion'\r\n\r\n  const user = useSelector((state: RootState) =>state.user.user , shallowEqual);\r\n  const { brandId } = useParams();\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n    \r\n        const response = await axiosInstance.post(`/api/analytics/interestConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Interest\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Interest based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId}/>\r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n              />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default InterestConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n    reportType: string;\r\n    data: Array<{\r\n        DeviceType: string;\r\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n        [key: string]: any;\r\n    }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst OperatingSystemConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n    const componentId = 'operatingSystem-conversion'\r\n\r\n    const user = useSelector((state: RootState) => state.user.user , shallowEqual);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = () => {\r\n        setIsFullScreen(!isFullScreen);\r\n    };\r\n\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const filters = useSelector((state: RootState) => \r\n        state.conversionFilters[componentId] || {} , shallowEqual\r\n      );\r\n\r\n      const transformedFilters = useMemo(() => {\r\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n          if (filter) {\r\n            const apiColumnName = {\r\n              \"Total Sessions\": \"sessionsFilter\",\r\n              \"Avg Conv Rate\": \"convRateFilter\",\r\n            }[column] || column;\r\n    \r\n            acc[apiColumnName] = filter;\r\n          }\r\n          return acc;\r\n        }, {});\r\n      }, [filters]);\r\n\r\n      \r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/analytics/operatingSystemConversionReport/${brandId}`, {\r\n                userId: user?.id,\r\n                startDate,\r\n                endDate,  ...transformedFilters  // Spread the transformed filters\r\n            });\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n    \r\n      useEffect(() => {\r\n        if (!isFullScreen) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [isFullScreen, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Operating System\";\r\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n    return (\r\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\r\n            <CardContent>\r\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <h2 className=\"text-lg font-medium\">Operating System based Conversion</h2>\r\n                        <Ga4Logo />\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                            <DatePickerWithRange\r\n                                defaultDate={{\r\n                                    from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                                    to: new Date()\r\n                                }}\r\n                            />\r\n                        </div>}\r\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                        </Button>\r\n                        <FilterConversions componentId={componentId} />\r\n                        <ExcelDownload\r\n                            data={apiResponse?.data || []}\r\n                            fileName={`${primaryColumn}_Conversion_Report`}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            monthlyMetrics={monthlyMetrics}\r\n                            disabled={loading}\r\n                        />\r\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"rounded-md overflow-hidden\">\r\n                    {loading ? (\r\n                        <TableSkeleton />\r\n                    ) : (\r\n                        <div>\r\n                            <PerformanceSummary\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n                            />\r\n                            <ConversionTable\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                monthlyMetrics={monthlyMetrics}\r\n                                isFullScreen={isFullScreen}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default OperatingSystemConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { metricConfigs } from \"./PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    reportType: string;\r\n    data: Array<{\r\n        DeviceType: string;\r\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n        [key: string]: any;\r\n    }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\n\r\nconst BrowserConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n  \r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n    const componentId = 'browser-conversion';\r\n    const user = useSelector((state:RootState) => state.user.user);\r\n    const { brandId } = useParams();\r\n\r\n    const toggleFullScreen = () => {\r\n        setIsFullScreen(!isFullScreen);\r\n    };\r\n\r\n    const { sessionsFilter, convRateFilter } = useSelector((state: RootState) =>\r\n        state.conversionFilters[componentId] || { sessionsFilter: null, convRateFilter: null }\r\n    );\r\n\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const filters = useSelector((state: RootState) => \r\n        state.conversionFilters[componentId] || {} ,shallowEqual\r\n      );\r\n      const transformedFilters = useMemo(() => {\r\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n          if (filter) {\r\n            const apiColumnName = {\r\n              \"Total Sessions\": \"sessionsFilter\",\r\n              \"Avg Conv Rate\": \"convRateFilter\",\r\n            }[column] || column;\r\n    \r\n            acc[apiColumnName] = filter;\r\n          }\r\n          return acc;\r\n        }, {});\r\n      }, [filters]);\r\n      \r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/analytics/browserConversionReport/${brandId}`, {\r\n                userId: user?.id,\r\n                startDate,\r\n                endDate, sessionsFilter, convRateFilter\r\n            });\r\n            const fetchedData = response.data || [];\r\n            setApiResponse(fetchedData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n    \r\n      useEffect(() => {\r\n        if (!isFullScreen) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [isFullScreen, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Browser\";\r\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n    return (\r\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n            <CardContent>\r\n\r\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <h2 className=\"text-lg font-medium\">Browser based Conversion</h2>\r\n                        <Ga4Logo />\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                            <DatePickerWithRange\r\n                                defaultDate={{\r\n                                    from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                                    to: new Date()\r\n                                }}\r\n                            />\r\n                        </div>}\r\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                        </Button>\r\n                        <FilterConversions componentId={componentId} />\r\n                        <ExcelDownload\r\n                            data={apiResponse?.data || []}\r\n                            fileName={`${primaryColumn}_Conversion_Report`}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            monthlyMetrics={monthlyMetrics}\r\n                            disabled={loading}\r\n                        />\r\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"rounded-md overflow-hidden\">\r\n                    {loading ? (\r\n                        <TableSkeleton />\r\n                    ) : (\r\n                        <div>\r\n                            <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} />\r\n                            <ConversionTable\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                monthlyMetrics={monthlyMetrics}\r\n                                isFullScreen={isFullScreen}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default BrowserConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n    reportType: string;\r\n    data: Array<{\r\n        DeviceType: string;\r\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n        [key: string]: any;\r\n    }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\n\r\nconst SourceConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n    const componentId = 'source-conversion'\r\n\r\n    const user = useSelector((state: RootState)=> state.user.user , shallowEqual)\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = () => {\r\n        setIsFullScreen(!isFullScreen);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const filters = useSelector((state: RootState) => \r\n        state.conversionFilters[componentId] || {} , shallowEqual\r\n      );\r\n\r\n      const transformedFilters = useMemo(() => {\r\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n          if (filter) {\r\n            const apiColumnName = {\r\n              \"Total Sessions\": \"sessionsFilter\",\r\n              \"Avg Conv Rate\": \"convRateFilter\",\r\n            }[column] || column;\r\n    \r\n            acc[apiColumnName] = filter;\r\n          }\r\n          return acc;\r\n        }, {});\r\n      }, [filters]);\r\n      \r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/analytics/sourceConversionReport/${brandId}`, {\r\n                userId: user?.id,\r\n                startDate,\r\n                endDate, ...transformedFilters\r\n            });\r\n            const fetchedData = response.data || [];\r\n            setApiResponse(fetchedData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n    \r\n      useEffect(() => {\r\n        if (!isFullScreen) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [isFullScreen, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Source\";\r\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n    return (\r\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n            <CardContent>\r\n\r\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <h2 className=\"text-lg font-medium\">Source based Conversion</h2>\r\n                        <Ga4Logo />\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                            <DatePickerWithRange\r\n                                defaultDate={{\r\n                                    from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                                    to: new Date()\r\n                                }}\r\n                            />\r\n                        </div>}\r\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                        </Button>\r\n                        <FilterConversions componentId={componentId} />\r\n                        <ExcelDownload\r\n                            data={apiResponse?.data || []}\r\n                            fileName={`${primaryColumn}_Conversion_Report`}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            monthlyMetrics={monthlyMetrics}\r\n                            disabled={loading}\r\n                        />\r\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"rounded-md overflow-hidden\">\r\n                    {loading ? (\r\n                        <TableSkeleton />\r\n                    ) : (\r\n                        <div>\r\n                            <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} />\r\n                            <ConversionTable\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                monthlyMetrics={monthlyMetrics}\r\n                                isFullScreen={isFullScreen}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default SourceConversion;\r\n","import React, { useState, useRef, useEffect, useMemo } from 'react';\r\nimport CollapsibleSidebar from '../Dashboard/CollapsibleSidebar';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Radar } from 'lucide-react';\r\nimport { useTokenError } from '@/context/TokenErrorContext';\r\nimport NoGA4AcessPage from '../ReportPage/NoGA4AccessPage.';\r\nimport DeviceTypeConversion from './components/DeviceConversion';\r\nimport GenderConversion from './components/GenderConversion';\r\nimport AgeConversion from './components/AgeConversion';\r\nimport { CustomTabs } from './components/CustomTabs';\r\nimport InterestConversion from './components/InterestConversion';\r\nimport OperatingSystemConversion from './components/OperatingSystemConversion';\r\nimport BrowserConversion from './components/BrowserConversion';\r\nimport SourceConversion from './components/SourceConversion';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from \"@/store/index.ts\";\r\nimport Header from '@/components/dashboard_component/Header';\r\nimport ConnectPlatform from '../ReportPage/ConnectPlatformPage';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\n\r\nconst AudienceConversionReportPage: React.FC = () => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const { brandId } = useParams<{ brandId: string }>();\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasGA4Account = selectedBrand?.ga4Account ?? false;\r\n  const { tokenError } = useTokenError();\r\n\r\n  const [activeTab, setActiveTab] = useState('age');\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n\r\n  const tabs = [\r\n    { label: 'Age', value: 'age' },\r\n    { label: 'Gender', value: 'gender' },\r\n    { label: 'Interest', value: 'interest' },\r\n    { label: 'Device', value: 'device' },\r\n    { label: 'Operating System', value: 'operatingSystem' },\r\n    { label: 'Browser', value: 'browser' },\r\n    { label: 'Source', value: 'source' },\r\n  ];\r\n\r\n  const refs = {\r\n    age: useRef<HTMLDivElement>(null),\r\n    gender: useRef<HTMLDivElement>(null),\r\n    interest: useRef<HTMLDivElement>(null),\r\n    device: useRef<HTMLDivElement>(null),\r\n    operatingSystem: useRef<HTMLDivElement>(null),\r\n    browser: useRef<HTMLDivElement>(null),\r\n    source: useRef<HTMLDivElement>(null),\r\n  };\r\n\r\n  // Observer to highlight active tab based on scroll position\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            const id = entry.target.id;\r\n            setActiveTab(id);\r\n          }\r\n        });\r\n      },\r\n      {\r\n        root: containerRef.current,\r\n        threshold: 0.7,\r\n        rootMargin: '0px 0px 0px 0px'\r\n      }\r\n    );\r\n\r\n    Object.keys(refs).forEach((key) => {\r\n      const element = refs[key as keyof typeof refs].current;\r\n      if (element) {\r\n        observer.observe(element);\r\n      }\r\n    });\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  const handleTabChange = (value: string) => {\r\n    setActiveTab(value);\r\n    const targetRef = refs[value as keyof typeof refs];\r\n\r\n    if (targetRef.current && containerRef.current) {\r\n      const headerHeight = 140; // Height of header + tabs\r\n      const elementTop = targetRef.current.getBoundingClientRect().top;\r\n      const offset = elementTop - headerHeight;\r\n\r\n      containerRef.current.scrollBy({\r\n        top: offset,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n  };\r\n\r\n  if (tokenError) {\r\n    return <NoGA4AcessPage />;\r\n  }\r\n\r\n  if (!hasGA4Account) {\r\n    if (!hasGA4Account) {\r\n      return <ConnectPlatform\r\n        platform=\"google analytics\"\r\n        brandId={brandId ?? ''}\r\n        onSuccess={(platform, accountName, accountId) => {\r\n          console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n        }} />;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex-none\">\r\n          <Header\r\n            title=\"Audience & Traffic sources\"\r\n            Icon={Radar}\r\n            showDatePicker={true}\r\n           />\r\n\r\n          {/* Tabs */}\r\n          <div className=\"bg-white px-6 sticky top-0 z-10\">\r\n            <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scrollable Content */}\r\n        <div ref={containerRef} className=\"flex-1 overflow-auto\">\r\n          <div className=\"px-6 py-4 space-y-6\">\r\n            <div id=\"age-conversion-report\" ref={refs.age}>\r\n              <AgeConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"gender\" ref={refs.gender}>\r\n              <GenderConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"interest\" ref={refs.interest} >\r\n              <InterestConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"device\" ref={refs.device} >\r\n              <DeviceTypeConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"operatingSystem\" ref={refs.operatingSystem} >\r\n              <OperatingSystemConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"browser\" ref={refs.browser} >\r\n              <BrowserConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"source\" ref={refs.source} >\r\n              <SourceConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <HelpDeskModal />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AudienceConversionReportPage;","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst CityTypeConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'city-conversion';\r\n  \r\n  const user  = useSelector((state:RootState) =>state.user.user, shallowEqual);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n        const response = await axiosInstance.post(`/api/analytics/cityConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n     \r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"City\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\r\n      <CardContent>\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">City based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n             <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n              />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default CityTypeConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst ChannelConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'channel-conversion'\r\n\r\n  const user = useSelector((state: RootState) => state.user.user , shallowEqual) ;\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n    \r\n        const response = await axiosInstance.post(`/api/analytics/channelConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Channel\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Channel based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n              <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ChannelConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\n\r\nconst RegionConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'region-conversion'\r\n  \r\n  const user = useSelector((state: RootState)=> state.user.user, shallowEqual);\r\n  const { brandId } = useParams();\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n  \r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n        const response = await axiosInstance.post(`/api/analytics/regionConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Region\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Region based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}}/>\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RegionConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst LandingPageConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'landingPage-conversion'\r\n\r\n\r\n  const user = useSelector((state: RootState)=>state.user.user , shallowEqual);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\n  \r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n        const response = await axiosInstance.post(`/api/analytics/pageConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Landing Page\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\r\n      <CardContent>\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Landing Page based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n              />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default LandingPageConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from '@/store';\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { metricConfigs } from \"./PerformanceSummary\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\n\r\nconst CampaignConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'campaign-conversion';\r\n\r\n  const user = useSelector((state: RootState)=> state.user.user , shallowEqual);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n        const response = await axiosInstance.post(`/api/analytics/campaignConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Campaign\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Campaign based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n            {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n              <DatePickerWithRange\r\n                defaultDate={{\r\n                  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                  to: new Date()\r\n                }}\r\n              />\r\n            </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default CampaignConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n    reportType: string;\r\n    data: Array<{\r\n        DeviceType: string;\r\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n        [key: string]: any;\r\n    }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst PagePathConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n      const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n    const componentId = 'pagePath-conversion'\r\n\r\n    const user  = useSelector((state: RootState) => state.user.user , shallowEqual);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = () => {\r\n        setIsFullScreen(!isFullScreen);\r\n    };\r\n\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const filters = useSelector((state: RootState) => \r\n        state.conversionFilters[componentId] || {} , shallowEqual\r\n      );\r\n\r\n      const transformedFilters = useMemo(() => {\r\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n          if (filter) {\r\n            const apiColumnName = {\r\n              \"Total Sessions\": \"sessionsFilter\",\r\n              \"Avg Conv Rate\": \"convRateFilter\",\r\n            }[column] || column;\r\n    \r\n            acc[apiColumnName] = filter;\r\n          }\r\n          return acc;\r\n        }, {});\r\n      }, [filters]);\r\n      \r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/analytics/pagePathConversionReport/${brandId}`, {\r\n                userId: user?.id,\r\n                startDate,\r\n                endDate,  ...transformedFilters \r\n            });\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 5 * 60 * 1000); // Refresh every 5 minutes\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n    \r\n      useEffect(() => {\r\n        if (!isFullScreen) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [isFullScreen, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Page Path\";\r\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n    return (\r\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\r\n            <CardContent>\r\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <h2 className=\"text-lg font-medium\">Page path based Conversion</h2>\r\n                        <Ga4Logo />\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                            <DatePickerWithRange\r\n                                defaultDate={{\r\n                                    from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                                    to: new Date()\r\n                                }}\r\n                            />\r\n                        </div>}\r\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                        </Button>\r\n                        <FilterConversions componentId={componentId} />\r\n                        <ExcelDownload\r\n                            data={apiResponse?.data || []}\r\n                            fileName={`${primaryColumn}_Conversion_Report`}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            monthlyMetrics={monthlyMetrics}\r\n                            disabled={loading}\r\n                        />\r\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"rounded-md overflow-hidden\">\r\n                    {loading ? (\r\n                        <TableSkeleton />\r\n                    ) : (\r\n                        <div>\r\n                            <PerformanceSummary\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n                            />\r\n                            <ConversionTable\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                monthlyMetrics={monthlyMetrics}\r\n                                isFullScreen={isFullScreen}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default PagePathConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n    reportType: string;\r\n    data: Array<{\r\n        DeviceType: string;\r\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n        [key: string]: any;\r\n    }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst PageTitleConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n    const componentId = 'pageTitle-conversion'\r\n\r\n    const user = useSelector((state: RootState) => state.user.user , shallowEqual);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = () => {\r\n        setIsFullScreen(!isFullScreen);\r\n    };\r\n\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const filters = useSelector((state: RootState) => \r\n        state.conversionFilters[componentId] || {} , shallowEqual\r\n      );\r\n\r\n      const transformedFilters = useMemo(() => {\r\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n          if (filter) {\r\n            const apiColumnName = {\r\n              \"Total Sessions\": \"sessionsFilter\",\r\n              \"Avg Conv Rate\": \"convRateFilter\",\r\n            }[column] || column;\r\n    \r\n            acc[apiColumnName] = filter;\r\n          }\r\n          return acc;\r\n        }, {});\r\n      }, [filters]);\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n        \r\n            const response = await axiosInstance.post(`/api/analytics/pageTitleConversionReport/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 10 minutes\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n    \r\n      useEffect(() => {\r\n        if (!isFullScreen) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [isFullScreen, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Page Title\";\r\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n    return (\r\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\r\n            <CardContent>\r\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <h2 className=\"text-lg font-medium\">Page Title based Conversion</h2>\r\n                        <Ga4Logo />\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                            <DatePickerWithRange\r\n                                defaultDate={{\r\n                                    from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                                    to: new Date()\r\n                                }}\r\n                            />\r\n                        </div>}\r\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                        </Button>\r\n                        <FilterConversions componentId={componentId} />\r\n                        <ExcelDownload\r\n                            data={apiResponse?.data || []}\r\n                            fileName={`${primaryColumn}_Conversion_Report`}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            monthlyMetrics={monthlyMetrics}\r\n                            disabled={loading}\r\n                        />\r\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"rounded-md overflow-hidden\">\r\n                    {loading ? (\r\n                        <TableSkeleton />\r\n                    ) : (\r\n                        <div>\r\n                            <PerformanceSummary\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n                            />\r\n                            <ConversionTable\r\n                                data={apiResponse?.data || []}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                monthlyMetrics={monthlyMetrics}\r\n                                isFullScreen={isFullScreen}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default PageTitleConversion;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"./Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Ga4Logo } from \"@/pages/GeneralisedDashboard/components/OtherPlatformModalContent\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport PerformanceSummary, { metricConfigs } from \"./PerformanceSummary\";\r\nimport ExcelDownload from \"./ExcelDownload\";\r\nimport FilterConversions from \"./Filter\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst CountryConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const componentId = 'country-conversion';\r\n\r\n  const user = useSelector((state: RootState)=> state.user.user , shallowEqual);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Sessions\": \"sessionsFilter\",\r\n          \"Avg Conv Rate\": \"convRateFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]);\r\n\r\nconst fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n        const response = await axiosInstance.post(`/api/analytics/countryConversionReport/${brandId}`, {\r\n            userId: user?.id,\r\n            startDate,\r\n            endDate,  ...transformedFilters  // Spread the transformed filters\r\n        });\r\n        const fetchedData = response.data || [];\r\n        setApiResponse(fetchedData);\r\n    } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n}, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 5 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  const primaryColumn = \"Country\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Country based Conversion</h2>\r\n            <Ga4Logo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date()\r\n                    }}\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions componentId={componentId} />\r\n            <ExcelDownload\r\n              data={apiResponse?.data || []}\r\n              fileName={`${primaryColumn}_Conversion_Report`}\r\n              primaryColumn={primaryColumn}\r\n              secondaryColumns={secondaryColumns}\r\n              monthlyDataKey={monthlyDataKey}\r\n              monthlyMetrics={monthlyMetrics}\r\n              disabled={loading}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <PerformanceSummary\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n              />\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default CountryConversion;\r\n","import React, { useState, useRef, useEffect, useMemo } from 'react';\r\nimport CollapsibleSidebar from '../Dashboard/CollapsibleSidebar';\r\nimport { useParams } from 'react-router-dom';\r\nimport {  Radar } from 'lucide-react';\r\nimport { useTokenError } from '@/context/TokenErrorContext';\r\nimport NoGA4AcessPage from '../ReportPage/NoGA4AccessPage.';\r\nimport CityTypeConversion from './components/CityConversion';\r\nimport ChannelConversion from './components/ChannelConversion';\r\nimport RegionConversion from './components/RegionConversion';\r\nimport LandingPageConversion from './components/LandingPageConversion';\r\nimport { CustomTabs } from './components/CustomTabs';\r\nimport CampaignConversion from './components/CampaignConversion';\r\nimport PagePathConversion from './components/PagePathConversion';\r\nimport PageTitleConversion from './components/PageTitleConversion';\r\nimport CountryConversion from './components/CountryConversion';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from \"@/store/index.ts\";\r\nimport Header from '@/components/dashboard_component/Header';\r\nimport ConnectPlatform from '../ReportPage/ConnectPlatformPage';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\n\r\nconst WebsiteConversionReportPage: React.FC = () => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const { brandId } = useParams<{ brandId: string }>();\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasGA4Account = selectedBrand?.ga4Account ?? false;\r\n  const { tokenError } = useTokenError();\r\n\r\n  const [activeTab, setActiveTab] = useState('channel');\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n\r\n  const tabs = [\r\n    { label: 'Channel', value: 'channel' },\r\n    { label: 'Campaign', value: 'campaign' },\r\n    { label: 'Country', value: 'country' },\r\n    { label: 'City', value: 'city' },\r\n    { label: 'Region', value: 'region' },\r\n    { label: 'Landing Page', value: 'landingPage' },\r\n    { label: 'Page Path', value: 'pagePath' },\r\n    { label: 'Page Title', value: 'pageTitle' }\r\n  ];\r\n\r\n  const refs = {\r\n    country: useRef<HTMLDivElement>(null),\r\n    city: useRef<HTMLDivElement>(null),\r\n    region: useRef<HTMLDivElement>(null),\r\n    channel: useRef<HTMLDivElement>(null),\r\n    campaign: useRef<HTMLDivElement>(null),\r\n    landingPage: useRef<HTMLDivElement>(null),\r\n    pagePath: useRef<HTMLDivElement>(null),\r\n    pageTitle: useRef<HTMLDivElement>(null),\r\n  };\r\n\r\n  // Observer to highlight active tab based on scroll position\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            const id = entry.target.id;\r\n            setActiveTab(id);\r\n          }\r\n        });\r\n      },\r\n      {\r\n        root: containerRef.current,\r\n        threshold: 0.7,\r\n        rootMargin: '0px 0px 0px 0px'\r\n      }\r\n    );\r\n\r\n    Object.keys(refs).forEach((key) => {\r\n      const element = refs[key as keyof typeof refs].current;\r\n      if (element) {\r\n        observer.observe(element);\r\n      }\r\n    });\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  const handleTabChange = (value: string) => {\r\n    setActiveTab(value);\r\n    const targetRef = refs[value as keyof typeof refs];\r\n\r\n    if (targetRef.current && containerRef.current) {\r\n      const headerHeight = 140; // Height of header + tabs\r\n      const elementTop = targetRef.current.getBoundingClientRect().top;\r\n      const offset = elementTop - headerHeight;\r\n\r\n      containerRef.current.scrollBy({\r\n        top: offset,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n  };\r\n\r\n  if (tokenError) {\r\n    return <NoGA4AcessPage />;\r\n  }\r\n\r\n  if (!hasGA4Account) {\r\n    if (!hasGA4Account) {\r\n      return <ConnectPlatform\r\n        platform=\"google analytics\"\r\n        brandId={brandId ?? ''}\r\n        onSuccess={(platform, accountName, accountId) => {\r\n          console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n        }} />;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex-none\">\r\n        <Header\r\n            title=\"Campaign and Website Performance\"\r\n            Icon={Radar}\r\n            showDatePicker={true}\r\n           />\r\n\r\n          {/* Tabs */}\r\n          <div className=\"bg-white px-6 sticky top-0 z-10\">\r\n            <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scrollable Content */}\r\n        <div ref={containerRef} className=\"flex-1 overflow-auto\">\r\n          <div className=\"px-6 py-4 space-y-6\">\r\n            <div id=\"channel\" ref={refs.channel} >\r\n              <ChannelConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"campaign\" ref={refs.campaign} >\r\n              <CampaignConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"country\" ref={refs.country} >\r\n              <CountryConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"city\" ref={refs.city} >\r\n              <CityTypeConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"region\" ref={refs.region} >\r\n              <RegionConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"landingPage\" ref={refs.landingPage}>\r\n              <LandingPageConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"pagePath\" ref={refs.pagePath}>\r\n              <PagePathConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"pageTitle\" ref={refs.pageTitle}>\r\n              <PageTitleConversion dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <HelpDeskModal />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WebsiteConversionReportPage;","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { GoogleLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\n\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst SearchTerm: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n\r\n\r\n  const user = useSelector((state: RootState) => state.user.user ,shallowEqual);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = 'google-ads-search-term'; // Add a unique component identifier\r\n\r\n  // Get filters from Redux\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n  \r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n  \r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/segment/searchTerm/${brandId}`, {\r\n        userId: user?.id,\r\n        startDate,\r\n        endDate,\r\n        ...transformedFilters, \r\n      });\r\n  \r\n      const fetchedData = response.data?.data || [];\r\n      setApiResponse({\r\n        reportType: \"Search Term\",\r\n        data: fetchedData,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, user?.id, transformedFilters]); // Now filters are tracked properly\r\n  \r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 10 minutes\r\n    return () => clearInterval(intervalId);\r\n}, [fetchData]);\r\n\r\nuseEffect(() => {\r\n  if (propDateRange) {\r\n    dispatch(setDate({\r\n      from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n      to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n    }));\r\n  }\r\n}, [propDateRange]);\r\n\r\nuseEffect(() => {\r\n  if (!isFullScreen) {\r\n    if (propDateRange) {\r\n    dispatch(setDate({\r\n      from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n      to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n    }));\r\n  }\r\n  }\r\n}, [isFullScreen, propDateRange]);\r\n\r\n\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Search Term\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const monthlyMetrics = [\"Cost\", \"Conv. Value/ Cost\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Search Term Insights</h2>\r\n            <GoogleLogo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                   \r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions \r\n              componentId={componentId}\r\n              availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n                isAdsTable={true}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SearchTerm;","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { GoogleLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\n\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst Age: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const dispatch = useDispatch();\r\n  \r\n  \r\n  const user = useSelector((state: RootState)=>state.user.user , shallowEqual)\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = 'google-ads-age';\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n  \r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/segment/age/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\r\n      }, { withCredentials: true })\r\n\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate,transformedFilters, user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Age Range\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Age Insights</h2>\r\n            <GoogleLogo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions \r\n              componentId={componentId}\r\n              availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n                isAdsTable={true}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Age;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { GoogleLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\n\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst Gender: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const dispatch = useDispatch();\r\n  \r\n  \r\n  const user = useSelector((state: RootState)=>state.user.user);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = \"google-ads-gender\";\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n  \r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/segment/gender/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\r\n      }, { withCredentials: true })\r\n\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, transformedFilters , user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Gender\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Gender Insights</h2>\r\n            <GoogleLogo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    \r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions \r\n              componentId={componentId}\r\n              availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n                isAdsTable={true}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Gender;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { GoogleLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\n\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst Keyword: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  const dispatch = useDispatch();\r\n  \r\n  \r\n  const user = useSelector((state: RootState)=>state.user.user);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = \"google-ads-keyword\";\r\n\r\n  const filters = useSelector((state: RootState) => \r\n    state.conversionFilters[componentId] || {} , shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n  \r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/segment/keyword/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\r\n      }, { withCredentials: true })\r\n\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, transformedFilters , user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Keyword\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Keyword Insights</h2>\r\n            <GoogleLogo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                    \r\n                  />\r\n                </div>}\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <FilterConversions \r\n              componentId={componentId}\r\n              availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\r\n            />\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n                isAdsTable={true}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Keyword;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { GoogleLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\n\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n}\r\n\r\nconst Product: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n  const [date, setDate] = useState<DateRange | undefined>(propDateRange);\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\r\n  \r\n  \r\n  const user = useSelector((state: RootState)=>state.user.user);\r\n  const { brandId } = useParams();\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/segment/product/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate, \r\n      }, { withCredentials: true })\r\n\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate,]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    setDate(propDateRange);\r\n  }, [propDateRange]);\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Product\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\r\n\r\n  return (\r\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n      <CardContent>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h2 className=\"text-lg font-medium\">Product Insights</h2>\r\n            <GoogleLogo />\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-md overflow-hidden\">\r\n          {loading ? (\r\n            <TableSkeleton />\r\n          ) : (\r\n            <div>\r\n              <ConversionTable\r\n                data={apiResponse?.data || []}\r\n                primaryColumn={primaryColumn}\r\n                secondaryColumns={secondaryColumns}\r\n                monthlyDataKey={monthlyDataKey}\r\n                monthlyMetrics={monthlyMetrics}\r\n                isFullScreen={isFullScreen}\r\n                isAdsTable={true}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport CollapsibleSidebar from '../Dashboard/CollapsibleSidebar';\r\nimport { SquareChartGantt } from 'lucide-react';\r\nimport SearchTerm from './components/SearchTerm';\r\nimport { CustomTabs } from '../ConversionReportPage/components/CustomTabs';\r\nimport Age from './components/Age';\r\nimport Gender from './components/Gender';\r\nimport { useSelector } from 'react-redux';\r\nimport { useMemo } from 'react';\r\nimport { RootState } from '@/store';\r\nimport Header from '@/components/dashboard_component/Header';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useTokenError } from '@/context/TokenErrorContext';\r\nimport NoGA4AcessPage from '../ReportPage/NoGA4AccessPage.';\r\nimport ConnectPlatform from '../ReportPage/ConnectPlatformPage';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\nimport Keyword from './components/Keyword';\r\nimport Product from './components/Product';\r\n// import Product from './components/Product';\r\n// import Brand from './components/Brand';\r\n\r\n\r\nconst GoogleAdsDashboard: React.FC = () => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [activeTab, setActiveTab] = useState('searchterm');\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const { brandId } = useParams<{ brandId: string }>();\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasGoogleAdAccount = selectedBrand?.googleAdAccount?.clientId\r\n  ? selectedBrand.googleAdAccount.clientId\r\n  : false;\r\n  const { tokenError } = useTokenError();\r\n\r\n  const tabs = [\r\n    { label: 'Search Term', value: 'searchterm' },\r\n    { label: 'Age', value: 'age' },\r\n    { label: 'Gender', value: 'gender' },\r\n    { label: 'Keyword', value: 'keyword'},\r\n    { label: 'Product', value: 'product'}\r\n  ];\r\n\r\n  const refs = {\r\n    searchterm: useRef<HTMLDivElement>(null),\r\n    age: useRef<HTMLDivElement>(null),\r\n    gender: useRef<HTMLDivElement>(null),\r\n    keyword: useRef<HTMLDivElement>(null),\r\n    product: useRef<HTMLDivElement>(null)\r\n  };\r\n\r\n  // Observer to highlight active tab based on scroll position\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            const id = entry.target.id;\r\n            setActiveTab(id);\r\n          }\r\n        });\r\n      },\r\n      {\r\n        root: containerRef.current,\r\n        threshold: 0.7,\r\n        rootMargin: '0px 0px 0px 0px'\r\n      }\r\n    );\r\n\r\n    Object.keys(refs).forEach((key) => {\r\n      const element = refs[key as keyof typeof refs].current;\r\n      if (element) {\r\n        observer.observe(element);\r\n      }\r\n    });\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  const handleTabChange = (value: string) => {\r\n    setActiveTab(value);\r\n    const targetRef = refs[value as keyof typeof refs];\r\n\r\n    if (targetRef.current && containerRef.current) {\r\n      const headerHeight = 140; // Height of header + tabs\r\n      const elementTop = targetRef.current.getBoundingClientRect().top;\r\n      const offset = elementTop - headerHeight;\r\n\r\n      containerRef.current.scrollBy({\r\n        top: offset,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-hidden flex flex-col\">\r\n      {tokenError ? (\r\n          <NoGA4AcessPage />\r\n        ) : !hasGoogleAdAccount ? (\r\n          <>\r\n            <ConnectPlatform\r\n              platform=\"google ads\"\r\n              brandId={brandId ?? ''}\r\n              onSuccess={(platform, accountName, accountId) => {\r\n                console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n              }}\r\n            />\r\n          </>\r\n        ) : (\r\n          <>\r\n        {/* Header */}\r\n        <div className=\"flex-none\">\r\n        <Header showDatePicker={true} Icon={SquareChartGantt} title='Google Ads Reports' />\r\n          {/* Tabs */}\r\n          <div className=\"bg-white px-6 sticky top-0 z-10\">\r\n            <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scrollable Content */}\r\n        <div ref={containerRef} className=\"flex-1 overflow-auto\">\r\n          <div className=\"px-6 py-4 space-y-6\">\r\n            <div id=\"searchterm\" ref={refs.searchterm}>\r\n              <SearchTerm dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"age\" ref={refs.age}>\r\n              <Age dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"gender\" ref={refs.gender}>\r\n              <Gender dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n             <div id=\"keyword\" ref={refs.keyword}>\r\n              <Keyword dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n            <div id=\"product\" ref={refs.product}>\r\n              <Product dateRange={{ \r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined \r\n              }} />\r\n            </div>\r\n        \r\n          </div>\r\n        </div>\r\n        </>\r\n        )}\r\n      </div>\r\n      <HelpDeskModal />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleAdsDashboard;","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { FacebookLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport { RootState } from \"@/store\";\r\nimport PerformanceSummary, { metricConfigs } from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        audienceData: Array<{\r\n            \"Audience Segments\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\":number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedAudienceData: Array<{\r\n        \"Audience Segments\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst AudienceFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const user = useSelector((state : RootState) =>state.user.user);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId:string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/fbReport/audience/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n      \r\n      useEffect(() => {\r\n        if (!fullScreenAccount) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [fullScreenAccount, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    const blendedAudienceData = apiResponse?.blendedAudienceData;\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Audience Segments\";\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\r\n\r\n    return (\r\n        <div>\r\n            {/* Dashboard Header */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <FacebookLogo />\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Audience Segments Insights</h2>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Account Cards Grid */}\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    <TableSkeleton />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    {(blendedAudienceData && blendedAudienceData.length > 0)&&(\r\n                         <Card\r\n   \r\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                     >\r\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                             <div className=\"flex items-center justify-between\">\r\n                                 <div className=\"flex items-center gap-2\">\r\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                     <div className=\"text-lg font-medium\">\r\n                                         Blended Summary\r\n                                     </div>\r\n                                 </div>\r\n                                 <div className=\"flex items-center space-x-2\">\r\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                         <DatePickerWithRange\r\n                                             \r\n                                         />\r\n                                     </div>}\r\n                                     <Button\r\n                                         onClick={handleManualRefresh}\r\n                                         disabled={loading}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                     </Button>\r\n                                     <Button\r\n                                         onClick={() => toggleFullScreen('blended-summary')}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         {fullScreenAccount === 'blended-summary' ? (\r\n                                             <Minimize className=\"h-4 w-4\" />\r\n                                         ) : (\r\n                                             <Maximize className=\"h-4 w-4\" />\r\n                                         )}\r\n                                     </Button>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                         <CardContent className=\"p-0\">\r\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                             <PerformanceSummary\r\n                                        data={blendedAudienceData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                 <ConversionTable\r\n                                     data={Array.isArray(blendedAudienceData) ? blendedAudienceData : [blendedAudienceData]}\r\n                                     primaryColumn={primaryColumn}\r\n                                     secondaryColumns={secondaryColumns}\r\n                                     monthlyDataKey={monthlyDataKey}\r\n                                     monthlyMetrics={monthlyMetrics}\r\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\r\n                                     \r\n                                 />\r\n                             </div>\r\n                         </CardContent>\r\n                     </Card>\r\n                    )}\r\n                    {apiResponse?.data.map((account, index) => (\r\n                        <Card\r\n                            key={index}\r\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            {account.account_name}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange\r\n                                               \r\n                                            />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                <PerformanceSummary\r\n                                        data={account.audienceData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                    <ConversionTable\r\n                                        data={account.audienceData}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                       \r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\nexport default AudienceFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent} from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { FacebookLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary, { metricConfigs } from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        placementData: Array<{\r\n            \"Placements\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedPlacementData: Array<{\r\n        \"Placements\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst PlacementFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state : RootState) =>state.date.from)\r\n    const dateTo = useSelector((state : RootState)=>state.date.to)\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n\r\n    const user = useSelector((state : RootState)=>state.user.user);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/fbReport/placement/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n      \r\n      useEffect(() => {\r\n        if (!fullScreenAccount) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [fullScreenAccount, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    const blendedPlacementData = apiResponse?.blendedPlacementData;    \r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Placements\";\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\r\n\r\n    return (\r\n        <div>\r\n            {/* Dashboard Header */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <FacebookLogo />\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Placements Insights</h2>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Account Cards Grid */}\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    <TableSkeleton />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    {(blendedPlacementData && blendedPlacementData.length > 0)&&(\r\n                         <Card\r\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                     >\r\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                             <div className=\"flex items-center justify-between\">\r\n                                 <div className=\"flex items-center gap-2\">\r\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                     <div className=\"text-lg font-medium\">\r\n                                         Blended Summary\r\n                                     </div>\r\n                                 </div>\r\n                                 <div className=\"flex items-center space-x-2\">\r\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                         <DatePickerWithRange\r\n                                             \r\n                                         />\r\n                                     </div>}\r\n                                     <Button\r\n                                         onClick={handleManualRefresh}\r\n                                         disabled={loading}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                     </Button>\r\n                                     <Button\r\n                                         onClick={() => toggleFullScreen('blended-summary')}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         {fullScreenAccount === 'blended-summary' ? (\r\n                                             <Minimize className=\"h-4 w-4\" />\r\n                                         ) : (\r\n                                             <Maximize className=\"h-4 w-4\" />\r\n                                         )}\r\n                                     </Button>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                         <CardContent className=\"p-0\">\r\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                             <PerformanceSummary\r\n                                        data={blendedPlacementData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                 <ConversionTable\r\n                                     data={Array.isArray(blendedPlacementData) ? blendedPlacementData : [blendedPlacementData]}\r\n                                     primaryColumn={primaryColumn}\r\n                                     secondaryColumns={secondaryColumns}\r\n                                     monthlyDataKey={monthlyDataKey}\r\n                                     monthlyMetrics={monthlyMetrics}\r\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\r\n                                     \r\n                                 />\r\n                             </div>\r\n                         </CardContent>\r\n                     </Card>\r\n                    )}\r\n                    {apiResponse?.data.map((account, index) => (\r\n                        <Card\r\n                            key={index}\r\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            {account.account_name}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange\r\n                                               \r\n                                            />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                <PerformanceSummary\r\n                                        data={account.placementData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                    <ConversionTable\r\n                                        data={account.placementData}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        \r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\nexport default PlacementFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent} from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { FacebookLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary, { metricConfigs } from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        platformData: Array<{\r\n            \"Platforms\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\":number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedPlatformData: Array<{\r\n        \"Platforms\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst PlatformFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const dispatch = useDispatch();\r\n    const user  = useSelector((state : RootState)=>state.user.user);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId:string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/fbReport/platform/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n      \r\n      useEffect(() => {\r\n        if (!fullScreenAccount) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [fullScreenAccount, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    const blendedPlatformData = apiResponse?.blendedPlatformData;\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Platforms\";\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\r\n\r\n    return (\r\n        <div>\r\n            {/* Dashboard Header */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <FacebookLogo />\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Platform Insights</h2>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Account Cards Grid */}\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    <TableSkeleton />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                     {(blendedPlatformData && blendedPlatformData.length > 0)&&(\r\n                         <Card\r\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                     >\r\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                             <div className=\"flex items-center justify-between\">\r\n                                 <div className=\"flex items-center gap-2\">\r\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                     <div className=\"text-lg font-medium\">\r\n                                         Blended Summary\r\n                                     </div>\r\n                                 </div>\r\n                                 <div className=\"flex items-center space-x-2\">\r\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                         <DatePickerWithRange\r\n                                             \r\n                                         />\r\n                                     </div>}\r\n                                     <Button\r\n                                         onClick={handleManualRefresh}\r\n                                         disabled={loading}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                     </Button>\r\n                                     <Button\r\n                                         onClick={() => toggleFullScreen('blended-summary')}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         {fullScreenAccount === 'blended-summary' ? (\r\n                                             <Minimize className=\"h-4 w-4\" />\r\n                                         ) : (\r\n                                             <Maximize className=\"h-4 w-4\" />\r\n                                         )}\r\n                                     </Button>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                         <CardContent className=\"p-0\">\r\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                             <PerformanceSummary\r\n                                        data={blendedPlatformData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                 <ConversionTable\r\n                                     data={Array.isArray(blendedPlatformData) ? blendedPlatformData : [blendedPlatformData]}\r\n                                     primaryColumn={primaryColumn}\r\n                                     secondaryColumns={secondaryColumns}\r\n                                     monthlyDataKey={monthlyDataKey}\r\n                                     monthlyMetrics={monthlyMetrics}\r\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\r\n                                     \r\n                                 />\r\n                             </div>\r\n                         </CardContent>\r\n                     </Card>\r\n                    )}\r\n                    {apiResponse?.data.map((account, index) => (\r\n                        <Card\r\n                            key={index}\r\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md px-3 pt-2\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            {account.account_name}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange\r\n                                                \r\n                                            />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                     <PerformanceSummary\r\n                                        data={account.platformData}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    /> \r\n                                    <ConversionTable\r\n                                        data={account.platformData}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        \r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\nexport default PlatformFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent} from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { FacebookLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary, { metricConfigs } from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        countryData: Array<{\r\n            \"Country\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\":number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedCountryData: Array<{\r\n        \"Country\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst CountryFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n\r\n    const user = useSelector((state : RootState) => state.user.user);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId:string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/fbReport/country/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n      \r\n      useEffect(() => {\r\n        if (!fullScreenAccount) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [fullScreenAccount, propDateRange]);\r\n\r\n    const blendedCountryData = apiResponse?.blendedCountryData;\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Country\";\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\r\n\r\n    return (\r\n        <div>\r\n            {/* Dashboard Header */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <FacebookLogo />\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Country Insights</h2>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Account Cards Grid */}\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    <TableSkeleton />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    {(blendedCountryData && blendedCountryData.length > 0)&&(\r\n                         <Card\r\n   \r\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                     >\r\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                             <div className=\"flex items-center justify-between\">\r\n                                 <div className=\"flex items-center gap-2\">\r\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                     <div className=\"text-lg font-medium\">\r\n                                         Blended Summary\r\n                                     </div>\r\n                                 </div>\r\n                                 <div className=\"flex items-center space-x-2\">\r\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                         <DatePickerWithRange\r\n                                             \r\n                                         />\r\n                                     </div>}\r\n                                     <Button\r\n                                         onClick={handleManualRefresh}\r\n                                         disabled={loading}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                     </Button>\r\n                                     <Button\r\n                                         onClick={() => toggleFullScreen('blended-summary')}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         {fullScreenAccount === 'blended-summary' ? (\r\n                                             <Minimize className=\"h-4 w-4\" />\r\n                                         ) : (\r\n                                             <Maximize className=\"h-4 w-4\" />\r\n                                         )}\r\n                                     </Button>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                         <CardContent className=\"p-0\">\r\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                             <PerformanceSummary\r\n                                        data={blendedCountryData|| []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                 <ConversionTable\r\n                                     data={Array.isArray(blendedCountryData) ? blendedCountryData : [blendedCountryData]}\r\n                                     primaryColumn={primaryColumn}\r\n                                     secondaryColumns={secondaryColumns}\r\n                                     monthlyDataKey={monthlyDataKey}\r\n                                     monthlyMetrics={monthlyMetrics}\r\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\r\n                                 />\r\n                             </div>\r\n                         </CardContent>\r\n                     </Card>\r\n                    )}\r\n                    {apiResponse?.data.map((account, index) => (\r\n                        <Card\r\n                            key={index}\r\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            {account.account_name}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange\r\n                                               \r\n                                            />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                     <PerformanceSummary\r\n                                        data={account.countryData|| []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                    <ConversionTable\r\n                                        data={account.countryData}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\nexport default CountryFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { FacebookLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary, { metricConfigs } from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        deviceData: Array<{\r\n            \"Device\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\":number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedDeviceData: Array<{\r\n        \"Device\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst DeviceFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateForm = useSelector((state : RootState)=> state.date.from)\r\n    const dateTo = useSelector((state : RootState)=> state.date.to)\r\n    const date = useMemo(() => ({\r\n        from: dateForm,\r\n        to: dateTo\r\n    }), [dateForm, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n    const user  = useSelector((state :RootState) =>state.user.user);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId:string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/fbReport/device/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n      \r\n      useEffect(() => {\r\n        if (!fullScreenAccount) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [fullScreenAccount, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    const blendedDeviceData = apiResponse?.blendedDeviceData\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Device\";\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\r\n\r\n    return (\r\n        <div>\r\n            {/* Dashboard Header */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <FacebookLogo />\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Device Insights</h2>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Account Cards Grid */}\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    <TableSkeleton />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    {(blendedDeviceData && blendedDeviceData.length > 0)&&(\r\n                         <Card\r\n   \r\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                     >\r\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                             <div className=\"flex items-center justify-between\">\r\n                                 <div className=\"flex items-center gap-2\">\r\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                     <div className=\"text-lg font-medium\">\r\n                                         Blended Summary\r\n                                     </div>\r\n                                 </div>\r\n                                 <div className=\"flex items-center space-x-2\">\r\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                         <DatePickerWithRange\r\n                                             \r\n                                         />\r\n                                     </div>}\r\n                                     <Button\r\n                                         onClick={handleManualRefresh}\r\n                                         disabled={loading}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                     </Button>\r\n                                     <Button\r\n                                         onClick={() => toggleFullScreen('blended-summary')}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         {fullScreenAccount === 'blended-summary' ? (\r\n                                             <Minimize className=\"h-4 w-4\" />\r\n                                         ) : (\r\n                                             <Maximize className=\"h-4 w-4\" />\r\n                                         )}\r\n                                     </Button>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                         <CardContent className=\"p-0\">\r\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                             <PerformanceSummary\r\n                                        data={blendedDeviceData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                 <ConversionTable\r\n                                     data={Array.isArray(blendedDeviceData) ? blendedDeviceData : [blendedDeviceData]}\r\n                                     primaryColumn={primaryColumn}\r\n                                     secondaryColumns={secondaryColumns}\r\n                                     monthlyDataKey={monthlyDataKey}\r\n                                     monthlyMetrics={monthlyMetrics}\r\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\r\n                                     \r\n                                 />\r\n                             </div>\r\n                         </CardContent>\r\n                     </Card>\r\n                    )}\r\n                    {apiResponse?.data.map((account, index) => (\r\n                        <Card\r\n                            key={index}\r\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            {account.account_name}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                     <PerformanceSummary\r\n                                        data={account.deviceData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                    <ConversionTable\r\n                                        data={account.deviceData}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        \r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\nexport default DeviceFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { FacebookLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary, { metricConfigs } from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        genderData: Array<{\r\n            \"Gender\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedGenderData: Array<{\r\n        \"Gender\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst GenderFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateForm = useSelector((state : RootState) => state.date.from);\r\n    const dateTo = useSelector((state : RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateForm,\r\n        to: dateTo\r\n    }), [dateForm, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n\r\n    const user  = useSelector((state : RootState) => state.user.user);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId:string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/fbReport/gender/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n      }, [propDateRange]);\r\n      \r\n      useEffect(() => {\r\n        if (!fullScreenAccount) {\r\n          if (propDateRange) {\r\n          dispatch(setDate({\r\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n          }));\r\n        }\r\n        }\r\n      }, [fullScreenAccount, propDateRange]);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    const blendedGenderData = apiResponse?.blendedGenderData;\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Gender\";\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\r\n\r\n    return (\r\n        <div>\r\n            {/* Dashboard Header */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <FacebookLogo />\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Gender Insights</h2>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Account Cards Grid */}\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    <TableSkeleton />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    {(blendedGenderData && blendedGenderData.length >0) &&(\r\n                         <Card\r\n   \r\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                     >\r\n                         <div className=\"bg-white rounded-md px-3 pt-2\">\r\n                             <div className=\"flex items-center justify-between\">\r\n                                 <div className=\"flex items-center gap-2\">\r\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                     <div className=\"text-lg font-medium\">\r\n                                         Blended Summary\r\n                                     </div>\r\n                                 </div>\r\n                                 <div className=\"flex items-center space-x-2\">\r\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                         <DatePickerWithRange\r\n                                             \r\n                                         />\r\n                                     </div>}\r\n                                     <Button\r\n                                         onClick={handleManualRefresh}\r\n                                         disabled={loading}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                     </Button>\r\n                                     <Button\r\n                                         onClick={() => toggleFullScreen('blended-summary')}\r\n                                         size=\"sm\"\r\n                                         variant=\"outline\"\r\n                                         className=\"hover:bg-muted\"\r\n                                     >\r\n                                         {fullScreenAccount === 'blended-summary' ? (\r\n                                             <Minimize className=\"h-4 w-4\" />\r\n                                         ) : (\r\n                                             <Maximize className=\"h-4 w-4\" />\r\n                                         )}\r\n                                     </Button>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                         <CardContent className=\"p-0\">\r\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                             <PerformanceSummary\r\n                                        data={blendedGenderData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                 <ConversionTable\r\n                                     data={Array.isArray(blendedGenderData) ? blendedGenderData : [blendedGenderData]}\r\n                                     primaryColumn={primaryColumn}\r\n                                     secondaryColumns={secondaryColumns}\r\n                                     monthlyDataKey={monthlyDataKey}\r\n                                     monthlyMetrics={monthlyMetrics}\r\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\r\n                                     \r\n                                 />\r\n                             </div>\r\n                         </CardContent>\r\n                     </Card>\r\n                    )}\r\n                    {apiResponse?.data.map((account, index) => (\r\n                        <Card\r\n                            key={index}\r\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            {account.account_name}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange\r\n                                               \r\n                                            />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                     <PerformanceSummary\r\n                                        data={account.genderData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                    <ConversionTable\r\n                                        data={account.genderData}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        isAdsTable={true}\r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\nexport default GenderFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent} from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { FacebookLogo } from \"@/pages/AnalyticsDashboard/AdAccountsMetricsCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary, { metricConfigs } from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        ageData: Array<{\r\n            \"Age\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedAgeData: Array<{\r\n        \"Age\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst AgeFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const user = useSelector((state: RootState) => state.user.user);\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/fbReport/age/${brandId}`, {\r\n                userId: user?.id, startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange) {\r\n            dispatch(setDate({\r\n                from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n                to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n            }));\r\n        }\r\n    }, [propDateRange]);\r\n\r\n    useEffect(() => {\r\n        if (!fullScreenAccount) {\r\n            if (propDateRange) {\r\n                dispatch(setDate({\r\n                    from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n                    to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n                }));\r\n            }\r\n        }\r\n    }, [fullScreenAccount, propDateRange]);\r\n\r\n    // Extract columns dynamically from the API response\r\n    const primaryColumn = \"Age\";\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n    const blendedAgeData = apiResponse?.blendedAgeData;\r\n\r\n    return (\r\n        <div>\r\n            {/* Dashboard Header */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <FacebookLogo />\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Age Insights</h2>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Account Cards Grid */}\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    <TableSkeleton />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-6\">\r\n                    {(blendedAgeData && blendedAgeData.length > 0) && (\r\n                        <Card\r\n\r\n                            className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            Blended Summary\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange\r\n\r\n                                            />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen('blended-summary')}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === 'blended-summary' ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                    <PerformanceSummary\r\n                                        data={blendedAgeData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                    <ConversionTable\r\n                                        data={Array.isArray(blendedAgeData) ? blendedAgeData : [blendedAgeData]}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === 'blended-summary'}\r\n                                        \r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    )}\r\n                    {apiResponse?.data.map((account, index) => (\r\n                        <Card\r\n                            key={index}\r\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\r\n                        >\r\n                            <div className=\"bg-white rounded-md px-3 pt-2\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\r\n                                        <div className=\"text-lg font-medium\">\r\n                                            {account.account_name}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                                            <DatePickerWithRange\r\n\r\n                                            />\r\n                                        </div>}\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                                    <PerformanceSummary\r\n                                        data={account.ageData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                    />\r\n                                    <ConversionTable\r\n                                        data={Array.isArray(account.ageData) ? account.ageData : [account.ageData]}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        monthlyMetrics={monthlyMetrics}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\nexport default AgeFbReport;\r\n","import React, { useMemo, useState } from 'react';\r\nimport CollapsibleSidebar from '../Dashboard/CollapsibleSidebar';\r\nimport { CustomTabs } from '../ConversionReportPage/components/CustomTabs';\r\nimport { FaMeta } from \"react-icons/fa6\";\r\nimport AudienceFbReport from './component/AudienceFbReport';\r\nimport PlacementFbReport from './component/PlacementFbReport';\r\nimport PlatformFbReport from './component/PlatformFbReport';\r\nimport CountryFbReport from './component/CountryFbReport';\r\nimport DeviceFbReport from './component/DeviceFbReport';\r\nimport GenderFbReport from './component/GenderFbReport';\r\nimport AgeFbReport from './component/AgeFbReport';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport Header from '@/components/dashboard_component/Header';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\n\r\n\r\n\r\n\r\n\r\nconst FbReportPage: React.FC = () => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [activeTab, setActiveTab] = useState('age');\r\n\r\n    const dateRange = {\r\n        from: date.from ? new Date(date.from) : undefined,\r\n        to: date.to ? new Date(date.to) : undefined\r\n    }\r\n\r\n    const tabs = [\r\n        { label: 'Age', value: 'age' },\r\n        { label: 'Gender', value: 'gender' },\r\n        { label: 'Country', value: 'country' },\r\n        { label: 'Platform', value: 'platform' },\r\n        { label: 'Placement', value: 'placement' },\r\n        { label: 'Impression Device', value: 'impressionDevice' },\r\n        { label: 'Audience Segments', value: 'audienceSegments' }\r\n    ];\r\n\r\n\r\n    const handleTabChange = (value: string) => {\r\n        setActiveTab(value);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-gray-100\">\r\n            <CollapsibleSidebar />\r\n            <div className=\"flex-1 h-screen overflow-hidden flex flex-col\">\r\n                {/* Header */}\r\n                <div className=\"flex-none\">\r\n                    <Header title='Meta Reports' Icon={FaMeta} showDatePicker={true} />\r\n\r\n                    {/* Tabs */}\r\n                    <div className=\"bg-white px-6 sticky top-0 z-10\">\r\n                        <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Scrollable Content */}\r\n                <div className=\"flex-1 overflow-auto\">\r\n                    <div className=\"px-6 py-4 space-y-6\">\r\n                        {activeTab === 'audienceSegments' && (\r\n                            <div id=\"audienceSegments\">\r\n                                <AudienceFbReport dateRange={dateRange} />\r\n                            </div>\r\n                        )}\r\n                        {activeTab === 'placement' && (\r\n                            <div id=\"placement\">\r\n                                <PlacementFbReport dateRange={dateRange} />\r\n                            </div>\r\n                        )}\r\n                        {activeTab === 'platform' && (\r\n                            <div id=\"platform\">\r\n                                <PlatformFbReport dateRange={dateRange} />\r\n                            </div>\r\n                        )}\r\n                        {activeTab === 'country' && (\r\n                            <div id=\"country\">\r\n                                <CountryFbReport dateRange={dateRange} />\r\n                            </div>\r\n                        )}\r\n                        {activeTab === 'impressionDevice' && (\r\n                            <div id=\"impressionDevice\">\r\n                                <DeviceFbReport dateRange={dateRange} />\r\n                            </div>\r\n                        )}\r\n                        {activeTab === 'gender' && (\r\n                            <div id=\"gender\">\r\n                                <GenderFbReport dateRange={dateRange} />\r\n                            </div>\r\n                        )}\r\n                        {activeTab === 'age' && (\r\n                            <div id=\"age\">\r\n                                <AgeFbReport dateRange={dateRange} />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <HelpDeskModal />\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default FbReportPage;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface CampaignGroup {\r\n  id: string;\r\n  name: string;\r\n  campaigns: string[];\r\n  color: string;\r\n}\r\n\r\ninterface AccountCampaignGroups {\r\n  [accountId: string]: {\r\n    groups: CampaignGroup[];\r\n    selectedCampaigns: string[];\r\n    editingGroupId: string | null;\r\n    expandedGroups: string[];\r\n    isCreatingGroup: boolean;\r\n  };\r\n}\r\n\r\ninterface CampaignGroupsState {\r\n  accounts: AccountCampaignGroups;\r\n}\r\n\r\nconst defaultAccountState = {\r\n  groups: [],\r\n  selectedCampaigns: [],\r\n  editingGroupId: null,\r\n  expandedGroups: [],\r\n  isCreatingGroup: false\r\n};\r\n\r\n// Initialize account state if it doesn't exist\r\nconst initializeAccountState = (state: CampaignGroupsState, accountId: string) => {\r\n  if (!state.accounts) {\r\n    state.accounts = {};\r\n  }\r\n  if (!state.accounts[accountId]) {\r\n    state.accounts[accountId] = { ...defaultAccountState };\r\n  }\r\n};\r\n\r\nconst campaignGroupsSlice = createSlice({\r\n  name: 'campaignGroups',\r\n  initialState: { accounts: {} } as CampaignGroupsState,\r\n  reducers: {\r\n    createGroup: (state, action: PayloadAction<{ accountId: string; name: string; campaigns: string[]; color: string }>) => {\r\n      const { accountId, name, campaigns, color } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      \r\n      const newGroup: CampaignGroup = {\r\n        id: Date.now().toString(),\r\n        name,\r\n        campaigns,\r\n        color\r\n      };\r\n      state.accounts[accountId].groups.push(newGroup);\r\n      state.accounts[accountId].selectedCampaigns = [];\r\n      state.accounts[accountId].isCreatingGroup = false;\r\n    },\r\n    deleteGroup: (state, action: PayloadAction<{ accountId: string; groupId: string }>) => {\r\n      const { accountId, groupId } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].groups = state.accounts[accountId].groups.filter(group => group.id !== groupId);\r\n      if (state.accounts[accountId].editingGroupId === groupId) {\r\n        state.accounts[accountId].editingGroupId = null;\r\n      }\r\n    },\r\n    addCampaignToGroup: (state, action: PayloadAction<{ accountId: string; groupId: string; campaignName: string }>) => {\r\n      const { accountId, groupId, campaignName } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      const group = state.accounts[accountId].groups.find(g => g.id === groupId);\r\n      if (group && !group.campaigns.includes(campaignName)) {\r\n        group.campaigns.push(campaignName);\r\n      }\r\n    },\r\n    removeCampaignFromGroup: (state, action: PayloadAction<{ accountId: string; groupId: string; campaignName: string }>) => {\r\n      const { accountId, groupId, campaignName } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      const group = state.accounts[accountId].groups.find(g => g.id === groupId);\r\n      if (group) {\r\n        group.campaigns = group.campaigns.filter(c => c !== campaignName);\r\n      }\r\n    },\r\n    setSelectedCampaigns: (state, action: PayloadAction<{ accountId: string; campaigns: string[] }>) => {\r\n      const { accountId, campaigns } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].selectedCampaigns = campaigns;\r\n    },\r\n    toggleEditingGroup: (state, action: PayloadAction<{ accountId: string; groupId: string | null }>) => {\r\n      const { accountId, groupId } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].editingGroupId = groupId;\r\n    },\r\n    toggleGroupExpansion: (state, action: PayloadAction<{ accountId: string; groupId: string }>) => {\r\n      const { accountId, groupId } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      const expandedGroups = state.accounts[accountId].expandedGroups;\r\n      if (expandedGroups.includes(groupId)) {\r\n        state.accounts[accountId].expandedGroups = expandedGroups.filter(id => id !== groupId);\r\n      } else {\r\n        state.accounts[accountId].expandedGroups.push(groupId);\r\n      }\r\n    },\r\n    setIsCreatingGroup: (state, action: PayloadAction<{ accountId: string; isCreating: boolean }>) => {\r\n      const { accountId, isCreating } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].isCreatingGroup = isCreating;\r\n      if (!isCreating) {\r\n        state.accounts[accountId].selectedCampaigns = [];\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const {\r\n  createGroup,\r\n  deleteGroup,\r\n  addCampaignToGroup,\r\n  removeCampaignFromGroup,\r\n  setSelectedCampaigns,\r\n  toggleEditingGroup,\r\n  toggleGroupExpansion,\r\n  setIsCreatingGroup\r\n} = campaignGroupsSlice.actions;\r\n\r\nexport default campaignGroupsSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface CampaignLabelsState {\r\n  labels: {\r\n    [accountId: string]: {\r\n      [campaignId: string]: string[];\r\n    }\r\n  };\r\n  isAddingLabel: boolean;\r\n}\r\n\r\nconst initialState: CampaignLabelsState = {\r\n  labels: {},\r\n  isAddingLabel: false,\r\n};\r\n\r\nconst campaignLabelsSlice = createSlice({\r\n  name: 'campaignLabels',\r\n  initialState,\r\n  reducers: {\r\n    addLabelToCampaign: (\r\n      state, \r\n      action: PayloadAction<{ accountId: string; campaignId: string; label: string }>\r\n    ) => {\r\n      const { accountId, campaignId, label } = action.payload;\r\n      \r\n      // Initialize account if it doesn't exist\r\n      if (!state.labels[accountId]) {\r\n        state.labels[accountId] = {};\r\n      }\r\n      \r\n      // Initialize campaign if it doesn't exist\r\n      if (!state.labels[accountId][campaignId]) {\r\n        state.labels[accountId][campaignId] = [];\r\n      }\r\n      \r\n      // Add label if it doesn't already exist\r\n      if (!state.labels[accountId][campaignId].includes(label)) {\r\n        state.labels[accountId][campaignId].push(label);\r\n      }\r\n    },\r\n    \r\n    removeLabelFromCampaign: (\r\n      state, \r\n      action: PayloadAction<{ accountId: string; campaignId: string; label: string }>\r\n    ) => {\r\n      const { accountId, campaignId, label } = action.payload;\r\n      \r\n      if (state.labels[accountId] && state.labels[accountId][campaignId]) {\r\n        state.labels[accountId][campaignId] = state.labels[accountId][campaignId]\r\n          .filter(l => l !== label);\r\n      }\r\n    },\r\n    \r\n    toggleAddingLabel: (state, action: PayloadAction<boolean>) => {\r\n      state.isAddingLabel = action.payload;\r\n    },\r\n    \r\n    // Optional: Add utility actions for account-level operations\r\n    clearAccountLabels: (state, action: PayloadAction<string>) => {\r\n      const accountId = action.payload;\r\n      if (state.labels[accountId]) {\r\n        state.labels[accountId] = {};\r\n      }\r\n    },\r\n    deleteLabel: (state, action: PayloadAction<{ accountId: string; label: string }>) => {\r\n      const { accountId, label } = action.payload;\r\n      \r\n      if (state.labels[accountId]) {\r\n        Object.keys(state.labels[accountId]).forEach((campaignId) => {\r\n          state.labels[accountId][campaignId] = state.labels[accountId][campaignId].filter(\r\n            (l) => l !== label\r\n          );\r\n          \r\n          // If the campaign has no more labels after deletion, remove it from the object\r\n          if (state.labels[accountId][campaignId].length === 0) {\r\n            delete state.labels[accountId][campaignId];\r\n          }\r\n        });\r\n    \r\n        // If the account has no more campaigns with labels, remove the account entry\r\n        if (Object.keys(state.labels[accountId]).length === 0) {\r\n          delete state.labels[accountId];\r\n        }\r\n      }\r\n    }\r\n,    \r\n    \r\n    // Optional: Copy labels between campaigns in the same account\r\n    copyLabels: (\r\n      state,\r\n      action: PayloadAction<{ \r\n        accountId: string; \r\n        sourceCampaignId: string; \r\n        targetCampaignId: string \r\n      }>\r\n    ) => {\r\n      const { accountId, sourceCampaignId, targetCampaignId } = action.payload;\r\n      \r\n      if (state.labels[accountId] && \r\n          state.labels[accountId][sourceCampaignId]) {\r\n        \r\n        if (!state.labels[accountId][targetCampaignId]) {\r\n          state.labels[accountId][targetCampaignId] = [];\r\n        }\r\n        \r\n        // Copy labels from source to target (avoiding duplicates)\r\n        state.labels[accountId][sourceCampaignId].forEach(label => {\r\n          if (!state.labels[accountId][targetCampaignId].includes(label)) {\r\n            state.labels[accountId][targetCampaignId].push(label);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const { \r\n  addLabelToCampaign, \r\n  removeLabelFromCampaign, \r\n  toggleAddingLabel,\r\n  clearAccountLabels,\r\n  copyLabels,deleteLabel\r\n} = campaignLabelsSlice.actions;\r\n\r\nexport default campaignLabelsSlice.reducer;","import { configureStore, combineReducers } from \"@reduxjs/toolkit\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport conversionFiltersReducer from \"./slices/ConversionFilterSlice\";\r\nimport brandReducer from \"./slices/BrandSlice.ts\"\r\nimport userReducer from \"./slices/UserSlice.ts\"\r\nimport dateReducer from \"./slices/DateSlice.ts\"\r\nimport campaignGroupsReducer from './slices/CampaignGroupSlice.ts';\r\nimport campaignLabelsReducer from './slices/campaignLabelsSlice.ts';\r\nimport tutorialsReducer from \"./slices/TutorialSlice.ts\"\r\n\r\n// Combine all reducers\r\nconst rootReducer = combineReducers({\r\n  conversionFilters: conversionFiltersReducer,\r\n  brand: brandReducer, \r\n  user: userReducer, \r\n  date: dateReducer,\r\n  campaignGroups: campaignGroupsReducer,\r\n  campaignLabels: campaignLabelsReducer,\r\n  tutorials: tutorialsReducer\r\n});\r\n\r\n// Persist config - specify which slices to persist\r\nconst persistConfig = {\r\n  key: \"root\",\r\n  storage,\r\n  whitelist: [\"conversionFilters\", \"brand\", \"user\", \"date\" , \"campaignGroups\", \"campaignLabels\", \"tutorials\"], // Persist both conversionFilters & brand\r\n};\r\n\r\n// Apply persistReducer to the rootReducer\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\n// Configure Redux store\r\nexport const store = configureStore({\r\n  reducer: persistedReducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        // Explicitly ignore Redux Persist actions to avoid warnings\r\n        ignoredActions: [\"persist/PERSIST\", \"persist/REHYDRATE\", \"persist/REGISTER\"],\r\n      },\r\n    }),\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n\r\n// Define types for Redux state & dispatch\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport { format } from \"date-fns\"\r\nimport { Blend} from \"lucide-react\"\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from \"axios\"\r\nimport AdAccountMetricsCard from '@/pages/AnalyticsDashboard/AdAccountsMetricsCard';\r\nimport { AdAccountData } from '@/pages/Dashboard/interfaces.ts'\r\nimport Header from '@/components/dashboard_component/Header.tsx';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store/index.ts';\r\nimport CollapsibleSidebar from '@/pages/Dashboard/CollapsibleSidebar';\r\nimport { FaMeta } from 'react-icons/fa6';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\n\r\n\r\n\r\nexport default function MetaDashboard() {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [fbAdAccountsMetrics, setFbAdAccountsMetrics] = useState<AdAccountData[]>([]);\r\n    const [locale, setLocale] = useState<\"en-IN\" | \"en-US\">(\"en-IN\");\r\n    const [rawMetrics, setRawMetrics] = useState({\r\n        totalSpent: 0,\r\n        totalRevenue: 0,\r\n        totalROAS: 0,\r\n        totalPurchases: 0,\r\n        totalCTR: 0,\r\n        totalCPC: 0,\r\n        totalCPM: 0,\r\n        totalCPP: 0,\r\n    });\r\n    const { brandId } = useParams();\r\n    const navigate = useNavigate();\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n\r\n\r\n    const user = useSelector((state: RootState) => state.user.user);\r\n\r\n    const userId = user?.id;\r\n\r\n\r\n    const fetchAdData = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const baseURL =\r\n                import.meta.env.PROD\r\n                    ? import.meta.env.VITE_API_URL\r\n                    : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n            const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n            const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n            const fbAdResponse = await axios.post(\r\n                `${baseURL}/api/metrics/fbAd/${brandId}`,\r\n                { startDate, endDate, userId },\r\n                { withCredentials: true }\r\n            );\r\n            const fbData = fbAdResponse.data.data;\r\n            setFbAdAccountsMetrics(fbData);\r\n            calculateAggregatedMetrics(fbData);\r\n\r\n        } catch (error) {\r\n            console.error('Error fetching ad data:', error);\r\n            if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n                alert('Your session has expired. Please log in again.');\r\n                navigate('/');\r\n            }\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [navigate, date, brandId, userId]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        fetchAdData();\r\n    }, [fetchAdData]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        fetchAdData();\r\n\r\n        const intervalId = setInterval(fetchAdData, 5 * 60 * 1000);\r\n\r\n\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchAdData]);\r\n\r\n\r\n    const calculateAggregatedMetrics = useCallback((fbData: AdAccountData[]) => {\r\n        let totalSpent = 0;\r\n        let totalRevenue = 0;\r\n        let totalPurchases = 0;\r\n        let totalClicks = 0;\r\n        let totalImpressions = 0;\r\n\r\n        if (fbData?.length) {\r\n            fbData.forEach(account => {\r\n                totalSpent += parseFloat(account.spend || '0');\r\n                totalRevenue += parseFloat(account.Revenue?.value || '0');\r\n                totalPurchases += parseFloat(account.purchases?.value || '0');\r\n                totalClicks += parseFloat(account.clicks || '0');\r\n                totalImpressions += parseFloat(account.impressions || '0');\r\n            });\r\n        }\r\n\r\n        setRawMetrics({\r\n            totalSpent,\r\n            totalRevenue,\r\n            totalROAS: totalRevenue / totalSpent || 0,\r\n            totalPurchases,\r\n            totalCTR: (totalClicks / totalImpressions) * 100 || 0,\r\n            totalCPC: totalSpent / totalClicks || 0,\r\n            totalCPM: (totalSpent * 1000) / totalImpressions || 0,\r\n            totalCPP: totalPurchases > 0 ? (totalSpent / totalPurchases) : 0,\r\n        });\r\n    }, []);\r\n\r\n\r\n    const formattedMetrics = useMemo(() => {\r\n        return {\r\n            totalSpent: `₹ ${rawMetrics.totalSpent.toLocaleString(locale)}`,\r\n            totalRevenue: `₹ ${rawMetrics.totalRevenue.toLocaleString(locale)}`,\r\n            totalROAS: Number((rawMetrics.totalROAS).toFixed(2)).toLocaleString(locale),\r\n            totalPurchases: rawMetrics.totalPurchases.toLocaleString(locale),\r\n            totalCTR: `${Number((rawMetrics.totalCTR).toFixed(2)).toLocaleString(locale)} %`,\r\n            totalCPC: Number((rawMetrics.totalCPC).toFixed(2)).toLocaleString(locale),\r\n            totalCPM: Number((rawMetrics.totalCPM).toFixed(2)).toLocaleString(locale),\r\n            totalCPP: Number((rawMetrics.totalCPP).toFixed(2)).toLocaleString(locale),\r\n        };\r\n    }, [rawMetrics, locale]);\r\n\r\n\r\n    // Use formattedMetrics for rendering\r\n    const metrics = [\r\n        {\r\n            label: 'Amount Spent',\r\n            value: formattedMetrics.totalSpent,\r\n            tooltipContent: 'The sum of ad spends for all advertising platforms',\r\n        },\r\n        {\r\n            label: 'Revenue',\r\n            value: formattedMetrics.totalRevenue,\r\n            tooltipContent: 'Revenue from Ads Purchases',\r\n        },\r\n        {\r\n            label: 'ROAS (Ads only)',\r\n            value: formattedMetrics.totalROAS,\r\n            tooltipContent: 'Blended ROAS = Ads Purchases value / Blended Ad Spend',\r\n        },\r\n        {\r\n            label: 'Ads Purchases',\r\n            value: formattedMetrics.totalPurchases,\r\n            tooltipContent: 'Ads Purchases = Fb Ads Purchase + Google Conversions',\r\n        },\r\n        {\r\n            label: 'CTR',\r\n            value: formattedMetrics.totalCTR,\r\n            tooltipContent:\r\n                'Average CTR from all advertising platforms = (Blended Clicks / Blended Impressions)*100',\r\n        },\r\n        {\r\n            label: 'CPC',\r\n            value: formattedMetrics.totalCPC,\r\n            tooltipContent:\r\n                'Average CPC from all advertising platforms = (Blended Ad Spend / Blended Clicks)',\r\n        },\r\n        {\r\n            label: 'CPM',\r\n            value: formattedMetrics.totalCPM,\r\n            tooltipContent:\r\n                'Average CPM from all advertising platforms = (Blended Ad Spend * 1000 / Blended Impressions)',\r\n        },\r\n        {\r\n            label: 'CPP',\r\n            value: formattedMetrics.totalCPP,\r\n            tooltipContent:\r\n                'Average CPP from all advertising platforms = (Blended Ad Spend / Blended Purchases)',\r\n        },\r\n    ];\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"flex h-screen\"> \r\n            <CollapsibleSidebar />\r\n            <div className=\"flex-1 h-screen overflow-auto\">\r\n                <div className=\"min-h-screen bg-gray-100\">\r\n                    <Header\r\n                        title=\"Adaccount summary\"\r\n                        Icon={FaMeta}\r\n                        showDatePicker={true}\r\n                        showSettings={true}\r\n                        showRefresh={true}\r\n                        isLoading={false}\r\n                        handleManualRefresh={() => {\r\n                            fetchAdData();\r\n                        }}\r\n                        locale={locale}\r\n                        setLocale={setLocale} />\r\n\r\n\r\n                    {/* Main content */}\r\n                    <main className=\"p-4 md:p-6 lg:px-8\">\r\n                        <div className=\"space-y-2\">\r\n                            {/* Blended summary */}\r\n                            <section>\r\n                                <h2 className=\"text-xl font-semibold flex flex-row items-center justify-between\">\r\n                                    <div className='flex flex-row items-center space-x-2'>\r\n                                        <Blend className=\"h-5 w-5\" />\r\n                                        <span>Blended summary</span>\r\n\r\n                                        <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                                            <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n                                        </svg>\r\n\r\n                                    </div>\r\n\r\n\r\n\r\n                                </h2>\r\n                                <AdAccountMetricsCard\r\n                                    metrics={metrics}\r\n                                    date={{\r\n                                        from: date.from ? new Date(date.from) : undefined,\r\n                                        to: date.to ? new Date(date.to) : undefined\r\n                                    }}\r\n                                    isLoading={isLoading}\r\n                                    icon={'Facebook'}\r\n                                />\r\n                            </section>\r\n                        </div>\r\n\r\n\r\n                        {fbAdAccountsMetrics?.length > 0 && fbAdAccountsMetrics.map((accountMetrics, index) => {\r\n                            const fbmetrics = [\r\n                                { label: 'Amount Spent', value: `₹ ${parseFloat(accountMetrics.spend || '0').toLocaleString(locale)}` },\r\n                                {\r\n                                    label: 'Revenue',\r\n                                    value: `₹ ${parseFloat(accountMetrics.Revenue?.value || '0').toLocaleString(locale)}`\r\n                                },\r\n                                {\r\n                                    label: 'ROAS (Ads only)',\r\n                                    value: accountMetrics.purchase_roas && accountMetrics.purchase_roas.length > 0\r\n                                        ? parseFloat(accountMetrics.purchase_roas[0].value).toFixed(2)\r\n                                        : '0'\r\n                                },\r\n                                { label: 'Ads Purchases', value: accountMetrics.purchases?.value || '0' },\r\n                                { label: 'CPC (All clicks)', value: `₹ ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpc || '0'))}` },\r\n                                { label: 'CPM', value: `₹ ${new Intl.NumberFormat(locale, { minimumFractionDigits: 2 }).format(parseFloat(accountMetrics.cpm || '0'))}` },\r\n                                { label: 'CTR', value: `${parseFloat(accountMetrics.ctr || '0').toFixed(2)} %` },\r\n                                { label: 'Cost per Purchase (All)', value: `₹ ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpp || '0'))}` },\r\n                            ];\r\n\r\n                            return (\r\n                                <>\r\n                                    <AdAccountMetricsCard\r\n                                        key={index}\r\n                                        icon=\"Facebook\"\r\n                                        title={`Facebook - ${accountMetrics.account_name}`}\r\n                                        metrics={fbmetrics}  // Pass fbmetrics for the current account\r\n                                        date={{\r\n                                            from: date.from ? new Date(date.from) : undefined,\r\n                                            to: date.to ? new Date(date.to) : undefined\r\n                                        }}\r\n                                        isLoading={isLoading}\r\n                                        errorMessage={accountMetrics.message}\r\n                                    />\r\n                                </>\r\n                            );\r\n                        })}\r\n                    </main>\r\n                </div>\r\n                <HelpDeskModal />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import React, { useState, useEffect, useRef, useMemo } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport {\r\n  X,\r\n  ChevronDown,\r\n  Maximize,\r\n  Minimize,\r\n  ChevronRight,\r\n  Tag,\r\n  Filter,\r\n  FolderOpen,\r\n  Search,\r\n  Plus,\r\n  Info,\r\n  LayoutGrid,\r\n  SlidersHorizontal,\r\n  FileText,\r\n} from \"lucide-react\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport type { RootState } from \"@/store\"\r\nimport { addLabelToCampaign, removeLabelFromCampaign, toggleAddingLabel } from \"@/store/slices/campaignLabelsSlice\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\r\nimport ColumnManagementSheet from \"./ColumnManagementSheet\"\r\n\r\n// Enhanced label colors with better contrast and visual hierarchy\r\nconst LABEL_COLORS = [\r\n  \"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200\",\r\n  \"bg-blue-100 text-blue-800 border border-blue-200 hover:bg-blue-200\",\r\n  \"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200\",\r\n  \"bg-yellow-100 text-yellow-800 border border-yellow-200 hover:bg-yellow-200\",\r\n  \"bg-purple-100 text-purple-800 border border-purple-200 hover:bg-purple-200\",\r\n  \"bg-pink-100 text-pink-800 border border-pink-200 hover:bg-pink-200\",\r\n  \"bg-indigo-100 text-indigo-800 border border-indigo-200 hover:bg-indigo-200\",\r\n  \"bg-orange-100 text-orange-800 border border-orange-200 hover:bg-orange-200\",\r\n]\r\n\r\n// Using a single fixed width for all columns except Campaign and Labels\r\nconst DEFAULT_COLUMN_WIDTH = \"85px\"\r\n\r\ninterface Campaign {\r\n  Campaign: string\r\n  [key: string]: string | number\r\n}\r\n\r\ninterface MetaCampaignTableProps {\r\n  data: {\r\n    account_name: string\r\n    account_id: string\r\n    campaigns: Campaign[]\r\n  }\r\n  height: string\r\n}\r\n\r\n// New interface for grouped campaigns\r\ninterface GroupedCampaign {\r\n  label: string\r\n  campaigns: Campaign[]\r\n  isExpanded: boolean\r\n}\r\n\r\nconst MetaCampaignTable: React.FC<MetaCampaignTableProps> = ({ data, height }) => {\r\n  const dispatch = useDispatch()\r\n  const [newLabel, setNewLabel] = useState(\"\")\r\n  const [selectedCampaigns, setSelectedCampaigns] = useState<string[]>([])\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false)\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const [draggedCampaign, setDraggedCampaign] = useState<string | null>(null)\r\n  const [dragOverCampaign, setDragOverCampaign] = useState<string | null>(null)\r\n  const [isFullScreen, setIsFullScreen] = useState(false)\r\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null)\r\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null)\r\n\r\n  const [visibleColumns, setVisibleColumns] = useState<string[]>([])\r\n  const [columnOrder, setColumnOrder] = useState<string[]>([])\r\n  const [frozenColumns, setFrozenColumns] = useState<string[]>([\"Campaign\"])\r\n\r\n  const [isGroupingEnabled, setIsGroupingEnabled] = useState(true)\r\n  const [groupedCampaigns, setGroupedCampaigns] = useState<GroupedCampaign[]>([])\r\n  const [ungroupedCampaigns, setUngroupedCampaigns] = useState<Campaign[]>([])\r\n\r\n  const tableRef = useRef<HTMLDivElement>(null)\r\n  const columnRefs = useRef<{ [key: string]: HTMLTableCellElement | null }>({})\r\n\r\n  const { labels, isAddingLabel } = useSelector((state: RootState) => state.campaignLabels)\r\n\r\n  const accountLabels = useMemo(() => {\r\n    return labels[data.account_id] || {}\r\n  }, [labels, data.account_id])\r\n\r\n  const hasAnyLabels = useMemo(() => {\r\n    return Object.values(accountLabels).some((labelArray) => labelArray && labelArray.length > 0)\r\n  }, [accountLabels])\r\n\r\n  // Initialize column state\r\n  useEffect(() => {\r\n    if (data.campaigns.length > 0) {\r\n      const columns = Object.keys(data.campaigns[0])\r\n      const initialColumns = columns.filter((col) => col !== \"Labels\")\r\n\r\n      const shouldShowLabelsColumn = hasAnyLabels || isAddingLabel\r\n      const initialVisibleColumns = shouldShowLabelsColumn ? [...initialColumns, \"Labels\"] : initialColumns\r\n\r\n      setVisibleColumns(initialVisibleColumns)\r\n\r\n      // Create column order with Campaign first, then Labels (if visible), then others\r\n      const baseColumns = [...initialColumns].filter((col) => col !== \"Campaign\")\r\n      const orderedColumns = [\"Campaign\"]\r\n\r\n      if (shouldShowLabelsColumn) {\r\n        orderedColumns.push(\"Labels\")\r\n      }\r\n\r\n      orderedColumns.push(...baseColumns)\r\n      setColumnOrder(orderedColumns)\r\n    }\r\n  }, [data.campaigns, hasAnyLabels, isAddingLabel])\r\n\r\n  // Group campaigns by labels\r\n  useEffect(() => {\r\n    if (isGroupingEnabled && hasAnyLabels) {\r\n      // Get all unique labels across all campaigns\r\n      const allLabels = new Set<string>()\r\n\r\n      Object.entries(accountLabels).forEach(([, labelArray]) => {\r\n        labelArray?.forEach((label) => {\r\n          allLabels.add(label)\r\n        })\r\n      })\r\n\r\n      // Create a map to group campaigns by label\r\n      const labelMap: { [key: string]: Campaign[] } = {}\r\n\r\n      // Initialize each label with an empty array\r\n      Array.from(allLabels).forEach((label) => {\r\n        labelMap[label] = []\r\n      })\r\n\r\n      // Group campaigns by labels\r\n      const unGrouped: Campaign[] = []\r\n\r\n      data.campaigns.forEach((campaign) => {\r\n        const campaignLabels = accountLabels[campaign.Campaign] || []\r\n\r\n        if (campaignLabels.length > 0) {\r\n          // Add campaign to each of its label groups\r\n          campaignLabels.forEach((label) => {\r\n            labelMap[label].push(campaign)\r\n          })\r\n        } else {\r\n          // Add to ungrouped\r\n          unGrouped.push(campaign)\r\n        }\r\n      })\r\n\r\n      // Convert to array format with expanded state\r\n      const grouped = Object.entries(labelMap).map(([label, campaigns]) => ({\r\n        label,\r\n        campaigns,\r\n        isExpanded: true,\r\n      }))\r\n      setGroupedCampaigns(grouped)\r\n      setUngroupedCampaigns(unGrouped)\r\n    } else {\r\n      setGroupedCampaigns([])\r\n      setUngroupedCampaigns(data.campaigns)\r\n    }\r\n  }, [data.campaigns, accountLabels, isGroupingEnabled, hasAnyLabels])\r\n\r\n  const labelColorMap = React.useMemo(() => {\r\n    const map = new Map<string, string>()\r\n    let colorIndex = 0\r\n\r\n    const allLabels = new Set<string>()\r\n    Object.values(accountLabels).forEach((labelArray) => {\r\n      labelArray?.forEach((label) => allLabels.add(label))\r\n    })\r\n\r\n    Array.from(allLabels).forEach((label) => {\r\n      map.set(label, LABEL_COLORS[colorIndex % LABEL_COLORS.length])\r\n      colorIndex++\r\n    })\r\n\r\n    return map\r\n  }, [accountLabels])\r\n\r\n  // Calculate left position for frozen columns\r\n  const getLeftPosition = (columnIndex: number): number => {\r\n    let position = 0\r\n\r\n    // Get only the visible columns in the correct order\r\n    const visibleOrderedColumns = columnOrder.filter((col) => visibleColumns.includes(col))\r\n\r\n    for (let i = 0; i < columnIndex; i++) {\r\n      const column = visibleOrderedColumns[i]\r\n      if (frozenColumns.includes(column)) {\r\n        const columnElement = columnRefs.current[column]\r\n        if (columnElement) {\r\n          position += columnElement.offsetWidth\r\n        }\r\n      }\r\n    }\r\n\r\n    return position\r\n  }\r\n\r\n  const handleAddLabel = () => {\r\n    if (newLabel && selectedCampaigns.length > 0) {\r\n      selectedCampaigns.forEach((campaignId) => {\r\n        dispatch(\r\n          addLabelToCampaign({\r\n            accountId: data.account_id,\r\n            campaignId,\r\n            label: newLabel,\r\n          }),\r\n        )\r\n      })\r\n      setNewLabel(\"\")\r\n      setSelectedCampaigns([])\r\n      dispatch(toggleAddingLabel(false))\r\n\r\n      // Ensure Labels column is visible after adding a label\r\n      if (!visibleColumns.includes(\"Labels\")) {\r\n        setVisibleColumns([...visibleColumns, \"Labels\"])\r\n\r\n        // Also add Labels to column order if it's not there\r\n        if (!columnOrder.includes(\"Labels\")) {\r\n          const campaignIndex = columnOrder.indexOf(\"Campaign\")\r\n          const newOrder = [...columnOrder]\r\n          newOrder.splice(campaignIndex + 1, 0, \"Labels\")\r\n          setColumnOrder(newOrder)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleRemoveLabel = (campaignId: string, label: string) => {\r\n    dispatch(\r\n      removeLabelFromCampaign({\r\n        accountId: data.account_id,\r\n        campaignId,\r\n        label,\r\n      }),\r\n    )\r\n  }\r\n\r\n  const filteredCampaigns = data.campaigns.filter((campaign) =>\r\n    campaign.Campaign.toString().toLowerCase().includes(searchTerm.toLowerCase()),\r\n  )\r\n\r\n  // Get column style based on column name\r\n  const getColumnStyle = (column: string) => {\r\n    if (column === \"Campaign\") {\r\n      return { width: \"auto\", minWidth: \"200px\" }\r\n    }\r\n    if (column === \"Labels\") {\r\n      return { width: \"auto\", minWidth: \"120px\" }\r\n    }\r\n\r\n    // All other columns get the fixed width\r\n    return {\r\n      width: DEFAULT_COLUMN_WIDTH,\r\n      minWidth: DEFAULT_COLUMN_WIDTH,\r\n    }\r\n  }\r\n\r\n  // Campaign drag and drop handlers\r\n  const handleDragStart = (campaignId: string) => {\r\n    setDraggedCampaign(campaignId)\r\n  }\r\n\r\n  const handleDragOver = (e: React.DragEvent, campaignId: string) => {\r\n    e.preventDefault()\r\n    if (campaignId !== draggedCampaign) {\r\n      setDragOverCampaign(campaignId)\r\n    }\r\n  }\r\n\r\n  const handleDrop = (targetCampaignId: string) => {\r\n    if (!draggedCampaign || draggedCampaign === targetCampaignId) return\r\n\r\n    // Reorder campaigns logic would go here\r\n    // For now, just reset the state\r\n    setDraggedCampaign(null)\r\n    setDragOverCampaign(null)\r\n\r\n    // Note: In a real implementation, you would dispatch an action to update the order in your Redux store\r\n    console.log(`Dragged ${draggedCampaign} and dropped on ${targetCampaignId}`)\r\n  }\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedCampaign(null)\r\n    setDragOverCampaign(null)\r\n  }\r\n\r\n  // Column drag and drop handlers\r\n  const handleColumnDragStart = (columnName: string) => {\r\n    setDraggedColumn(columnName)\r\n  }\r\n\r\n  const handleColumnDragOver = (e: React.DragEvent, columnName: string) => {\r\n    e.preventDefault()\r\n    if (columnName !== draggedColumn) {\r\n      setDragOverColumn(columnName)\r\n    }\r\n  }\r\n\r\n  const handleColumnDrop = (targetColumnName: string) => {\r\n    if (!draggedColumn || draggedColumn === targetColumnName) return\r\n\r\n    // Reorder columns\r\n    const draggedIndex = columnOrder.indexOf(draggedColumn)\r\n    const targetIndex = columnOrder.indexOf(targetColumnName)\r\n\r\n    if (draggedIndex !== -1 && targetIndex !== -1) {\r\n      const newColumnOrder = [...columnOrder]\r\n      newColumnOrder.splice(draggedIndex, 1)\r\n      newColumnOrder.splice(targetIndex, 0, draggedColumn)\r\n      setColumnOrder(newColumnOrder)\r\n    }\r\n\r\n    setDraggedColumn(null)\r\n    setDragOverColumn(null)\r\n  }\r\n\r\n  const handleColumnDragEnd = () => {\r\n    setDraggedColumn(null)\r\n    setDragOverColumn(null)\r\n  }\r\n\r\n  // Toggle full screen mode\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen)\r\n  }\r\n\r\n  // Toggle group expansion\r\n  const toggleGroupExpansion = (labelIndex: number) => {\r\n    const updatedGroups = [...groupedCampaigns]\r\n    updatedGroups[labelIndex].isExpanded = !updatedGroups[labelIndex].isExpanded\r\n    setGroupedCampaigns(updatedGroups)\r\n  }\r\n\r\n  // Calculate summary values for a group\r\n  const calculateGroupSummary = (campaigns: Campaign[]) => {\r\n    const summary: { [key: string]: number | string } = {}\r\n\r\n    // Get columns that should be visible in the summary\r\n    const summaryColumns = columnOrder.filter(\r\n      (col) => visibleColumns.includes(col) && col !== \"Campaign\" && col !== \"Labels\",\r\n    )\r\n\r\n    // Define different calculation methods for specific columns\r\n    const calculationMethods: { [key: string]: (values: number[], campaigns: Campaign[]) => number } = {\r\n      \"Conversion Rate\": (_, campaigns) => {\r\n        const totalLinkClicks = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Link Click\"] || 0), 0)\r\n        const totalPurchases = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Purchases\"] || 0), 0)\r\n        if (totalLinkClicks === 0) return 0\r\n\r\n        const conversionRate = (totalPurchases / totalLinkClicks) * 100\r\n        return conversionRate\r\n      },\r\n      \"CPM (Reach Based)\": (_, campaigns) => {\r\n        const totalreach = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Reach\"] || 0), 0)\r\n        const totalSpend = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Amount spend\"] || 0), 0)\r\n\r\n        const cpmReachBased = totalSpend / (totalreach / 1000)\r\n        return cpmReachBased\r\n      },\r\n      \"Audience Saturation Score\": (_, campaigns) => {\r\n        const totaloutboundctr = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Outbound CTR\"] || 0), 0)\r\n        const totalFrequency = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Frequency\"] || 0), 0)\r\n        if (totaloutboundctr === 0) return 0\r\n\r\n        const audienceScore = (totalFrequency / totaloutboundctr) * 100\r\n        return audienceScore\r\n      },\r\n      \"Reach v/s Unique Click\": (_, campaigns) => {\r\n        const totalUniqueClicks = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Unique Link Click\"] || 0),\r\n          0,\r\n        )\r\n        const totalreach = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Reach\"] || 0), 0)\r\n        if (totalUniqueClicks === 0) return 0\r\n\r\n        const reachVsUniqueClick = totalreach / totalUniqueClicks\r\n        return reachVsUniqueClick\r\n      },\r\n      \"High-Intent Click Rate\": (_, campaigns) => {\r\n        const totalAddToCart = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Add To Cart (ATC)\"] || 0), 0)\r\n        const totalCheckoutInitiated = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Checkout Initiate (CI)\"] || 0),\r\n          0,\r\n        )\r\n        const totalLandingPageView = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Landing Page View\"] || 0),\r\n          0,\r\n        )\r\n        const totalLinkClicks = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Link Click\"] || 0), 0)\r\n        if (totalLinkClicks === 0) return 0\r\n\r\n        const highIntentClickRate =\r\n          ((totalAddToCart + totalCheckoutInitiated + totalLandingPageView) / totalLinkClicks) * 100\r\n        return highIntentClickRate\r\n      },\r\n      HookRate: (_, campaigns) => {\r\n        const threeSecondsView = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Three Seconds View\"] || 0),\r\n          0,\r\n        )\r\n        const totalimpressions = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Impressions\"] || 0), 0)\r\n        if (totalimpressions === 0) return 0\r\n\r\n        const hookrate = (threeSecondsView / totalimpressions) * 100\r\n        return hookrate\r\n      },\r\n      DEFAULT: (values, _) => values.reduce((sum, val) => sum + val, 0),\r\n    }\r\n\r\n    // Then modify how you call these methods:\r\n    summaryColumns.forEach((column) => {\r\n      const values = campaigns.map((campaign) => Number(campaign[column] || 0)).filter((value) => !isNaN(value))\r\n\r\n      const calculateMethod = calculationMethods[column] || calculationMethods[\"DEFAULT\"]\r\n      summary[column] = calculateMethod(values, campaigns).toFixed(2)\r\n    })\r\n\r\n    return summary\r\n  }\r\n\r\n  const getTableHeight = () => {\r\n    if (isFullScreen) {\r\n      return \"max-h-[calc(100vh-100px)]\"\r\n    }\r\n    return height\r\n  }\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <Card className={`overflow-hidden ${isFullScreen ? \"fixed inset-0 z-50\" : \"\"} border-slate-200 shadow-md`}>\r\n        <div className=\"flex items-center justify-between p-3 border-b bg-gradient-to-r from-slate-50 to-white\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <FileText className=\"h-5 w-5 text-slate-500\" />\r\n            <div className=\"text-lg font-semibold text-slate-800\">{data.account_name}</div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setIsGroupingEnabled(!isGroupingEnabled)}\r\n                  size=\"sm\"\r\n                  className=\"gap-1 font-medium\"\r\n                >\r\n                  {isGroupingEnabled ? (\r\n                    <>\r\n                      <LayoutGrid className=\"h-4 w-4 text-blue-600\" />\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <LayoutGrid className=\"h-4 w-4 text-slate-500\" />\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </TooltipTrigger>\r\n              <TooltipContent>{isGroupingEnabled ? \"Disable Grouping\" : \"Enable Grouping\"}</TooltipContent>\r\n            </Tooltip>\r\n\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => dispatch(toggleAddingLabel(!isAddingLabel))}\r\n                  size=\"sm\"\r\n                  className=\"gap-1 font-medium\"\r\n                >\r\n                  {isAddingLabel ? (\r\n                    <>\r\n                      <X className=\"h-4 w-4 text-red-500\" />\r\n                      <span className=\"hidden sm:inline\">Cancel</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Tag className=\"h-4 w-4 text-slate-500\" />\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </TooltipTrigger>\r\n              <TooltipContent>{isAddingLabel ? \"Cancel Adding Label\" : \"Add Label\"}</TooltipContent>\r\n            </Tooltip>\r\n\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={toggleFullScreen} className=\"font-medium\">\r\n                  {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                </Button>\r\n              </TooltipTrigger>\r\n              <TooltipContent>{isFullScreen ? \"Exit Fullscreen\" : \"Enter Fullscreen\"}</TooltipContent>\r\n            </Tooltip>\r\n\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <div>\r\n                  <ColumnManagementSheet\r\n                    visibleColumns={visibleColumns}\r\n                    columnOrder={columnOrder}\r\n                    frozenColumns={frozenColumns}\r\n                    onVisibilityChange={setVisibleColumns}\r\n                    onOrderChange={setColumnOrder}\r\n                    onFrozenChange={setFrozenColumns}\r\n                  />\r\n                </div>\r\n              </TooltipTrigger>\r\n              <TooltipContent>Manage Columns</TooltipContent>\r\n            </Tooltip>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-3\">\r\n          {isAddingLabel && (\r\n            <div className=\"mb-4 p-4 bg-white rounded-lg shadow-sm border border-slate-200 space-y-3\">\r\n              <div className=\"flex items-center gap-3 flex-wrap\">\r\n                <div className=\"relative flex-grow max-w-xs\">\r\n                  <Tag className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4\" />\r\n                  <Input\r\n                    value={newLabel}\r\n                    onChange={(e) => setNewLabel(e.target.value)}\r\n                    placeholder=\"Enter label name\"\r\n                    className=\"pl-9\"\r\n                  />\r\n                </div>\r\n                <Popover open={isDropdownOpen} onOpenChange={setIsDropdownOpen}>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className=\"w-[180px] justify-between text-xs gap-1\" size=\"sm\">\r\n                      <FolderOpen className=\"h-3.5 w-3.5 text-slate-500\" />\r\n                      {selectedCampaigns.length === 0 ? \"Select campaigns\" : `${selectedCampaigns.length} selected`}\r\n                      <ChevronDown className=\"h-3 w-3 opacity-50\" />\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-[280px] p-0\">\r\n                    <div className=\"p-2\">\r\n                      <div className=\"relative mb-2\">\r\n                        <Search className=\"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-slate-400\" />\r\n                        <Input\r\n                          placeholder=\"Search campaigns...\"\r\n                          value={searchTerm}\r\n                          onChange={(e) => setSearchTerm(e.target.value)}\r\n                          className=\"pl-8 text-xs\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"max-h-[200px] overflow-y-auto\">\r\n                        {filteredCampaigns.map((campaign) => (\r\n                          <div\r\n                            key={campaign.Campaign}\r\n                            className=\"flex items-center space-x-2 p-1.5 hover:bg-slate-100 rounded\"\r\n                          >\r\n                            <Checkbox\r\n                              checked={selectedCampaigns.includes(campaign.Campaign)}\r\n                              onCheckedChange={(checked) => {\r\n                                setSelectedCampaigns(\r\n                                  checked\r\n                                    ? [...selectedCampaigns, campaign.Campaign]\r\n                                    : selectedCampaigns.filter((id) => id !== campaign.Campaign),\r\n                                )\r\n                              }}\r\n                            />\r\n                            <span className=\"text-xs\">{campaign.Campaign}</span>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </PopoverContent>\r\n                </Popover>\r\n                <Button\r\n                  onClick={handleAddLabel}\r\n                  disabled={!newLabel || selectedCampaigns.length === 0}\r\n                  size=\"sm\"\r\n                  className=\"gap-1\"\r\n                >\r\n                  <Plus className=\"h-3.5 w-3.5\" />\r\n                  Add Label\r\n                </Button>\r\n              </div>\r\n              {selectedCampaigns.length > 0 && (\r\n                <div className=\"flex items-center gap-1 text-xs text-slate-500\">\r\n                  <Info className=\"h-3.5 w-3.5\" />\r\n                  {selectedCampaigns.length} campaign(s) selected\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            ref={tableRef}\r\n            className={`overflow-auto ${getTableHeight()} bg-white rounded-lg border border-slate-200 shadow-sm`}\r\n          >\r\n            <table className=\"w-full border-collapse text-xs relative\">\r\n              <thead className=\"bg-slate-50 sticky top-0 z-20\">\r\n                <tr>\r\n                  {columnOrder\r\n                    .filter((column) => visibleColumns.includes(column))\r\n                    .map((column, index) => {\r\n                      const isFrozen = frozenColumns.includes(column)\r\n                      const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                      const columnStyle = getColumnStyle(column)\r\n\r\n                      return (\r\n                        <th\r\n                          key={column}\r\n                          ref={(el) => (columnRefs.current[column] = el)}\r\n                          className={`text-left p-2 font-medium text-slate-700 border-b border-r ${\r\n                            isFrozen ? \"sticky z-20 bg-slate-50\" : \"\"\r\n                          } ${dragOverColumn === column ? \"bg-blue-50\" : \"\"}`}\r\n                          style={{\r\n                            left: leftPos,\r\n                            ...columnStyle,\r\n                          }}\r\n                          draggable\r\n                          onDragStart={() => handleColumnDragStart(column)}\r\n                          onDragOver={(e) => handleColumnDragOver(e, column)}\r\n                          onDrop={() => handleColumnDrop(column)}\r\n                          onDragEnd={handleColumnDragEnd}\r\n                        >\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <span>{column}</span>\r\n                            <SlidersHorizontal className=\"h-3 w-3 text-slate-400 cursor-grab\" />\r\n                          </div>\r\n                        </th>\r\n                      )\r\n                    })}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {/* Render grouped campaigns */}\r\n                {isGroupingEnabled &&\r\n                  groupedCampaigns.map((group, groupIndex) => (\r\n                    <React.Fragment key={`group-${group.label}`}>\r\n                      {/* Label group header/summary row */}\r\n                      <tr className=\"bg-gradient-to-r from-slate-100 to-slate-50 font-medium hover:bg-slate-100 transition-colors\">\r\n                        {columnOrder\r\n                          .filter((column) => visibleColumns.includes(column))\r\n                          .map((column, index) => {\r\n                            const isFrozen = frozenColumns.includes(column)\r\n                            const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                            const columnStyle = getColumnStyle(column)\r\n                            const summary = calculateGroupSummary(group.campaigns)\r\n\r\n                            if (column === \"Campaign\") {\r\n                              return (\r\n                                <td\r\n                                  key={column}\r\n                                  className={`p-2 border-r sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50`}\r\n                                  style={{\r\n                                    left: leftPos,\r\n                                    ...columnStyle,\r\n                                  }}\r\n                                >\r\n                                  <div className=\"flex items-center\">\r\n                                    <button\r\n                                      onClick={() => toggleGroupExpansion(groupIndex)}\r\n                                      className=\"mr-2 focus:outline-none rounded-full p-0.5 hover:bg-slate-200 transition-colors\"\r\n                                    >\r\n                                      {group.isExpanded ? (\r\n                                        <ChevronDown className=\"h-4 w-4 text-slate-600\" />\r\n                                      ) : (\r\n                                        <ChevronRight className=\"h-4 w-4 text-slate-600\" />\r\n                                      )}\r\n                                    </button>\r\n                                    <span className=\"font-medium text-slate-700\">\r\n                                      Group: {group.campaigns.length} campaigns\r\n                                    </span>\r\n                                  </div>\r\n                                </td>\r\n                              )\r\n                            }\r\n\r\n                            if (column === \"Labels\") {\r\n                              return (\r\n                                <td\r\n                                  key={column}\r\n                                  className={`p-2 border-r ${\r\n                                    isFrozen\r\n                                      ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                      : \"bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                  }`}\r\n                                  style={{\r\n                                    left: leftPos,\r\n                                    ...columnStyle,\r\n                                  }}\r\n                                >\r\n                                  <Badge\r\n                                    className={`${labelColorMap.get(group.label)} w-fit flex items-center gap-1 cursor-default text-xs py-0.5 px-2 rounded-md`}\r\n                                  >\r\n                                    {group.label}\r\n                                  </Badge>\r\n                                </td>\r\n                              )\r\n                            }\r\n\r\n                            return (\r\n                              <td\r\n                                key={column}\r\n                                className={`p-2 border-r ${\r\n                                  isFrozen\r\n                                    ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                    : \"bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                } font-semibold`}\r\n                                style={{\r\n                                  left: leftPos,\r\n                                  ...columnStyle,\r\n                                }}\r\n                              >\r\n                                <div>{summary[column]}</div>\r\n                              </td>\r\n                            )\r\n                          })}\r\n                      </tr>\r\n\r\n                      {/* Individual campaigns in the group */}\r\n                      {group.isExpanded &&\r\n                        group.campaigns.map((campaign) => (\r\n                          <tr\r\n                            key={`${group.label}-${campaign.Campaign}`}\r\n                            className={`border-b hover:bg-slate-50 transition-colors ${\r\n                              dragOverCampaign === campaign.Campaign ? \"bg-blue-50\" : \"\"\r\n                            }`}\r\n                            draggable\r\n                            onDragStart={() => handleDragStart(campaign.Campaign)}\r\n                            onDragOver={(e) => handleDragOver(e, campaign.Campaign)}\r\n                            onDrop={() => handleDrop(campaign.Campaign)}\r\n                            onDragEnd={handleDragEnd}\r\n                          >\r\n                            {columnOrder\r\n                              .filter((column) => visibleColumns.includes(column))\r\n                              .map((column, index) => {\r\n                                const isFrozen = frozenColumns.includes(column)\r\n                                const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                                const columnStyle = getColumnStyle(column)\r\n\r\n                                if (column === \"Campaign\") {\r\n                                  return (\r\n                                    <td\r\n                                      key={column}\r\n                                      className={`p-2 border-r sticky bg-white  z-10 `}\r\n                                      style={{\r\n                                        left: leftPos,\r\n                                        paddingLeft: \"30px\", \r\n                                        ...columnStyle,\r\n                                      }}\r\n                                    >\r\n                                      <div >{campaign.Campaign}</div>\r\n                                    </td>\r\n                                  )\r\n                                }\r\n\r\n                                if (column === \"Labels\") {\r\n                                  return (\r\n                                    <td\r\n                                      key={column}\r\n                                      className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white\" : \"\"}`}\r\n                                      style={{\r\n                                        left: leftPos,\r\n                                        ...columnStyle,\r\n                                      }}\r\n                                    >\r\n                                      <div className=\"flex flex-wrap gap-1\">\r\n                                        {accountLabels[campaign.Campaign]?.map((label: string) => (\r\n                                          <Badge\r\n                                            key={label}\r\n                                            className={`${labelColorMap.get(label)} flex items-center gap-1 cursor-default text-xs py-0 px-1.5 rounded-md`}\r\n                                          >\r\n                                            {label}\r\n                                            <X\r\n                                              className=\"h-2.5 w-2.5 cursor-pointer hover:opacity-75\"\r\n                                              onClick={() => handleRemoveLabel(campaign.Campaign, label)}\r\n                                            />\r\n                                          </Badge>\r\n                                        ))}\r\n                                      </div>\r\n                                    </td>\r\n                                  )\r\n                                }\r\n\r\n                                return (\r\n                                  <td\r\n                                    key={column}\r\n                                    className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white\" : \"\"}`}\r\n                                    style={{\r\n                                      left: leftPos,\r\n                                      ...columnStyle,\r\n                                    }}\r\n                                  >\r\n                                    <div>{campaign[column]}</div>\r\n                                  </td>\r\n                                )\r\n                              })}\r\n                          </tr>\r\n                        ))}\r\n                    </React.Fragment>\r\n                  ))}\r\n\r\n                {/* Ungrouped campaigns section */}\r\n                {isGroupingEnabled && ungroupedCampaigns.length > 0 && (\r\n                  <>\r\n                    <tr className=\"bg-gradient-to-r from-gray-100 to-gray-50 font-medium hover:bg-gray-100 transition-colors\">\r\n                      {columnOrder\r\n                        .filter((column) => visibleColumns.includes(column))\r\n                        .map((column, index) => {\r\n                          const isFrozen = frozenColumns.includes(column)\r\n                          const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                          const columnStyle = getColumnStyle(column)\r\n\r\n                          if (column === \"Campaign\") {\r\n                            return (\r\n                              <td\r\n                                key={column}\r\n                                className={`p-2 border-r sticky z-10 bg-gradient-to-r from-gray-100 to-gray-50`}\r\n                                style={{\r\n                                  left: leftPos,\r\n                                  ...columnStyle,\r\n                                }}\r\n                              >\r\n                                <div className=\"font-medium text-slate-700 flex items-center\">\r\n                                  <Filter className=\"h-4 w-4 mr-2 text-slate-500\" />\r\n                                  Unlabeled: {ungroupedCampaigns.length} campaigns\r\n                                </div>\r\n                              </td>\r\n                            )\r\n                          }\r\n\r\n                          if (column === \"Labels\") {\r\n                            return (\r\n                              <td\r\n                                key={column}\r\n                                className={`p-2 border-r ${\r\n                                  isFrozen\r\n                                    ? \"sticky z-10 bg-gradient-to-r from-gray-100 to-gray-50\"\r\n                                    : \"bg-gradient-to-r from-gray-100 to-gray-50\"\r\n                                }`}\r\n                                style={{\r\n                                  left: leftPos,\r\n                                  ...columnStyle,\r\n                                }}\r\n                              >\r\n                                <span className=\"text-slate-400 italic\">-</span>\r\n                              </td>\r\n                            )\r\n                          }\r\n\r\n                          // Calculate summary for ungrouped campaigns\r\n                          const summary = calculateGroupSummary(ungroupedCampaigns)\r\n\r\n                          return (\r\n                            <td\r\n                              key={column}\r\n                              className={`p-2 border-r ${\r\n                                isFrozen\r\n                                  ? \"sticky z-10 bg-gradient-to-r from-gray-100 to-gray-50\"\r\n                                  : \"bg-gradient-to-r from-gray-100 to-gray-50\"\r\n                              } font-semibold`}\r\n                              style={{\r\n                                left: leftPos,\r\n                                ...columnStyle,\r\n                              }}\r\n                            >\r\n                              <div>{summary[column]}</div>\r\n                            </td>\r\n                          )\r\n                        })}\r\n                    </tr>\r\n                  </>\r\n                )}\r\n\r\n                {/* Render ungrouped campaigns or all campaigns when grouping is disabled */}\r\n                {(isGroupingEnabled ? ungroupedCampaigns : data.campaigns).map((campaign) => (\r\n                  <tr\r\n                    key={campaign.Campaign}\r\n                    className={`border-b hover:bg-slate-50 transition-colors ${\r\n                      dragOverCampaign === campaign.Campaign ? \"bg-blue-50\" : \"\"\r\n                    }`}\r\n                    draggable\r\n                    onDragStart={() => handleDragStart(campaign.Campaign)}\r\n                    onDragOver={(e) => handleDragOver(e, campaign.Campaign)}\r\n                    onDrop={() => handleDrop(campaign.Campaign)}\r\n                    onDragEnd={handleDragEnd}\r\n                  >\r\n                    {columnOrder\r\n                      .filter((column) => visibleColumns.includes(column))\r\n                      .map((column, index) => {\r\n                        const isFrozen = frozenColumns.includes(column)\r\n                        const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                        const columnStyle = getColumnStyle(column)\r\n\r\n                        if (column === \"Campaign\") {\r\n                          return (\r\n                            <td\r\n                              key={column}\r\n                              className={`p-2 border-r sticky z-10`}\r\n                              style={{\r\n                                left: leftPos,\r\n                                backgroundColor: \"white\",\r\n                                ...columnStyle,\r\n                              }}\r\n                            >\r\n                              <div className=\"font-medium text-slate-700\">{campaign.Campaign}</div>\r\n                            </td>\r\n                          )\r\n                        }\r\n\r\n                        if (column === \"Labels\") {\r\n                          return (\r\n                            <td\r\n                              key={column}\r\n                              className={`p-2 border-r ${isFrozen ? \"sticky z-10\" : \"\"}`}\r\n                              style={{\r\n                                left: leftPos,\r\n                                backgroundColor: isFrozen ? \"white\" : undefined,\r\n                                ...columnStyle,\r\n                              }}\r\n                            >\r\n                              <div className=\"flex flex-wrap gap-1\">\r\n                                {accountLabels[campaign.Campaign]?.map((label: string) => (\r\n                                  <Badge\r\n                                    key={label}\r\n                                    className={`${labelColorMap.get(label)} flex items-center gap-1 cursor-default text-xs py-0 px-1.5 rounded-md`}\r\n                                  >\r\n                                    {label}\r\n                                    <X\r\n                                      className=\"h-2.5 w-2.5 cursor-pointer hover:opacity-75\"\r\n                                      onClick={() => handleRemoveLabel(campaign.Campaign, label)}\r\n                                    />\r\n                                  </Badge>\r\n                                ))}\r\n                                {!accountLabels[campaign.Campaign]?.length && (\r\n                                  <span className=\"text-slate-400 italic text-xs\">-</span>\r\n                                )}\r\n                              </div>\r\n                            </td>\r\n                          )\r\n                        }\r\n\r\n                        return (\r\n                          <td\r\n                            key={column}\r\n                            className={`p-2 border-r ${isFrozen ? \"sticky z-10\" : \"\"}`}\r\n                            style={{\r\n                              left: leftPos,\r\n                              backgroundColor: isFrozen ? \"white\" : undefined,\r\n                              ...columnStyle,\r\n                            }}\r\n                          >\r\n                            <div>{campaign[column]}</div>\r\n                          </td>\r\n                        )\r\n                      })}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\nexport default MetaCampaignTable\r\n\r\n","import { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport { format } from \"date-fns\"\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from \"axios\"\r\nimport Header from '@/components/dashboard_component/Header.tsx';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store/index.ts';\r\nimport CollapsibleSidebar from '@/pages/Dashboard/CollapsibleSidebar';\r\nimport { FaMeta } from 'react-icons/fa6';\r\nimport MetaCampaignTable from './MetaCampaignTable';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\n\r\n\r\n\r\nexport interface MetaCampaign {\r\n    Campaign: string;\r\n    [key: string]: string | number;\r\n}\r\n\r\nexport interface AccountData {\r\n    account_name: string;\r\n    account_id: string;\r\n    campaigns: MetaCampaign[];\r\n}\r\n\r\nexport interface MetaCampaignResponse {\r\n    success: boolean;\r\n    data: AccountData[];\r\n}\r\n\r\nexport default function CampaignDashboard() {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [fbCampaignMetrics, setFbCampaignMetrics] = useState<MetaCampaignResponse | null>(null);\r\n    const [locale, setLocale] = useState<\"en-IN\" | \"en-US\">(\"en-IN\");\r\n    const { brandId } = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n\r\n    const user = useSelector((state: RootState) => state.user.user);\r\n    const userId = user?.id;\r\n\r\n    const fetchAdData = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const baseURL = import.meta.env.PROD\r\n                ? import.meta.env.VITE_API_URL\r\n                : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n            const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n            const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n            const fbAdResponse = await axios.post(\r\n                `${baseURL}/api/metrics/fbCampaign/${brandId}`,\r\n                { startDate, endDate, userId },\r\n                { withCredentials: true }\r\n            );\r\n\r\n            setFbCampaignMetrics(fbAdResponse.data);\r\n        } catch (error) {\r\n            console.error('Error fetching ad data:', error);\r\n            if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n                alert('Your session has expired. Please log in again.');\r\n                navigate('/');\r\n            }\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [navigate, date, brandId, userId]);\r\n\r\n    useEffect(() => {\r\n        fetchAdData();\r\n\r\n        const intervalId = setInterval(fetchAdData, 15 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchAdData]);\r\n\r\n    let height = '';\r\n    if (fbCampaignMetrics?.data && fbCampaignMetrics.data.length > 1) {\r\n        height = 'max-h-[calc(100vh-400px)]';\r\n    } else {\r\n        height = 'max-h-[calc(100vh-210px)]'\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex h-screen\">\r\n            <CollapsibleSidebar />\r\n            <div className=\"flex-1 h-screen overflow-auto\">\r\n                <div className=\"min-h-screen bg-gray-100\">\r\n                    <Header\r\n                        title=\"Campaign Report\"\r\n                        Icon={FaMeta}\r\n                        showDatePicker={true}\r\n                        showSettings={true}\r\n                        showRefresh={true}\r\n                        isLoading={isLoading}\r\n                        handleManualRefresh={fetchAdData}\r\n                        locale={locale}\r\n                        setLocale={setLocale}\r\n                    />\r\n\r\n                    <main className=\"p-4 md:p-6 lg:px-8\">\r\n                        {isLoading ? (\r\n                            <div className=\"flex items-center justify-center h-64\">\r\n                                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\r\n                            </div>\r\n                        ) : fbCampaignMetrics?.data && fbCampaignMetrics.data.length > 0 ? (\r\n                            fbCampaignMetrics.data.map((account, index) => (\r\n                                <div key={index} className=\"mb-6\">\r\n                                    <MetaCampaignTable \r\n                                        data={{\r\n                                            account_name: account.account_name,\r\n                                            account_id: account.account_id,\r\n                                            campaigns: account.campaigns\r\n                                        }}\r\n                                        height={height}  // Adjust the height according to the number of campaigns\r\n                                    />\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            <div className=\"text-center py-8 text-gray-500\">\r\n                                No campaign data available\r\n                            </div>\r\n                        )}\r\n                    </main>\r\n                </div>\r\n                <HelpDeskModal />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Check, Star } from \"lucide-react\"\r\n\r\nconst pricingPlans = [\r\n    {\r\n        id: \"FREE\",\r\n        title: \"Free Plan\",\r\n        price: \"Free\",\r\n        description: \"Perfect for getting started with analytics\",\r\n        features: [\r\n            \"Basic Analytics Dashboard\",\r\n            \"Shopify Integration\",\r\n            \"Daily Data Updates\",\r\n            \"Basic Reports\",\r\n            \"Email Support\",\r\n        ],\r\n        buttonText: \"Get Started\",\r\n    },\r\n    {\r\n        id: \"STARTUP\",\r\n        title: \"Startup Plan\",\r\n        price: \"$10\",\r\n        period: \"/month\",\r\n        description: \"Ideal for growing businesses\",\r\n        features: [\r\n            \"Everything in Free Plan\",\r\n            \"Real-time Analytics\",\r\n            \"Custom Dashboards\",\r\n            \"Advanced Reports\",\r\n            \"Priority Email Support\",\r\n        ],\r\n        isPopular: true,\r\n        buttonText: \"Subscribe Now\",\r\n    },\r\n    {\r\n        id: \"GROWTH\",\r\n        title: \"Growth Plan\",\r\n        price: \"$50\",\r\n        period: \"/month\",\r\n        description: \"For businesses ready to scale\",\r\n        features: [\r\n            \"Everything in Startup Plan\",\r\n            \"AI-Powered Insights\",\r\n            \"White-label Reports\",\r\n            \"Custom Integrations\",\r\n            \"Team Collaboration\",\r\n        ],\r\n        buttonText: \"Subscribe Now\",\r\n    },\r\n]\r\n\r\nfunction Pricing() {\r\n    return (\r\n        <div className=\"grid lg:grid-cols-3 gap-6\">\r\n            {pricingPlans.map((plan) => (\r\n                <div\r\n                    key={plan.id}\r\n                    className={`relative bg-white rounded-xl overflow-hidden border transition-all duration-300 hover:shadow-lg hover:scale-105 ${plan.isPopular ? \"border-slate-200 shadow-md\" : \"border-slate-100\"\r\n                        }`}\r\n                >\r\n                    {/* Card Header */}\r\n                    <div\r\n                        className={`p-6 flex flex-col items-center ${plan.id === \"FREE\"\r\n                            ? \"bg-gradient-to-b from-teal-50 to-white\"\r\n                            : plan.id === \"STARTUP\"\r\n                                ? \"bg-gradient-to-b from-violet-50 to-white\"\r\n                                : \"bg-gradient-to-b from-rose-50 to-white\"\r\n                            }`}\r\n                    >\r\n                        {plan.isPopular && (\r\n                            <div className=\"absolute top-0 left-0 bg-amber-500 text-white text-xs font-semibold py-1 px-3 rounded-br-lg\">\r\n                                <Star className=\"h-3.5 w-3.5 fill-white inline-block mr-1\" /> POPULAR\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Icon and Title in the Same Row */}\r\n                        <h3 className=\"text-xl font-bold text-slate-800\">{plan.title}</h3>\r\n                        {/* Price and Description */}\r\n                        <div className=\"flex items-baseline mt-4\">\r\n                            <span\r\n                                className={`text-4xl font-bold ${plan.id === \"FREE\" ? \"text-teal-600\" : plan.id === \"STARTUP\" ? \"text-violet-600\" : \"text-rose-600\"\r\n                                    }`}\r\n                            >\r\n                                {plan.price}\r\n                            </span>\r\n                            {plan.period && <span className=\"text-slate-500 ml-1\">{plan.period}</span>}\r\n                        </div>\r\n\r\n                        <p className=\"mt-3 text-slate-600 text-sm text-center\">{plan.description}</p>\r\n                    </div>\r\n\r\n                    {/* Divider */}\r\n                    <div className=\"w-full h-px bg-slate-100\"></div>\r\n\r\n                    {/* Features */}\r\n                    <div className=\"p-6 bg-white\">\r\n                        <ul className=\"space-y-4\">\r\n                            {plan.features.map((feature, index) => (\r\n                                <li key={index} className=\"flex items-start\">\r\n                                    <div\r\n                                        className={`flex-shrink-0 rounded-full p-0.5 mt-0.5 ${plan.id === \"FREE\"\r\n                                            ? \"bg-teal-100 text-teal-600\"\r\n                                            : plan.id === \"STARTUP\"\r\n                                                ? \"bg-violet-100 text-violet-600\"\r\n                                                : \"bg-rose-100 text-rose-600\"\r\n                                            }`}\r\n                                    >\r\n                                        <Check className=\"h-4 w-4\" />\r\n                                    </div>\r\n                                    <span className=\"ml-3 text-slate-700 text-sm\">{feature}</span>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n\r\n                        {/* Button */}\r\n                        <div className=\"mt-8\">\r\n                            <button\r\n                                className={`w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 ${plan.id === \"FREE\"\r\n                                    ? \"bg-teal-600 hover:bg-teal-700 text-white\"\r\n                                    : plan.id === \"STARTUP\"\r\n                                        ? \"bg-violet-600 hover:bg-violet-700 text-white\"\r\n                                        : \"bg-rose-600 hover:bg-rose-700 text-white\"\r\n                                    }`}\r\n                            >\r\n                                {plan.buttonText}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Pricing\r\n","import { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    Building2,\r\n    Mail,\r\n    Shield,\r\n    HelpCircle,\r\n    Plus,\r\n    Settings,\r\n    Trash2,\r\n} from 'lucide-react';\r\nimport CollapsibleSidebar from '../Dashboard/CollapsibleSidebar';\r\nimport { RootState } from '@/store';\r\nimport { useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Pricing from '../Pricing/Pricing';\r\n\r\nfunction ProfilePage() {\r\n    const [activeTab, setActiveTab] = useState('brands');\r\n    const user = useSelector((state: RootState) => state.user.user);\r\n    const userbrands = user?.brands;\r\n    const brands = useSelector((state: RootState) => state.brand.brands);\r\n\r\n    const userBrandNames = userbrands?.map((brandId) => {\r\n        const brand = brands.find((b) => b._id === brandId);\r\n        return brand ? brand.name : \"Unknown Brand\";\r\n    })\r\n\r\n    const handleZohoLogin = async () => {\r\n        try {\r\n          const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n          const response = await axios.get(`${baseURL}/api/auth/zoho`);\r\n          const { authUrl } = response.data;\r\n    \r\n          window.location.href = authUrl;\r\n        } catch (error) {\r\n          console.error('Error getting Zoho Auth URL:', error);\r\n        }\r\n      }\r\n\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div className=\"flex h-screen\"> {/* Set a fixed width for the sidebar */}\r\n            <CollapsibleSidebar />\r\n            <div className=\"flex-1 h-screen overflow-auto\">\r\n                <div className=\"min-h-screen bg-slate-50\">\r\n                    <div className=\"container mx-auto px-4 py-4\">\r\n                        <div className=\"bg-white rounded-xl shadow-sm\">\r\n                            {/* Profile Header */}\r\n                            <div className=\"p-6 border-b border-slate-200\">\r\n                                <div className=\"flex items-start gap-6\">\r\n                                    <div className=\"h-24 w-24 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                                        <span className=\"text-4xl font-bold text-slate-600\">{user?.username[0]}</span>\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <h2 className=\"text-2xl font-semibold text-slate-800\">{user?.username}</h2>\r\n                                            {user?.isAdmin && (\r\n                                                <Badge className=\"bg-teal-100 text-teal-700 px-3 py-1 rounded-full\">\r\n                                                    <Shield className=\"h-4 w-4 mr-1\" />\r\n                                                    Administrator\r\n                                                </Badge>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"mt-4 grid grid-cols-2 gap-4\">\r\n                                            <div className=\"flex items-center gap-2 text-slate-600\">\r\n                                                <Mail className=\"h-4 w-4\" />\r\n                                                <span>{user?.email}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Navigation */}\r\n                            <div className=\"border-b border-slate-200\">\r\n                                <div className=\"flex px-6\">\r\n                                    {['Brands', 'Pricing','Support',].map((tab) => (\r\n                                        <button\r\n                                            key={tab}\r\n                                            onClick={() => setActiveTab(tab.toLowerCase())}\r\n                                            className={`px-6 py-4 font-medium text-sm transition-colors relative ${activeTab === tab.toLowerCase()\r\n                                                ? 'text-teal-600'\r\n                                                : 'text-slate-600 hover:text-slate-900'\r\n                                                }`}\r\n                                        >\r\n                                            {tab}\r\n                                            {activeTab === tab.toLowerCase() && (\r\n                                                <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-teal-600\"></div>\r\n                                            )}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Content */}\r\n                            {activeTab.toLowerCase() === 'brands' &&\r\n                                <div className=\"p-6\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                                        <Button onClick={()=> navigate(\"/brand-setup\")} variant=\"outline\" className=\"text-slate-700\">\r\n                                            <Plus className=\"h-5 w-5 mr-2\" />\r\n                                            Add New Brand\r\n                                        </Button>\r\n                                        {userBrandNames?.map((brand) => (\r\n                                            <div\r\n                                                key={brand}\r\n                                                className=\"bg-white rounded-lg border border-slate-200 p-5 hover:shadow-md transition-shadow\"\r\n                                            >\r\n                                                <div className=\"flex items-center justify-between mb-4\">\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                                                            <Building2 className=\"h-5 w-5 text-teal-600\" />\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <h3 className=\"font-medium text-slate-900\">{brand}</h3>\r\n                                                            <span className=\"text-sm text-slate-500\">Connected</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <Button variant=\"ghost\" size=\"icon\" className=\"text-slate-600\">\r\n                                                        <Settings className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                                <div className=\"space-y-4\">\r\n                                                    <div className=\"flex items-center justify-between text-sm\">\r\n                                                        <span className=\"text-slate-600\">Integration Status</span>\r\n                                                        <Badge className=\"bg-teal-100 text-teal-700\">Active</Badge>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center justify-between\">\r\n                                                        <Button variant=\"outline\" size=\"sm\" className=\"text-slate-700\">\r\n                                                            Manage\r\n                                                        </Button>\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            className=\"text-red-600 hover:text-red-700\"\r\n                                                        >\r\n                                                            <Trash2 className=\"h-4 w-4\" />\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n                            }\r\n                             {activeTab.toLowerCase() === \"pricing\" && (\r\n                                <div className=\"p-5\">\r\n                                   <Pricing />\r\n                                </div>\r\n                            )}\r\n                            {activeTab.toLowerCase() === \"support\" && user?.isAdmin && (\r\n                                <div className=\"py-8 flex gap-4 items-center justify-center\">\r\n                                    <Button onClick={handleZohoLogin} className=\"bg-teal-600 hover:bg-teal-700\">\r\n                                        <HelpCircle className=\"h-5 w-5 mr-2\" />\r\n                                        Connect Zoho Help Desk\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfilePage;","import { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { RootState } from '@/store';\r\nimport { setFirstTimeLogin, queueTutorials } from '@/store/slices/TutorialSlice';\r\nimport { getAllTutorialsForPath } from './TutorialConfig';\r\n\r\ninterface TutorialManagerProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst TutorialManager: React.FC<TutorialManagerProps> = ({ children }) => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const currentPath = location.pathname;\r\n  \r\n  const isFirstTimeLogin = useSelector((state: RootState) => state.tutorials.isFirstTimeLogin);\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const completedTutorials = useSelector((state: RootState) => \r\n    state.tutorials.completedTutorials || {}\r\n  );\r\n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\r\n  const tutorialQueue = useSelector((state: RootState) => state.tutorials.tutorialQueue);\r\n\r\n  // Check if it's the user's first login based on login count\r\n  useEffect(() => {\r\n    if (user) {\r\n      // Set isFirstTimeLogin to true if loginCount equals 1\r\n      const isFirstLogin = user.loginCount === 1;\r\n      dispatch(setFirstTimeLogin(isFirstLogin));\r\n    }\r\n  }, [user, dispatch]);\r\n\r\n  // Start appropriate tutorials based on path when needed\r\n  useEffect(() => {\r\n    // Only start automatically for first time login and when no tutorial is currently active\r\n    // and when there's no queued tutorials\r\n    if (isFirstTimeLogin && user && !isTutorialActive && tutorialQueue.length === 0) {\r\n      // Get all tutorials for this path in the correct order\r\n      const allTutorials = getAllTutorialsForPath(currentPath);\r\n      \r\n      // Filter out completed tutorials\r\n      const pendingTutorials = allTutorials\r\n        .filter(tutorial => !completedTutorials[tutorial.id])\r\n        .map(tutorial => tutorial.id);\r\n      \r\n      // Queue tutorials if there are any pending\r\n      if (pendingTutorials.length > 0) {\r\n        dispatch(queueTutorials(pendingTutorials));\r\n      }\r\n    }\r\n  }, [isFirstTimeLogin, user, currentPath, completedTutorials, isTutorialActive, tutorialQueue, dispatch]);\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default TutorialManager;","import React, { useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { driver as driverJS, Driver } from 'driver.js';\r\nimport 'driver.js/dist/driver.css';\r\nimport { RootState } from '@/store';\r\nimport { nextTutorial, stopTutorial, setTutorialStep } from '@/store/slices/TutorialSlice';\r\nimport {  getTutorialSteps, getRelatedTutorials } from './TutorialConfig';\r\n\r\nconst TutorialDriver: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  const driverInstanceRef = useRef<Driver | null>(null);\r\n  \r\n  const activeTutorial = useSelector((state: RootState) => state.tutorials.activeTutorial);\r\n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\r\n  const activeTutorialStep = useSelector((state: RootState) => state.tutorials.activeTutorialStep);\r\n  \r\n  // Create a new driver instance when tutorial changes\r\n  useEffect(() => {\r\n    if (activeTutorial && isTutorialActive) {\r\n      const steps = getTutorialSteps(activeTutorial);\r\n      \r\n      if (steps && steps.length > 0) {\r\n        \r\n        // Clean up any existing driver instance\r\n        if (driverInstanceRef.current) {\r\n          driverInstanceRef.current.destroy();\r\n        }\r\n        \r\n        // Start the driver with the steps for this tutorial\r\n        setTimeout(() => {\r\n          // Find all elements before creating driver to ensure they exist\r\n          let allElementsExist = true;\r\n          steps.forEach(step => {\r\n            const element = document.querySelector(step.element);\r\n            if (!element) {\r\n              console.warn(`Element ${step.element} not found for tutorial ${activeTutorial}`);\r\n              allElementsExist = false;\r\n            }\r\n          });\r\n          \r\n          if (!allElementsExist) {\r\n            console.warn(`Not all elements for tutorial ${activeTutorial} exist on the page. Moving to next tutorial.`);\r\n            dispatch(nextTutorial());\r\n            return;\r\n          }\r\n          \r\n          // Create a new driver instance with the steps\r\n          const driverInstance = driverJS({\r\n            showProgress: true,\r\n            smoothScroll: true,\r\n            animate: true,\r\n            allowClose: true,\r\n            stagePadding: 10,\r\n            steps: steps,\r\n            onHighlightStarted: (element) => {\r\n              const currentStepIndex = steps.findIndex(step => step.element === element?.id);\r\n              dispatch(setTutorialStep(currentStepIndex >= 0 ? currentStepIndex : 0));\r\n            },\r\n            onDestroyStarted: () => {\r\n              // Handle when user tries to close the tutorial\r\n              if (window.confirm('Are you sure you want to exit the tutorial?')) {\r\n                dispatch(stopTutorial());\r\n                return true;\r\n              }\r\n              return false;\r\n            },\r\n            onDestroyed: () => {\r\n              // Check if there are related tutorials to queue\r\n              const relatedTutorials = getRelatedTutorials(activeTutorial);\r\n              \r\n              if (relatedTutorials.length > 0) {\r\n                // Add related tutorials to the queue\r\n                dispatch(nextTutorial());\r\n              } else {\r\n                // No related tutorials, just move to the next in queue\r\n                dispatch(nextTutorial());\r\n              }\r\n            }\r\n          });\r\n          \r\n          // Start from the active step\r\n          if (activeTutorialStep > 0 && activeTutorialStep < steps.length) {\r\n            // Use proper API method to navigate to a specific step\r\n            driverInstance.highlight(steps[activeTutorialStep]);\r\n          } else {\r\n            driverInstance.drive();\r\n          }\r\n          \r\n          // Store the instance reference\r\n          driverInstanceRef.current = driverInstance;\r\n          \r\n        }, 500); // Longer delay to ensure elements are rendered\r\n      } else {\r\n        console.error(`No steps defined for tutorial: ${activeTutorial}`);\r\n        dispatch(nextTutorial());\r\n      }\r\n    }\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n      if (driverInstanceRef.current) {\r\n        driverInstanceRef.current.destroy();\r\n        driverInstanceRef.current = null;\r\n      }\r\n    };\r\n  }, [activeTutorial, isTutorialActive, activeTutorialStep, dispatch]);\r\n  \r\n  // This component doesn't render anything visible\r\n  return null;\r\n};\r\n\r\nexport default TutorialDriver;","\r\nimport { UserProvider } from './context/UserContext';\r\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\r\nimport AuthForm from \"./Auth/AuthForm.tsx\";\r\nimport { Toaster } from \"@/components/ui/toaster\"\r\nimport AnalyticsDashboard from './pages/AnalyticsDashboard/AnalyticsDashboard.tsx';\r\nimport GeneralDashboard from './pages/GeneralisedDashboard/GeneralDashboard.tsx';\r\nimport { BrandProvider } from './context/BrandContext.tsx';\r\nimport { ExcelMetricsPage } from './pages/MonthlyAdMetrics/ExcelMetrics.tsx';\r\nimport PerformanceDashboard from './pages/BrandPerformanceDashboard/PerformanceDashboard.tsx';\r\nimport SegmentDashboard from './pages/SegmentDashboard/SegmentDashboard.tsx';\r\nimport GoogleCallback from './Auth/OauthSucces.tsx';\r\nimport ReportsPage from './pages/ReportPage/ReportsPage.tsx';\r\nimport { TokenErrorProvider } from './context/TokenErrorContext.tsx';\r\nimport AudienceConversionReportPage from './pages/ConversionReportPage/AudienceConversionReportPage.tsx';\r\nimport WebsiteConversionReportPage from './pages/ConversionReportPage/WebsiteConversionReportPage.tsx';\r\nimport GoogleAdsDashboard from './pages/GoogleAdsHub/Dashboard.tsx';\r\nimport FbReportPage from './pages/FbReports/FbReportPage.tsx';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { store, persistor } from './store';\r\nimport MetaDashboard from './pages/META/AdAccount/MetaDashboard.tsx';\r\nimport CampaignDashboard from './pages/META/Campaign/CampaignDashboard.tsx';\r\nimport ProfilePage from './pages/Profile Page/ProfilePage.tsx';\r\nimport BrandSetupDashboard from './pages/GeneralisedDashboard/BrandSetUpDashboard.tsx';\r\nimport TutorialManager from './components/Tutorial/TutorialManager.tsx';\r\nimport TutorialDriver from './components/Tutorial/TutorialDriver.tsx';\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <UserProvider>\r\n          <BrandProvider>\r\n            <TokenErrorProvider>\r\n            \r\n              <Router>\r\n              <TutorialManager>\r\n                <TutorialDriver />\r\n                <Toaster />\r\n                <Routes>\r\n                  <Route path=\"/\" element={<AuthForm />} />\r\n                  <Route path=\"/dashboard\" element={<GeneralDashboard />} />\r\n                  <Route path=\"/analytics-dashboard/:brandId\" element={<AnalyticsDashboard />} />\r\n                  <Route path='/ecommerce-reports/:brandId' element={<ReportsPage />} />\r\n                  <Route path=\"/ad-metrics/:brandId\" element={<ExcelMetricsPage />} />\r\n                  <Route path='/performance-metrics' element={<PerformanceDashboard />} />\r\n                  <Route path='/segment-dashboard/:brandId' element={<SegmentDashboard />} />\r\n                  <Route path='/adaccount-summary/:brandId' element={<MetaDashboard />} />\r\n                  <Route path='/meta-campaigns/:brandId' element={<CampaignDashboard />} />\r\n                  <Route path='/meta-reports/:brandId' element={<FbReportPage />} />\r\n                  <Route path='/google-ads-hub/:brandId' element={<GoogleAdsDashboard />} />\r\n                  <Route path=\"/conversion-reports/:brandId/demographics\" element={<AudienceConversionReportPage />} />\r\n                  <Route path=\"/conversion-reports/:brandId/performance\" element={<WebsiteConversionReportPage />} />\r\n                  <Route path=\"/callback\" element={<GoogleCallback />} />\r\n                  <Route path =\"/profile\" element = {<ProfilePage />} />\r\n                  <Route path =\"/brand-setup\" element = {<BrandSetupDashboard />} />\r\n                </Routes>\r\n                </TutorialManager>\r\n              </Router>\r\n             \r\n            </TokenErrorProvider>\r\n          </BrandProvider>\r\n        </UserProvider>\r\n        </PersistGate>\r\n        </Provider>\r\n        );\r\n}\r\n\r\n        export default App;\r\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"names":["UserContext","createContext","UserProvider","children","user","setUser","useState","storedUser","showLandingPopup","setShowLandingPopup","useEffect","updateUser","newUser","jsx","useUser","context","useContext","cn","inputs","twMerge","clsx","Input","React.forwardRef","className","type","props","ref","buttonVariants","cva","Button","variant","size","asChild","Comp","Slot","labelVariants","Label","LabelPrimitive.Root","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","state","action","t","toast","listeners","memoryState","listener","id","update","dismiss","open","useToast","setState","React.useState","React.useEffect","index","initialState","userSlice","createSlice","clearUser","userReducer","AuthForm","isLogin","setIsLogin","username","setUsername","email","setEmail","password","setPassword","showPassword","setShowPassword","navigate","useNavigate","errors","setErrors","useSelector","useDispatch","toggleForm","validateForm","newErrors","isValid","handleSubmit","e","response","baseURL","axios","userData","error","handleGoogleLogin","authUrl","jsxs","User","Mail","Lock","Eye","EyeOff","FcGoogle","ToastProvider","ToastPrimitives.Provider","ToastViewport","ToastPrimitives.Viewport","toastVariants","Toast","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","Cross2Icon","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","title","description","brandSlice","setSelectedBrandId","setBrands","resetBrand","brandReducer","TooltipProvider","TooltipPrimitive.Provider","Tooltip","TooltipPrimitive.Root","TooltipTrigger","TooltipPrimitive.Trigger","TooltipContent","sideOffset","TooltipPrimitive.Portal","TooltipPrimitive.Content","Logo","ScrollArea","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","orientation","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","CollapsibleSidebar","isExpanded","setIsExpanded","location","useLocation","sidebarRef","useRef","selectedBrandId","brands","fetchBrands","useCallback","toggleSidebar","prev","handleLogout","pathParts","dashboards","Blend","CalendarRange","ShoppingCart","LineChart","FaMeta","SiGoogleads","Radar","allDashboards","Compass","Target","isItemDisabled","item","currentBrand","b","renderSidebarItems","items","isTopLevel","hasValidPath","SidebarItem","ChevronUp","ChevronDown","SidebarChild","ChevronLeft","ChevronRight","Store","_a","brand","UserProfile","LogoutButton","path","text","onClick","disabled","isSelected","isOpen","setIsOpen","hasChildren","React","handleToggle","isChildSelected","child","isActive","baseClasses","content","Fragment","childItem","NavLink","icon","openIcon","closeIcon","tooltipContent","autoOpenOnSelect","_b","grandchild","userProfileContent","User2Icon","logoutContent","LogOut","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","Skeleton","FacebookLogo","width","height","GoogleLogo","MetricCardSkeleton","MetricCard","label","value","date","formatDate","dateValue","HelpCircle","AdAccountMetricsCard","metrics","isLoading","errorMessage","_","metric","CampaignGrid","campaigns","campaign","spendValue","roas","roasValue","Tab","CustomTabs","tabs","activeTab","onTabChange","tab","Calendar","classNames","showOutsideDays","DayPicker","ChevronLeftIcon","ChevronRightIcon","Popover","PopoverPrimitive.Root","PopoverTrigger","PopoverPrimitive.Trigger","PopoverContent","align","PopoverPrimitive.Portal","PopoverPrimitive.Content","Checkbox","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","CheckIcon","dateSlice","setDate","clearDate","dateReducer","selectDateRange","createSelector","from","to","DatePickerWithRange","defaultDate","resetToFirstPage","dateRange","initialDate","useMemo","tempDate","setTempDate","compareDate","setCompareDate","setOpen","selectedPreset","setSelectedPreset","isCompareEnabled","setIsCompareEnabled","calendarMode","setCalendarMode","manualFromDate","setManualFromDate","format","manualToDate","setManualToDate","manualCompareFromDate","setManualCompareFromDate","manualCompareToDate","setManualCompareToDate","dates","today","daysSinceSunday","startOfThisWeek","subDays","endOfThisWeek","addDays","startOfThisMonth","endOfThisMonth","startOfLastWeek","endOfLastWeek","quarter","startOfThisQuarter","endOfThisQuarter","lastQuarter","lastQuarterYear","startOfLastQuarter","endOfLastQuarter","parseManualDate","dateString","parsedDate","parse","handleManualDateInput","fromDate","toDate","handleManualCompareDateInput","setPresetRange","presets","subMonths","subYears","startOfYear","endOfYear","handleCalendarSelect","range","formatDateRange","clearDateRange","handleUpdate","CalendarIcon","preset","availableTutorials","tutorialStepsMap","getTutorialsForPath","tutorial","a","getTutorialSteps","tutorialId","getTutorialById","getRelatedTutorials","getAllTutorialsForPath","pageTutorials","processedTutorials","addedTutorialIds","processTutorial","tutorialRouteMap","tutorialSlice","setFirstTimeLogin","queueTutorials","startTutorial","nextTutorial","setTutorialStep","stopTutorial","completeFirstTimeLogin","resetTutorial","resetAllTutorials","tutorialsReducer","TutorialButton","buttonText","componentId","position","currentPath","isTutorialActive","handleStartTutorial","allTutorials","tutorialIds","componentTutorials","buttonStyles","HeaderTutorialButton","completedTutorials","hasTutorials","allCompleted","Header","Icon","showDatePicker","showSettings","showRefresh","handleManualRefresh","locale","setLocale","RefreshCw","Settings","Dashboard","setIsLoading","fbAdAccountsMetrics","setFbAdAccountsMetrics","googleAdMetrics","setGoogleAdMetrics","setActiveTab","dataSource","setDataSource","rawMetrics","setRawMetrics","brandId","useParams","dateFrom","dateTo","handleDataSourceChange","newValue","selectedTab","userId","fetchAdData","startDate","endDate","fbData","googleData","fbError","googleError","calculateAggregatedMetrics","intervalId","totalSpent","totalRevenue","totalPurchases","totalClicks","totalImpressions","account","formattedMetrics","googleMetrics","_c","_d","_e","_f","_g","_h","accountMetrics","fbmetrics","TicketFormSkeleton","TicketForm","onClose","form","setForm","departments","setDepartments","loading","setLoading","submitting","setSubmitting","handleChange","name","MessageSquare","X","AlertCircle","Building","Briefcase","dept","Loader2","Send","HelpDeskModal","isModalOpen","setIsModalOpen","FaHeadset","AnalyticsDashboard","Dialog","DialogPrimitive.Root","DialogTrigger","DialogPrimitive.Trigger","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","DialogHeader","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","ShopifyModalContent","storeName","setStoreName","handleShopifyLogin","Ga4Logo","ShopifyLogo","OtherPlatformModalContent","platform","onConnect","connectedId","searchTerm","setSearchTerm","googleAdsAccounts","setGoogleAdsAccounts","googleAnalyticsAccounts","setGoogleAnalyticsAccounts","facebookAdsAccounts","setFacebookAdsAccounts","showLoginButton","setShowLoginButton","fetchGoogleAdsAccounts","handleError","fetchGoogleAnalyticsAccounts","fetchFacebookAdsAccounts","axiosError","status","data","code","filteredAccounts","handleConnect","accountId","displayName","managerId","handleFbLogin","Search","isGoogleAds","isFacebook","accountName","platformLogo","displayText","Check","platforms","steps","BrandSetup","currentStep","setCurrentStep","openModal","setOpenModal","connectedAccounts","setConnectedAccounts","brandName","setBrandName","brandLogo","setBrandLogo","googleAdId","setGoogleAdId","ga4Id","setGa4Id","fbAdId","setFBAdId","shop","setShop","shopifyAccessToken","setShopifyAccessToken","params","accessToken","shopName","handleLogoUpload","event","file","isConnected","getConnectedId","platformName","canProceed","payload","newBrandId","updatedUser","renderStepContent","Upload","accounts","Building2","step","current","ArrowRight","BrandSetupDashboard","Rocket","TokenErrorContext","TokenErrorProvider","tokenError","setTokenError","useTokenError","createAxiosInstance","axiosInstance","TimeSectionSkeleton","DashboardSkeleton","MetricRow","previous","change","trend","ArrowUpIcon","ArrowDownIcon","PeriodCard","period","gradients","dateRanges","Clock","CalendarDays","Users","ShoppingBag","Tag","Coins","TrendingUpDown","PlatformConnections","getBorderColorClass","getBgColorClass","getIconBgColorClass","getIconTextColorClass","getStatusTextColorClass","p","CheckCircle2","XCircle","SummaryDashboard","selectedBrand","fbAccounts","googleAccount","ga4Accounts","shopifyShopName","shopifyAccount","userName","analytics","setAnalytics","facebookad","setFacebookad","googlead","setGooglead","fetchData","requests","req","result","periods","GeneralDashboard","BrandContext","BrandProvider","storedBrands","storedSelectedBrandId","TooltipHeader","tooltip","colSpan","rowSpan","isSubHeader","ExcelMetricsPage","metricsData","setMetricsData","setError","isFullScreen","setIsFullScreen","expandedMonths","setExpandedMonths","toggleFullScreen","getTableHeight","queryParams","err","toggleMonth","monthYear","m","formatCurrency","formatPercentage","processedData","safeDivide","numerator","denominator","monthData","processedDailyMetrics","daily","metaSales","sum","googleSales","totalAdSales","Minimize","Maximize","Table","TableHeader","TableBody","TableFooter","TableRow","TableHead","TableCell","TableCaption","Select","SelectPrimitive.Root","SelectValue","SelectPrimitive.Value","SelectTrigger","SelectPrimitive.Trigger","SelectPrimitive.Icon","ChevronDownIcon","SelectScrollUpButton","SelectPrimitive.ScrollUpButton","ChevronUpIcon","SelectScrollDownButton","SelectPrimitive.ScrollDownButton","SelectContent","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectLabel","SelectPrimitive.Label","SelectItem","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","SelectPrimitive.ItemText","SelectSeparator","SelectPrimitive.Separator","BrandPerformanceDashboard","selectedBrands","setSelectedBrands","newBrand","setNewBrand","endOfMonth","editingBrand","setEditingBrand","editData","setEditData","achievedMetrics","setAchievedMetrics","getMetaMetrics","fetchMetricsData","handleInputChange","handleSourceChange","handleAddBrand","brandToAdd","newBrandTarget","handleEdit","brandToEdit","handleSaveEdit","handleCancelEdit","handleDelete","Loader","calculateMetrics","achievedSpend","achievedSales","remainingSales","achievedROAS","targetDate","remainingDays","requiredSalesPerDay","chartData","PlusCircle","isEditing","Edit2","Trash2","ResponsiveContainer","BarChart","XAxis","YAxis","Bar","PerformanceDashboard","ProductTab","setTabs","currentPage","setCurrentPage","expandedCategories","setExpandedCategories","filterApplied","setFilterApplied","rowsPerPage","filterData","setFilterData","cacheRef","POLL_INTERVAL","sortColumn","setSortColumn","sortOrder","setSortOrder","handleTabChange","newTabId","fetchTabData","tabId","body","isFilterApplied","updatedBody","cacheKey","cachedData","now","prevTabs","columns","key","requestBody","handleRowClick","currentTab","rowData","tabColumnMapping","bodyKeyMapping","columnToFetch","bodyKey","valueToSend","filterPayload","toggleCategory","categoryPath","newSet","renderCategoryRow","category","depth","subCategory","handleSort","columnId","prevOrder","getCurrentTabData","sortedData","aValue","bValue","stringA","stringB","startIndex","endIndex","totalPages","categoryColumns","TableSkeleton","idx","Package","Layers","BarChart2","Filter","column","ArrowUp","ArrowDown","ArrowUpDown","row","i","isIssuesColumn","isProductColumn","isStatusColumn","isNoIssues","getStatusColor","renderCell","CheckCircle","statusValue","colorClass","rowIndex","cellIndex","SearchTermTable","searchTerms","setSearchTerms","hasMoreData","setHasMoreData","totalRecords","setTotalRecords","setTotalPages","campaignAdGroupPairs","setCampaignAdGroupPairs","selectedCampaign","setSelectedCampaign","statusOptions","setStatusOptions","selectedAdGroup","setSelectedAdGroup","selectedStatus","setSelectedStatus","Zap","Megaphone","DollarSign","TrendingUp","Percent","MousePointer","CreditCard","sortedSearchTerms","handleCampaignChange","handleAdGroupChange","handleStatusChange","filteredAdGroups","pair","adGroup","isSearchTermColumn","searchTermValue","performance","isPerformingWell","metricLabels","ROWS_PER_PAGE","AgeAndGenderMetrics","filters","setFilters","filterOptions","setFilterOptions","setData","showGraph","setShowGraph","graphData","setGraphData","selectedMetrics","setSelectedMetrics","handleMetricChange","cachedAgeRanges","setCachedAgeRanges","cachedGenders","setCachedGenders","requestData","_forceRefresh","apiEndpoint","genderCampaignNames","campaignNames","campaignAdGroupMap","adGroups","prevOptions","ageRanges","genders","str","statusColor","aggregatedData","processedGraphData","displayKey","baseEntry","typedMetrics","handleFilterChange","filterKey","updatedFilters","sortableColumns","handlePageChange","newPage","validPage","colorPalette","ag","gender","CartesianGrid","RechartsTooltip","Legend","DropdownMenu","DropdownMenuPrimitive.Root","DropdownMenuTrigger","DropdownMenuPrimitive.Trigger","DropdownMenuSubTrigger","inset","DropdownMenuPrimitive.SubTrigger","DropdownMenuSubContent","DropdownMenuPrimitive.SubContent","DropdownMenuContent","DropdownMenuPrimitive.Portal","DropdownMenuPrimitive.Content","DropdownMenuItem","DropdownMenuPrimitive.Item","DropdownMenuCheckboxItem","checked","DropdownMenuPrimitive.CheckboxItem","DropdownMenuPrimitive.ItemIndicator","DropdownMenuRadioItem","DropdownMenuPrimitive.RadioItem","DotFilledIcon","DropdownMenuLabel","DropdownMenuPrimitive.Label","DropdownMenuSeparator","DropdownMenuPrimitive.Separator","getConditionalColors","average","ReportTable","allTimeData","sortDirection","setSortDirection","filterLabel","setFilterLabel","filterType","setFilterType","columnWidths","setColumnWidths","isResizing","setIsResizing","loadedRows","setLoadedRows","rowsPerChunk","isDateTable","tableRef","containerRef","initializationRef","dataRef","filteredDataRef","comparisonColumns","parsePercentage","headerCells","widths","cell","handleResize","averageValues","averages","validData","allTimeAverageValues","validAllTimeData","rowPerformanceLabels","currentPerformance","isWorstPerformingCurrent","currentLabel","allTimePerformance","allTimeAverage","isWorstPerformingAllTime","handleMouseDown","startX","startWidth","handleMouseMove","moveEvent","delta","newWidth","newWidths","handleMouseUp","parsedData","aNum","bNum","isNumericColumn","handleClickLabel","filteredData","loadMoreRows","nextChunk","handleScroll","target","displayRows","pageCount","goToPage","page","pageNumber","columnPairs","colIndex","isFirstColumn","needsLeftSticky","isComparisonCol","Award","ThumbsDown","cellValue","isComparisonColumn","isPairedColumn","rateColumn","rateValue","ChevronsLeft","ChevronsRight","ReportTable$1","FilterComponent","onFiltersChange","filterColumn","setFilterColumn","filterOperator","setFilterOperator","filterValue","setFilterValue","addFilter","CitySessionPage","propDateRange","setAllTimeData","setFilteredData","selectedColumns","setSelectedColumns","rowsToShow","setRowsToShow","removedColumns","setRemovedColumns","allColumns","toggleColumnSelection","newColumns","col","prevRemoved","fetchMetrics","analyticsResponse","allTimeResponse","fetchedData","fetchedAllTimeData","prevSelected","sortedSelectedColumns","applyFilters","filter","numValue","memoizedFilteredData","numericColumns","removeFilter","Columns","LandingPageSession","AgeReportPage","GenderReportPage","ChannelSessionPage","fullScreenChangeHandler","AgeGenderMetrics","CityBasedReports","GenderBasedReports","SegmentDashboard","GoogleCallback","googletoken","fbToken","googleRefreshToken","zohoRefreshToken","updateToken","url","token","login","NewReportTable","columnOrder","setColumnOrder","draggedColumn","setDraggedColumn","minColumnWidth","widthsRef","handleDragStart","handleDragOver","handleDrop","targetColumn","newOrder","draggedIdx","targetIdx","containerWidth","totalColumns","initialWidths","equalWidth","parseDateString","dateStr","day","month","year","aDate","bDate","renderHeader","GripVertical","NewReportTable$1","Sheet","SheetPrimitive.Root","SheetTrigger","SheetPrimitive.Trigger","SheetPortal","SheetPrimitive.Portal","SheetOverlay","SheetPrimitive.Overlay","sheetVariants","SheetContent","side","SheetPrimitive.Content","SheetPrimitive.Close","SheetHeader","SheetTitle","SheetPrimitive.Title","SheetDescription","SheetPrimitive.Description","ColumnManagementSheet","visibleColumns","frozenColumns","onVisibilityChange","onOrderChange","onFrozenChange","dropTargetColumn","setDropTargetColumn","filteredColumns","toggleColumnVisibility","newVisibleColumns","toggleColumnFreeze","newFrozenColumns","Settings2","Pin","PinOff","EcommerceMetricsPage","compareFrom","compareTo","compareStartDate","compareEndDate","fetchedRanges","isConsolidatedData","firstRangeData","firstItem","setVisibleColumns","handleVisibilityChange","handleOrderChange","NoGA4AcessPage","PlatformModal","onOpenChange","onSuccess","connectedIds","endpoint","accountsSetter","updateBrandWithAccount","updateData","platformConfigs","PieChart","BarChart3","AlertTriangle","Facebook","ConnectPlatform","config","benefit","DaywiseMetricsPage","ReportsPage","hasGA4Account","DailyEcommerceMetrics","ConversionTable","primaryColumn","secondaryColumns","monthlyDataKey","monthlyMetrics","rows","isAdsTable","months","getMonthName","monthNumber","allMonths","monthlyData","monthNum","allRows","dataIndex","metricIndex","prevRows","scrollTop","scrollHeight","clientHeight","thresholds","totalSessions","totalConvRate","sessionCount","totalSpend","totalPurchaseROAS","spendCount","totalCost","totalConvValuePerCost","costCount","getMetricColor","sessions","convRate","spend","purchaseROAS","cost","convValuePerCost","isHighSessions","isGoodConversion","isHighSpent","isGoodROAS","isHighCost","isGoodConvValuePerCost","renderMonthCell","bgColor","renderMetricValue","currentMetric","columnIndex","totalConvValue","totalPCV","renderMetricRow","getMonthNumber","monthName","monthFormat","totalRows","renderColumnHeader","thresholdValue","PerformanceSummary","metricConfig","expandedCategory","setExpandedCategory","primaryMetric","secondaryMetric","categories","categorizedItems","primaryValue","isHighPrimary","isHighSecondary","c","metricConfigs","defaultStyles","calculateThresholds","getCellStyle","styles","applyExcelStyles","worksheet","XLSX.utils","C","headerCell","actualRow","startCol","endCol","cellRef","cellStyle","monthIndex","monthKey","fillStyle","ExcelDownload","fileName","buttonClassName","handleDownload","workbook","sheetData","headerRow","colWidths","XLSX.writeFile","FileDown","conversionFiltersSlice","setFilter","clearFilters","conversionFiltersReducer","FILTERABLE_COLUMNS","FilterConversions","availableColumns","selectedColumn","setSelectedColumn","operator","setOperator","setValue","dropdownOpen","setDropdownOpen","handleAddFilter","handleClearFilters","filterTooltip","DeviceTypeConversion","apiResponse","setApiResponse","shallowEqual","transformedFilters","acc","apiColumnName","GenderConversion","AgeConversion","InterestConversion","OperatingSystemConversion","BrowserConversion","sessionsFilter","convRateFilter","SourceConversion","AudienceConversionReportPage","refs","observer","entries","entry","element","targetRef","offset","CityTypeConversion","ChannelConversion","RegionConversion","LandingPageConversion","CampaignConversion","PagePathConversion","PageTitleConversion","CountryConversion","WebsiteConversionReportPage","SearchTerm","Age","Gender","Keyword","Product","GoogleAdsDashboard","hasGoogleAdAccount","SquareChartGantt","AudienceFbReport","fullScreenAccount","setFullScreenAccount","blendedAudienceData","PlacementFbReport","blendedPlacementData","PlatformFbReport","blendedPlatformData","CountryFbReport","blendedCountryData","DeviceFbReport","dateForm","blendedDeviceData","GenderFbReport","blendedGenderData","AgeFbReport","blendedAgeData","FbReportPage","defaultAccountState","initializeAccountState","campaignGroupsSlice","color","newGroup","groupId","group","campaignName","g","expandedGroups","isCreating","campaignGroupsReducer","campaignLabelsSlice","campaignId","l","sourceCampaignId","targetCampaignId","addLabelToCampaign","removeLabelFromCampaign","toggleAddingLabel","clearAccountLabels","copyLabels","deleteLabel","campaignLabelsReducer","rootReducer","combineReducers","persistConfig","storage","persistedReducer","persistReducer","store","configureStore","getDefaultMiddleware","persistor","persistStore","MetaDashboard","badgeVariants","Badge","LABEL_COLORS","DEFAULT_COLUMN_WIDTH","MetaCampaignTable","newLabel","setNewLabel","selectedCampaigns","setSelectedCampaigns","isDropdownOpen","setIsDropdownOpen","draggedCampaign","setDraggedCampaign","dragOverCampaign","setDragOverCampaign","dragOverColumn","setDragOverColumn","setFrozenColumns","isGroupingEnabled","setIsGroupingEnabled","groupedCampaigns","setGroupedCampaigns","ungroupedCampaigns","setUngroupedCampaigns","columnRefs","labels","isAddingLabel","accountLabels","hasAnyLabels","labelArray","initialColumns","shouldShowLabelsColumn","initialVisibleColumns","baseColumns","orderedColumns","allLabels","labelMap","unGrouped","campaignLabels","grouped","labelColorMap","map","colorIndex","getLeftPosition","visibleOrderedColumns","columnElement","handleAddLabel","campaignIndex","handleRemoveLabel","filteredCampaigns","getColumnStyle","handleDragEnd","handleColumnDragStart","columnName","handleColumnDragOver","handleColumnDrop","targetColumnName","draggedIndex","targetIndex","newColumnOrder","handleColumnDragEnd","toggleGroupExpansion","labelIndex","updatedGroups","calculateGroupSummary","summary","summaryColumns","calculationMethods","totalLinkClicks","totalreach","totaloutboundctr","totalFrequency","totalUniqueClicks","totalAddToCart","totalCheckoutInitiated","totalLandingPageView","threeSecondsView","totalimpressions","values","val","calculateMethod","FileText","LayoutGrid","FolderOpen","Plus","Info","isFrozen","leftPos","columnStyle","el","SlidersHorizontal","groupIndex","CampaignDashboard","fbCampaignMetrics","setFbCampaignMetrics","fbAdResponse","pricingPlans","Pricing","plan","Star","feature","ProfilePage","userbrands","userBrandNames","handleZohoLogin","Shield","TutorialManager","isFirstTimeLogin","tutorialQueue","isFirstLogin","pendingTutorials","TutorialDriver","driverInstanceRef","activeTutorial","activeTutorialStep","allElementsExist","driverInstance","driverJS","currentStepIndex","App","Provider","PersistGate","Router","Routes","Route","createRoot","StrictMode"],"mappings":"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"}